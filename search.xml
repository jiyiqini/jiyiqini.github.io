<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>å¸¸è§çš„ Hexo æŠ¥é”™ä¸è§£å†³</title>
    <url>/dev-tools/hexo/Hexo-Issues/</url>
    <content><![CDATA[<p>hexo ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œç»å¸¸é‡åˆ°ä¸€äº›ç¨€å¥‡å¤æ€ªçš„é—®é¢˜ã€‚ç»æŸ¥é˜…åè§£å†³ï¼Œç°å°†è¿™äº›å¸¸è§çš„é”™è¯¯ä¸å¤„ç†ç­–ç•¥ä¸€ä¸€è®°å½•ã€‚</p>
<span id="more"></span>

<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul>
<li><a href="https://leunggeorge.github.io/2017/07/09/%E6%89%A7%E8%A1%8Chexo%E6%97%B6%E7%9A%84%E4%B8%80%E4%BA%9B%E6%8A%A5%E9%94%99%E5%A4%84%E7%90%86/">æ‰§è¡Œ hexo æ—¶çš„ä¸€äº›æŠ¥é”™å¤„ç†</a></li>
<li><a href="https://blog.csdn.net/weixin_47617631/article/details/121425697">hexoä¸Šä¼ åšå®¢ä»£ç æ—¶èŠ±æ‹¬å·è¢«è½¬ä¹‰äº†</a></li>
</ul>
<h1 id="Deprecatedï¼šuse-date-for-updated"><a href="#Deprecatedï¼šuse-date-for-updated" class="headerlink" title="Deprecatedï¼šuse_date_for_updated"></a>Deprecatedï¼š<code>use_date_for_updated</code></h1><p>å› å®‰è£…ä¸€äº›æ¨¡å—ï¼Œä¸­é€”åˆè·Ÿè¸ªæç¤º fix ï¼Œæœ€åè«åå…¶å¦™åœ°æŠŠ hexo ä» <code>4.2.0</code> å‡çº§åˆ°äº† <code>5.4.0</code> ï¼Œåœ¨ä½¿ç”¨ hexo æ“ä½œï¼ˆ<code>hexo server</code>, etc.ï¼‰æ—¶ï¼Œå‡ºç°å¦‚ä¸‹è­¦å‘Šæç¤ºï¼š</p>
<pre class=" language-text"><code class="language-text">Deprecated config detected: "use_date_for_updated" is deprecated, please use "updated_option" instead. See https://hexo.io/docs/configuration for more details.
</code></pre>
<blockquote>
<p><strong>åŸå› ï¼š</strong> æç¤º <code>use_date_for_updated</code> è¿‡æ—¶ã€‚<br><strong>ğŸ‘‰ğŸ»è§£å†³ï¼š</strong> æ ¹æ®æç¤ºï¼Œç”¨ <code>updated_option</code> æ›¿æ¢å³å¯ã€‚</p>
<pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># ä¿®æ”¹æ–‡ä»¶ï¼š&lt;hexo-blog>/_config.yml</span>
<span class="token comment" spellcheck="true"># Date / Time format</span>
<span class="token comment" spellcheck="true">## Use post's date for updated date unless set in front-matter</span>
<span class="token key atrule">updated_option</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre>
</blockquote>
<h1 id="Hexo-æ’å…¥ä»£ç ç‰‡æ®µæ—¶ï¼Œåœ¨é¢„è§ˆæ—¶è¯¸å¦‚-ç­‰è¢«è½¬ä¹‰äº†ã€‚"><a href="#Hexo-æ’å…¥ä»£ç ç‰‡æ®µæ—¶ï¼Œåœ¨é¢„è§ˆæ—¶è¯¸å¦‚-ç­‰è¢«è½¬ä¹‰äº†ã€‚" class="headerlink" title="Hexo æ’å…¥ä»£ç ç‰‡æ®µæ—¶ï¼Œåœ¨é¢„è§ˆæ—¶è¯¸å¦‚ {} ç­‰è¢«è½¬ä¹‰äº†ã€‚"></a>Hexo æ’å…¥ä»£ç ç‰‡æ®µæ—¶ï¼Œåœ¨é¢„è§ˆæ—¶è¯¸å¦‚ <code>&#123;&#125;</code> ç­‰è¢«è½¬ä¹‰äº†ã€‚</h1><p>å½“æˆ‘åˆ‡æ¢åˆ° <a href="https://github.com/blinkfox/hexo-theme-matery">hexo-theme-matery</a> ä¸»é¢˜æ—¶ï¼Œmarkdown é‡Œæ’å…¥ä»£ç ç‰‡æ®µåï¼Œåœ¨åšå®¢é¢„è§ˆæ˜¾ç¤ºæ—¶ï¼Œä»£ç é‡Œçš„èŠ±æ‹¬å· <code>&#123;&#125;</code> ä¸æ˜¾ç¤ºï¼Œè€Œæ˜¯æ˜¾ç¤ºè½¬ä¹‰ä»£ç  <code>&amp;#123</code> å’Œ <code>&amp;#125</code> ï¼ˆ*åœ¨å…¶å®ƒä¸»é¢˜ä¸‹æš‚æ—¶æ²¡æœ‰è¿™ä¸ªé—®é¢˜~*ï¼‰ã€‚</p>
<blockquote>
<p><strong>åŸå› ï¼š</strong> ä¸»è¦æ˜¯ <code>&#123;ä½ çš„åšå®¢é¡¹ç›®&#125;/node_modules/hexo-prism-plugin/src/index.js</code> é…ç½®é‡Œç¼ºå°‘äº†è¿™äº›è½¬ä¹‰å­—ç¬¦çš„æ˜ å°„é…ç½®ã€‚<br><strong>ğŸ‘‰ğŸ»è§£å†³ï¼š</strong> </p>
<blockquote>
<ol>
<li>æ‰“å¼€ <code>&#123;ä½ çš„åšå®¢é¡¹ç›®&#125;/node_modules/hexo-prism-plugin/src/index.js</code> æ–‡ä»¶ã€‚</li>
<li>æ‰¾åˆ° <code>map</code> å˜é‡å£°æ˜ï¼Œå°† <code>&#123;&#125;</code> ç­‰çš„è½¬ä¹‰å­—ç¬¦ä¸å‹å¥½æ˜¾ç¤ºå­—ç¬¦æ˜ å°„é”®å€¼å¯¹ï¼ˆ<code>&amp;#123 â†’ &#123;</code> ä¸ <code>&amp;#125 â†’ &#125;</code>ï¼‰åŠ ä¸Šï¼Œç„¶åä¿å­˜ï¼Œ<code>hexo s</code> é‡å¯æœåŠ¡ã€‚<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// {ä½ çš„åšå®¢é¡¹ç›®}/node_modules/hexo-prism-plugin/src/index.js</span>
<span class="token operator">...</span>
<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token string">'&amp;#39;'</span><span class="token punctuation">:</span> <span class="token string">'\''</span><span class="token punctuation">,</span>
 <span class="token string">'&amp;amp;'</span><span class="token punctuation">:</span> <span class="token string">'&amp;'</span><span class="token punctuation">,</span>
 <span class="token string">'&amp;gt;'</span><span class="token punctuation">:</span> <span class="token string">'>'</span><span class="token punctuation">,</span>
 <span class="token string">'&amp;lt;'</span><span class="token punctuation">:</span> <span class="token string">'&lt;'</span><span class="token punctuation">,</span>
 <span class="token string">'&amp;quot;'</span><span class="token punctuation">:</span> <span class="token string">'"'</span><span class="token punctuation">,</span>
 <span class="token string">'&amp;#123;'</span><span class="token punctuation">:</span> <span class="token string">'{'</span><span class="token punctuation">,</span>
 <span class="token string">'&amp;#125;'</span><span class="token punctuation">:</span> <span class="token string">'}'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
</code></pre>
</li>
</ol>
</blockquote>
</blockquote>
]]></content>
      <categories>
        <category>æŠ€æœ¯ç¯‡</category>
        <category>å·¥å…·æŒ‡å—</category>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>æŠ¥é”™</tag>
        <tag>å¼‚å¸¸</tag>
      </tags>
  </entry>
  <entry>
    <title>æ·»åŠ åŠŸèƒ½ï¼Œç¾åŒ– Hexo (å…¥é—¨ç¯‡2)</title>
    <url>/dev-tools/hexo/How-To-Config/</url>
    <content><![CDATA[<p>Hexoåšå®¢æ­å»ºæˆåŠŸåï¼Œå…¶å®æˆ‘ä»¬å°±å·²ç»å¯ä»¥æ„‰å¿«åœ°è¿›è¡Œå†™æ–‡ç« äº†ã€‚ä½†æ˜¯ï¼Œç”±äºä¸ªäººå–œå¥½ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦è‡ªå®šä¹‰è®¾ç½®ä¸€ä¸‹åˆ›å»ºçš„åšå®¢ç³»ç»Ÿã€‚è¿™æ ·ï¼Œæ—¢ä¹ŸåŠ©äºæˆ‘ä»¬æœ‰æ›´å¥½çš„å¿ƒæƒ…å»ç¼–å†™æ–‡ç« ï¼Œåˆèƒ½å¸å¼•æ›´å¤šè®¿å®¢çš„é˜…è¯»ã€‚Soï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•è¿›è¡Œå¸¸è§çš„ä¸ªæ€§åŒ–è®¾ç½®å§ï¼Ÿ</p>
<span id="more"></span>

<!-- [toc] -->

<blockquote>
<p><strong>æ›´å¤šå‚è€ƒï¼š</strong></p>
<ul>
<li><a href="https://blog.csdn.net/dta0502/article/details/89607895">Hexo-Yilia è¿›é˜¶ç¬”è®°(CSDN)</a></li>
<li><a href="https://tding.top/archives/9a232bbe.html">Hexo-Yilia è¿›é˜¶ç¬”è®°(Hexo)</a></li>
<li><a href="https://cloud.tencent.com/developer/article/1684713?from=article.detail.1626165">Hexo-Matery ä¸»é¢˜ç¾åŒ–</a></li>
</ul>
</blockquote>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åˆå§‹åˆ›å»ºå¥½çš„ <code>Hexo+next</code> åŸºæœ¬å¯ä»¥ç”¨ï¼Œä¹Ÿç®€æ´ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬è¿˜æ˜¯æœ‰éœ€è¦è¿›ä¸€æ­¥ç¾åŒ–ä¸€ä¸‹ã€‚</p>
<p>æ— éå°±æ˜¯ä¸»é¢˜ä¸æ’ç‰ˆï¼Œå›´ç»•çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸å¤–ä¹ï¼š</p>
<blockquote>
<pre class=" language-bash"><code class="language-bash"><span class="token punctuation">..</span>/<span class="token punctuation">{</span>your_hexo_blog<span class="token punctuation">}</span>
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€_config.yml <span class="token comment" spellcheck="true">#å…¨å±€é…ç½®</span>
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€themes/hexo-theme-next/_config.yml <span class="token comment" spellcheck="true">#nextä¸»é¢˜é…ç½®ï¼šåé¢çš„å¤§å¤šæ•°éƒ½åœ¨è¿™é‡Œé…ç½®</span>
</code></pre>
</blockquote>
<p>ç°åœ¨ï¼Œå°±æŒ‰æˆ‘è‡ªå·±çš„å–œå¥½åšå¦‚ä¸‹ä¸ªæ€§åŒ–é…ç½®å§ï¼ï¼ˆä¾‹å¦‚ï¼š<a href="https://jiyiqini.github.io/">æˆ‘çš„ä¸ªäººåšå®¢</a>ï¼‰</p>
<p><em>PS: æœ¬æ–‡æ˜¯åŸºäº Hexo+next è®²è§£çš„ã€‚</em></p>
<h1 id="æ–°å¢ç½‘ç«™å¤´ä¿¡æ¯ï¼ˆSiteï¼‰"><a href="#æ–°å¢ç½‘ç«™å¤´ä¿¡æ¯ï¼ˆSiteï¼‰" class="headerlink" title="æ–°å¢ç½‘ç«™å¤´ä¿¡æ¯ï¼ˆSiteï¼‰"></a>æ–°å¢ç½‘ç«™å¤´ä¿¡æ¯ï¼ˆSiteï¼‰</h1><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># ä½äº ../&lt;your_hexo_blog>/_config.yml#Siteï¼š</span>
<span class="token key atrule">title</span><span class="token punctuation">:</span> åšå®¢æ ‡é¢˜ã€‚ä¾‹å¦‚ï¼šâ€œæˆ‘çš„å­¦ä¹ ä¹‹æ—…â€
<span class="token key atrule">subtitle</span><span class="token punctuation">:</span> <span class="token string">'åšå®¢å‰¯æ ‡é¢˜ï¼Œç”¨äºç®€å•æè¿°ã€‚'</span>
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">'ä½œè€…ä¸ªäººæè¿°ï¼Œä¾‹å¦‚ä¸€ä¸ªåº§å³é“­ï¼šå¥½å¥½å­¦ä¹ ï¼Œå¤©å¤©å‘ä¸Šã€‚'</span>
<span class="token key atrule">keywords</span><span class="token punctuation">:</span> å…³é”®å­— <span class="token comment" spellcheck="true">#é»˜è®¤ä¸ºç©º</span>
<span class="token key atrule">author</span><span class="token punctuation">:</span> ä½œè€…åç§°
<span class="token key atrule">language</span><span class="token punctuation">:</span> åšå®¢è¯­è¨€ç±»å‹ã€‚<span class="token comment" spellcheck="true">#ä¾‹å¦‚ï¼šzh-CN</span>
<span class="token key atrule">timezone</span><span class="token punctuation">:</span> <span class="token string">'æ—¶åŒº'</span> <span class="token comment" spellcheck="true">#é»˜è®¤ä¸ºç©ºï¼Œè¡¨ç¤ºå½“å‰ç”¨æˆ·æ‰€åœ¨æ—¶åŒº</span>
</code></pre>
<h1 id="é…ç½®â€œå…³äº-x2F-åˆ†ç±»-x2F-æ ‡ç­¾-x2F-æœç´¢-x2F-404â€ç­‰å¸¸è§å…¥å£"><a href="#é…ç½®â€œå…³äº-x2F-åˆ†ç±»-x2F-æ ‡ç­¾-x2F-æœç´¢-x2F-404â€ç­‰å¸¸è§å…¥å£" class="headerlink" title="é…ç½®â€œå…³äº&#x2F;åˆ†ç±»&#x2F;æ ‡ç­¾&#x2F;æœç´¢&#x2F;404â€ç­‰å¸¸è§å…¥å£"></a>é…ç½®â€œå…³äº&#x2F;åˆ†ç±»&#x2F;æ ‡ç­¾&#x2F;æœç´¢&#x2F;404â€ç­‰å¸¸è§å…¥å£</h1><blockquote>
<p>åŸºæœ¬æ­¥éª¤ï¼š  </p>
<ol>
<li><code>hexo new page xxx</code> â€“&gt; ç¼–è¾‘å¯¹åº”çš„ <code>index.md</code> å†…å®¹  </li>
<li><code>../themes/theme-hexo-next/_config.yml$menu</code> ä¸­å¼€å¯ï¼š  <pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># ---------------------------------------------------------------</span>
<span class="token comment" spellcheck="true"># Menu Settings</span>
<span class="token comment" spellcheck="true"># ---------------------------------------------------------------</span>
<span class="token comment" spellcheck="true">#</span>
<span class="token comment" spellcheck="true"># Usage: `Key: /link/ || icon`</span>
<span class="token comment" spellcheck="true"># Key is the name of menu item. If the translation for this item is available, the translated text will be loaded, otherwise the Key name will be used. Key is case-senstive.</span>
<span class="token comment" spellcheck="true"># Value before `||` delimiter is the target link, value after `||` delimiter is the name of Font Awesome icon.</span>
<span class="token comment" spellcheck="true"># When running the site in a subdirectory (e.g. yoursite.com/blog), remove the leading slash from link value (/archives -> archives).</span>
<span class="token comment" spellcheck="true"># External url should start with http:// or https://</span>
<span class="token key atrule">menu</span><span class="token punctuation">:</span>
  <span class="token key atrule">home</span><span class="token punctuation">:</span> / <span class="token punctuation">|</span><span class="token punctuation">|</span> fa fa<span class="token punctuation">-</span>home
  <span class="token key atrule">about</span><span class="token punctuation">:</span> /about/ <span class="token punctuation">|</span><span class="token punctuation">|</span> fa fa<span class="token punctuation">-</span>user
  <span class="token key atrule">tags</span><span class="token punctuation">:</span> /tags/ <span class="token punctuation">|</span><span class="token punctuation">|</span> fa fa<span class="token punctuation">-</span>tags
  <span class="token key atrule">categories</span><span class="token punctuation">:</span> /categories/ <span class="token punctuation">|</span><span class="token punctuation">|</span> fa fa<span class="token punctuation">-</span>th
  <span class="token key atrule">archives</span><span class="token punctuation">:</span> /archives/ <span class="token punctuation">|</span><span class="token punctuation">|</span> fa fa<span class="token punctuation">-</span>archive
  <span class="token comment" spellcheck="true">#schedule: /schedule/ || fa fa-calendar</span>
  <span class="token comment" spellcheck="true">#sitemap: /sitemap.xml || fa fa-sitemap</span>
  <span class="token comment" spellcheck="true">#commonweal: /404/ || fa fa-heartbeat</span>
<span class="token comment" spellcheck="true">#</span>
<span class="token comment" spellcheck="true"># Enable / Disable menu icons / item badges.</span>
<span class="token key atrule">menu_settings</span><span class="token punctuation">:</span>
  <span class="token key atrule">icons</span><span class="token punctuation">:</span> <span class="token boolean important">true     </span><span class="token comment" spellcheck="true">#æ˜¯å¦å¯ç”¨å›¾æ ‡</span>
  <span class="token key atrule">badges</span><span class="token punctuation">:</span> <span class="token boolean important">true    </span><span class="token comment" spellcheck="true">#æ˜¯å¦æ˜¾ç¤ºè§’æ ‡æ•°ï¼ˆæ ç›®ä¸‹æ–‡ç« æ•°ç›®ï¼‰</span>
</code></pre>
</li>
</ol>
</blockquote>
<ul>
<li><p><strong>å…³äºï¼š</strong></p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># åˆ›å»º about</span>
$ hexo new page about

<span class="token comment" spellcheck="true"># ç¼–è¾‘å†…å®¹ï¼ˆ../source/about/index.mdï¼‰</span>
---
title: å…³äºä»‹ç»              <span class="token comment" spellcheck="true">#å½“å‰é¡µæ ‡é¢˜</span>
date: 2020-05-16 18:04:21   <span class="token comment" spellcheck="true">#å½“å‰æ–‡ä»¶åˆ›å»ºæ—¶é—´</span>
comments: <span class="token boolean">false</span>             <span class="token comment" spellcheck="true">#ç¦ç”¨è¯„è®º</span>
---
<span class="token punctuation">..</span>.æ›´å¤šè¯¦ç»†ä»‹ç»ï¼Œæ ¹æ®markdownè¯­æ³•ç¼–å†™å³å¯<span class="token punctuation">..</span>.
</code></pre>
</li>
<li><p><strong>åˆ†ç±»ï¼š</strong></p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># åˆ›å»º categories</span>
$ hexo new page categories

<span class="token comment" spellcheck="true"># ç¼–è¾‘å†…å®¹ï¼ˆ../source/categories/index.mdï¼‰</span>
---
title: æ–‡ç« åˆ†ç±»              <span class="token comment" spellcheck="true">#å½“å‰é¡µæ ‡é¢˜</span>
date: 2020-05-16 13:21:33   <span class="token comment" spellcheck="true">#å½“å‰æ–‡ä»¶åˆ›å»ºæ—¶é—´</span>
categories: Testing         <span class="token comment" spellcheck="true">#åˆ†ç±»å</span>
type: <span class="token string">"categories"</span>          <span class="token comment" spellcheck="true">#è®¾ç½®é¡µé¢ç±»å‹</span>
comments: <span class="token boolean">false</span>             <span class="token comment" spellcheck="true">#ç¦æ­¢è¯„è®º</span>
---
<span class="token punctuation">..</span>.æ›´å¤šè¯¦ç»†ä»‹ç»ï¼Œæ ¹æ®markdownè¯­æ³•ç¼–å†™å³å¯<span class="token punctuation">..</span>.
</code></pre>
</li>
<li><p><strong>æ ‡ç­¾ï¼š</strong></p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># åˆ›å»º tags</span>
$ hexo new page tags

<span class="token comment" spellcheck="true"># ç¼–è¾‘å†…å®¹ï¼ˆ../source/tags/index.mdï¼‰</span>
---
title: æ–‡ç« åˆ†ç±»              <span class="token comment" spellcheck="true">#å½“å‰é¡µæ ‡é¢˜</span>
date: 2020-05-16 13:21:07   <span class="token comment" spellcheck="true">#å½“å‰æ–‡ä»¶åˆ›å»ºæ—¶é—´</span>
type: <span class="token string">"tags"</span>                <span class="token comment" spellcheck="true">#è®¾ç½®é¡µé¢ç±»å‹</span>
comments: <span class="token boolean">false</span>             <span class="token comment" spellcheck="true">#ç¦æ­¢è¯„è®º</span>
---
<span class="token punctuation">..</span>.æ›´å¤šè¯¦ç»†ä»‹ç»ï¼Œæ ¹æ®markdownè¯­æ³•ç¼–å†™å³å¯<span class="token punctuation">..</span>.
</code></pre>
</li>
<li><p><strong>404ï¼š</strong></p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># åˆ›å»º 404</span>
$ hexo new page 404

<span class="token comment" spellcheck="true"># ç¼–è¾‘å†…å®¹ï¼ˆ../source/404/index.mdï¼‰</span>
---
title: 404                  <span class="token comment" spellcheck="true">#404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º</span>
date: 2020-05-16 14:11:34   <span class="token comment" spellcheck="true">#å½“å‰æ–‡ä»¶åˆ›å»ºæ—¶é—´</span>
comments: <span class="token boolean">false</span>             <span class="token comment" spellcheck="true">#ç¦æ­¢è¯„è®º</span>
permalink: /404
type: <span class="token string">"404"</span>
layout: <span class="token string">"404"</span>
---
<span class="token punctuation">..</span>.æ›´å¤šè¯¦ç»†ä»‹ç»ï¼Œæ ¹æ®markdownè¯­æ³•ç¼–å†™å³å¯<span class="token punctuation">..</span>.
</code></pre>
</li>
<li><p><strong>æœç´¢ï¼š</strong></p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># hexo ç«™ç‚¹ç›®å½•ä¸‹æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼š</span>
$ <span class="token function">npm</span> <span class="token function">install</span> hexo-generator-searchdb

<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># ç¼–è¾‘globalé…ç½®ï¼ˆ../&lt;your_hexo_blog>/_config.yml#searchï¼‰</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># Search</span>
search:
  path: search.xml    <span class="token comment" spellcheck="true">#ç´¢å¼•æ–‡ä»¶çš„è·¯å¾„ï¼Œç›¸å¯¹äºç«™ç‚¹æ ¹ç›®å½•</span>
  field: post         <span class="token comment" spellcheck="true">#æœç´¢èŒƒå›´ï¼Œé»˜è®¤æ˜¯ postï¼Œè¿˜å¯ä»¥é€‰æ‹© pageã€allï¼Œè®¾ç½®æˆ all è¡¨ç¤ºæœç´¢æ‰€æœ‰é¡µé¢</span>
  content: <span class="token boolean">true</span>
  format: html
  limit: 10000        <span class="token comment" spellcheck="true">#é™åˆ¶æœç´¢çš„æ¡ç›®æ•°</span>
</code></pre>
</li>
</ul>
<h1 id="é…ç½®å­—ä½“"><a href="#é…ç½®å­—ä½“" class="headerlink" title="é…ç½®å­—ä½“"></a>é…ç½®å­—ä½“</h1><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># ç¼–è¾‘globalé…ç½®ï¼ˆ../&lt;your_hexo_blog>/_config.yml#Font-Settingsï¼‰ï¼Œè‹¥æ²¡æœ‰åˆ™æ·»åŠ ã€‚</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>

<span class="token comment" spellcheck="true"># Font-Settings</span>
<span class="token key atrule">font</span><span class="token punctuation">:</span>
  <span class="token comment" spellcheck="true"># Use custom fonts families or not.</span>
  <span class="token comment" spellcheck="true"># Depended options: `external` and `family`.</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

  <span class="token comment" spellcheck="true"># Uri of fonts host, e.g. //fonts.googleapis.com (Default).</span>
  <span class="token key atrule">host</span><span class="token punctuation">:</span>

  <span class="token comment" spellcheck="true"># Font options:</span>
  <span class="token comment" spellcheck="true"># `external: true` will load this font family from `host` above.</span>
  <span class="token comment" spellcheck="true"># `family: Times New Roman`. Without any quotes.</span>
  <span class="token comment" spellcheck="true"># `size: x.x`. Use `em` as unit. Default: 1 (16px)</span>

  <span class="token comment" spellcheck="true"># Global font settings used for all elements inside &lt;body>.</span>
  <span class="token key atrule">global</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">family</span><span class="token punctuation">:</span> 
    <span class="token key atrule">size</span><span class="token punctuation">:</span>

  <span class="token comment" spellcheck="true"># Font settings for site title (.site-title).</span>
  <span class="token key atrule">title</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">family</span><span class="token punctuation">:</span>
    <span class="token key atrule">size</span><span class="token punctuation">:</span> 

  <span class="token comment" spellcheck="true"># Font settings for headlines (&lt;h1> to &lt;h6>).</span>
  <span class="token key atrule">headings</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">family</span><span class="token punctuation">:</span> Roboto Slab
    <span class="token key atrule">size</span><span class="token punctuation">:</span> 

  <span class="token comment" spellcheck="true"># Font settings for posts (.post-body).</span>
  <span class="token key atrule">posts</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">family</span><span class="token punctuation">:</span>

  <span class="token comment" spellcheck="true"># Font settings for &lt;code> and code blocks.</span>
  <span class="token key atrule">codes</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">family</span><span class="token punctuation">:</span>
    
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># ç¼–è¾‘themeé…ç½®ï¼ˆ../themes/theme-hexo-next/_config.yml#fontï¼‰ï¼Œé»˜è®¤åœ¨</span>
<span class="token comment" spellcheck="true"># nextä¸»é¢˜é…ç½®ä¸­ä¹Ÿæœ‰Font Settingsã€‚</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># ---------------------------------------------------------------</span>
<span class="token comment" spellcheck="true"># Font Settings</span>
<span class="token comment" spellcheck="true"># See: https://theme-next.org/docs/theme-settings/#Fonts-Customization</span>
<span class="token comment" spellcheck="true"># ---------------------------------------------------------------</span>
<span class="token comment" spellcheck="true"># Find fonts on Google Fonts (https://www.google.com/fonts)</span>
<span class="token comment" spellcheck="true"># All fonts set here will have the following styles:</span>
<span class="token comment" spellcheck="true">#   light | light italic | normal | normal italic | bold | bold italic</span>
<span class="token comment" spellcheck="true"># Be aware that setting too much fonts will cause site running slowly</span>
<span class="token comment" spellcheck="true"># ---------------------------------------------------------------</span>
<span class="token comment" spellcheck="true"># To avoid space between header and sidebar in scheme Pisces / Gemini, Web Safe fonts are recommended for `global` (and `title`):</span>
<span class="token comment" spellcheck="true"># Arial | Tahoma | Helvetica | Times New Roman | Courier New | Verdana | Georgia | Palatino | Garamond | Comic Sans MS | Trebuchet MS</span>
<span class="token comment" spellcheck="true"># ---------------------------------------------------------------</span>

<span class="token key atrule">font</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

  <span class="token comment" spellcheck="true"># Uri of fonts host, e.g. https://fonts.googleapis.com (Default).</span>
  <span class="token key atrule">host</span><span class="token punctuation">:</span>

  <span class="token comment" spellcheck="true"># Font options:</span>
  <span class="token comment" spellcheck="true"># `external: true` will load this font family from `host` above.</span>
  <span class="token comment" spellcheck="true"># `family: Times New Roman`. Without any quotes.</span>
  <span class="token comment" spellcheck="true"># `size: x.x`. Use `em` as unit. Default: 1 (16px)</span>

  <span class="token comment" spellcheck="true"># Global font settings used for all elements inside &lt;body>.</span>
  <span class="token key atrule">global</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">family</span><span class="token punctuation">:</span> Lato
    <span class="token key atrule">size</span><span class="token punctuation">:</span>

  <span class="token comment" spellcheck="true"># Font settings for site title (.site-title).</span>
  <span class="token key atrule">title</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">family</span><span class="token punctuation">:</span>
    <span class="token key atrule">size</span><span class="token punctuation">:</span>

  <span class="token comment" spellcheck="true"># Font settings for headlines (&lt;h1> to &lt;h6>).</span>
  <span class="token key atrule">headings</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">family</span><span class="token punctuation">:</span>
    <span class="token key atrule">size</span><span class="token punctuation">:</span>

  <span class="token comment" spellcheck="true"># Font settings for posts (.post-body).</span>
  <span class="token key atrule">posts</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">family</span><span class="token punctuation">:</span>

  <span class="token comment" spellcheck="true"># Font settings for &lt;code> and code blocks.</span>
  <span class="token key atrule">codes</span><span class="token punctuation">:</span>
    <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">family</span><span class="token punctuation">:</span>
</code></pre>
<h1 id="é…ç½®ä¸ªäººä¿¡æ¯æ ï¼ˆå¤´åƒã€å†…è”é“¾æ¥ã€å‹æƒ…é“¾æ¥ç­‰ï¼‰"><a href="#é…ç½®ä¸ªäººä¿¡æ¯æ ï¼ˆå¤´åƒã€å†…è”é“¾æ¥ã€å‹æƒ…é“¾æ¥ç­‰ï¼‰" class="headerlink" title="é…ç½®ä¸ªäººä¿¡æ¯æ ï¼ˆå¤´åƒã€å†…è”é“¾æ¥ã€å‹æƒ…é“¾æ¥ç­‰ï¼‰"></a>é…ç½®ä¸ªäººä¿¡æ¯æ ï¼ˆå¤´åƒã€å†…è”é“¾æ¥ã€å‹æƒ…é“¾æ¥ç­‰ï¼‰</h1><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 1.å¤´åƒã€‚ç¼–è¾‘themeé…ç½®ï¼ˆ../themes/hexo-theme-next/_config.yml#avatarï¼‰</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># Sidebar Avatar</span>
<span class="token key atrule">avatar</span><span class="token punctuation">:</span>
  <span class="token key atrule">url</span><span class="token punctuation">:</span> /images/avatar.jpg   <span class="token comment" spellcheck="true">#å°†ä¸ªäººå¤´åƒå›¾ç‰‡æ”¾åœ¨ ../themes/hexo-theme-next/source/images/ ä¸‹ã€‚ä¾‹å¦‚ï¼šavatar.jpg</span>
  <span class="token key atrule">rounded</span><span class="token punctuation">:</span> <span class="token boolean important">true             </span><span class="token comment" spellcheck="true">#å¤´åƒæ˜¯å¦æ˜¾ç¤ºä¸ºåœ†å›¾</span>
  <span class="token key atrule">rotated</span><span class="token punctuation">:</span> <span class="token boolean important">true             </span><span class="token comment" spellcheck="true">#é¼ æ ‡æ‚¬æµ®åœ¨å¤´åƒä¸Šï¼Œæ˜¯å¦å¯ç”¨å¤´åƒæ—‹è½¬çš„ç‰¹æ•ˆ</span>

<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 2.ç¤¾äº¤é“¾æ¥ã€‚ç¼–è¾‘themeé…ç½®ï¼ˆ../themes/hexo-theme-next/_config.yml#socialï¼‰</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># Usage: `Key: permalink || icon`</span>
<span class="token comment" spellcheck="true"># Key is the link label showing to end users.</span>
<span class="token comment" spellcheck="true"># Value before `||` delimiter is the target permalink, value after `||` delimiter is the name of Font Awesome icon.</span>
<span class="token key atrule">social</span><span class="token punctuation">:</span>
  <span class="token key atrule">GitHub</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/jiyiqini <span class="token punctuation">|</span><span class="token punctuation">|</span> fab fa<span class="token punctuation">-</span>github  <span class="token comment" spellcheck="true">#Githubï¼Œå¡«å†™ä¸ªäººgithubä¸»é¡µåœ°å€</span>
  <span class="token key atrule">E-Mail</span><span class="token punctuation">:</span> mailto<span class="token punctuation">:</span>sh1426574360@163.com <span class="token punctuation">|</span><span class="token punctuation">|</span> fa fa<span class="token punctuation">-</span>envelop  <span class="token comment" spellcheck="true">#E-Mailï¼Œå¡«å†™ä¸ªäººé‚®ç®±åœ°å€</span>
  <span class="token comment" spellcheck="true">#Weibo: https://weibo.com/2949425821 || fab fa-weibo</span>
  <span class="token comment" spellcheck="true">#Google: https://plus.google.com/yourname || fab fa-google</span>
  <span class="token comment" spellcheck="true">#Twitter: https://twitter.com/yourname || fab fa-twitter</span>
  <span class="token comment" spellcheck="true">#FB Page: https://www.facebook.com/yourname || fab fa-facebook</span>
  <span class="token comment" spellcheck="true">#StackOverflow: https://stackoverflow.com/yourname || fab fa-stack-overflow</span>
  <span class="token comment" spellcheck="true">#YouTube: https://youtube.com/yourname || fab fa-youtube</span>
  <span class="token comment" spellcheck="true">#Instagram: https://instagram.com/yourname || fab fa-instagram</span>
  <span class="token comment" spellcheck="true">#Skype: skype:yourname?call|chat || fab fa-skype</span>

<span class="token key atrule">social_icons</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true          </span><span class="token comment" spellcheck="true">#æ˜¯å¦å¼€å¯ç¤¾äº¤é“¾æ¥icon</span>
  <span class="token key atrule">icons_only</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">transition</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 3.å‹æƒ…é“¾æ¥ã€‚ç¼–è¾‘themeé…ç½®ï¼ˆ../themes/hexo-theme-next/_config.yml#links_settingsï¼‰</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token key atrule">links_settings</span><span class="token punctuation">:</span>
  <span class="token key atrule">icon</span><span class="token punctuation">:</span> fa fa<span class="token punctuation">-</span>link
  <span class="token key atrule">title</span><span class="token punctuation">:</span> å‹æƒ…é“¾æ¥
  <span class="token comment" spellcheck="true"># Available values: block | inline</span>
  <span class="token key atrule">layout</span><span class="token punctuation">:</span> inline    <span class="token comment" spellcheck="true">#å‹æƒ…é“¾æ¥æ’ç‰ˆï¼ˆblockç«–æ’åˆ— inlineæ¨ªæ’åˆ—ï¼‰</span>
<span class="token key atrule">links</span><span class="token punctuation">:</span>
    <span class="token key atrule">ç®€ä¹¦</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//www.jianshu.com/u/xxxx    <span class="token comment" spellcheck="true">#ç®€ä¹¦åšå®¢</span>
    <span class="token key atrule">æ˜é‡‘</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//juejin.im/user/xxx        <span class="token comment" spellcheck="true">#æ˜é‡‘åšå®¢</span>
    <span class="token key atrule">æ›´å¤šå…¶å®ƒ</span><span class="token punctuation">:</span> å…¶å®ƒé“¾æ¥åœ°å€<span class="token punctuation">...</span>
</code></pre>
<h1 id="é…ç½®GitHubè§’æ ‡"><a href="#é…ç½®GitHubè§’æ ‡" class="headerlink" title="é…ç½®GitHubè§’æ ‡"></a>é…ç½®GitHubè§’æ ‡</h1><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># GitHubé“¾æ¥ä¸»é¡µã€‚ç¼–è¾‘themeé…ç½®ï¼ˆ../themes/hexo-theme-next/_config.yml#github_bannerï¼‰</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># `Follow me on GitHub` banner in the top-right corner.</span>
<span class="token key atrule">github_banner</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true                              </span><span class="token comment" spellcheck="true">#æ˜¯å¦å¯åŠ¨å³ä¸Šè§’çš„github-bannerï¼Œé»˜è®¤å…³é—­</span>
  <span class="token key atrule">permalink</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//github.com/jiyiqini    <span class="token comment" spellcheck="true">#ä½ çš„githubä¸»é¡µåœ°å€</span>
  <span class="token key atrule">title</span><span class="token punctuation">:</span> å°ä¸»ï¼Œå…³æ³¨æˆ‘å§~                       <span class="token comment" spellcheck="true">#å½“é¼ æ ‡æ”¾åœ¨è¯¥bannerä¸Šï¼Œæç¤ºçš„æ–‡æœ¬ã€‚</span>
</code></pre>
<h1 id="é…ç½®back2topä¸é˜…è¯»è¿›åº¦"><a href="#é…ç½®back2topä¸é˜…è¯»è¿›åº¦" class="headerlink" title="é…ç½®back2topä¸é˜…è¯»è¿›åº¦"></a>é…ç½®back2topä¸é˜…è¯»è¿›åº¦</h1><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 1.å›åˆ°é¡¶éƒ¨ã€‚ç¼–è¾‘themeé…ç½®ï¼ˆ../themes/hexo-theme-next/_config.yml#back2topï¼‰</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token key atrule">back2top</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true          </span><span class="token comment" spellcheck="true">#æ˜¯å¦å¼€å¯å›åˆ°é¡¶éƒ¨åŠŸèƒ½</span>
  <span class="token key atrule">sidebar</span><span class="token punctuation">:</span> <span class="token boolean important">false        </span><span class="token comment" spellcheck="true">#æ˜¯å¦æ˜¾ç¤ºåœ¨ä¾§è¾¹ã€‚é€‰æ‹©falseå§ï¼Œè®©å®ƒå•ç‹¬åœ¨å¦å¤–ä¸€ä¾§å¥½çœ‹äº›ï½</span>
  <span class="token key atrule">scrollpercent</span><span class="token punctuation">:</span> <span class="token boolean important">true   </span><span class="token comment" spellcheck="true">#æ»šåŠ¨è¿›åº¦ç™¾åˆ†æ¯”æ˜¯å¦æ˜¾ç¤ºåœ¨â€œå›åˆ°é¡¶éƒ¨æŒ‰é’®â€çš„æ–‡æœ¬ä¸­</span>
  
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 2.é˜…è¯»è¿›åº¦ã€‚ç¼–è¾‘themeé…ç½®ï¼ˆ../themes/hexo-theme-next/_config.yml#back2topï¼‰</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token key atrule">reading_progress</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true          </span><span class="token comment" spellcheck="true">#æ˜¯å¦å¼€å¯é˜…è¯»è¿›åº¦</span>
  <span class="token key atrule">position</span><span class="token punctuation">:</span> top         <span class="token comment" spellcheck="true">#é˜…è¯»è¿›åº¦æ¡çš„ä½ç½®ï¼štop | bottom</span>
  <span class="token key atrule">color</span><span class="token punctuation">:</span> "<span class="token comment" spellcheck="true">#37c6c0"      #è‡ªå®šä¹‰è¿›åº¦æ¡é¢œè‰²</span>
  <span class="token key atrule">height</span><span class="token punctuation">:</span> 3px           <span class="token comment" spellcheck="true">#è‡ªå®šä¹‰è¿›åº¦æ¡é«˜åº¦</span>
</code></pre>
<h1 id="é…ç½®code-style"><a href="#é…ç½®code-style" class="headerlink" title="é…ç½®code-style"></a>é…ç½®code-style</h1><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># æ’å…¥ä»£ç é…ç½®ã€‚ç¼–è¾‘themeé…ç½®ï¼ˆ../themes/hexo-theme-next/_config.yml#codeblockï¼‰</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token key atrule">codeblock</span><span class="token punctuation">:</span>
  <span class="token comment" spellcheck="true"># Code Highlight theme</span>
  <span class="token comment" spellcheck="true"># Available values: normal | night | night eighties | night blue | night bright | solarized | solarized dark | galactic</span>
  <span class="token comment" spellcheck="true"># See: https://github.com/chriskempson/tomorrow-theme</span>
  <span class="token key atrule">highlight_theme</span><span class="token punctuation">:</span> normal
  <span class="token comment" spellcheck="true"># Add copy button on codeblock</span>
  <span class="token key atrule">copy_button</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true        </span><span class="token comment" spellcheck="true">#æ˜¯å¦å¼€å¯å¤åˆ¶ä»£ç åŠŸèƒ½</span>
    <span class="token key atrule">show_result</span><span class="token punctuation">:</span> <span class="token boolean important">true   </span><span class="token comment" spellcheck="true">#æ˜¯å¦æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º</span>
    <span class="token key atrule">style</span><span class="token punctuation">:</span> mac          <span class="token comment" spellcheck="true">#ä»£ç æ˜¾ç¤ºæ ·å¼ï¼Œå¯é€‰ï¼šdefault | flat | mac</span>
</code></pre>
<h1 id="é…ç½®footer"><a href="#é…ç½®footer" class="headerlink" title="é…ç½®footer"></a>é…ç½®footer</h1><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># é˜…è¯»è¿›åº¦ã€‚ç¼–è¾‘themeé…ç½®ï¼ˆ../themes/hexo-theme-next/_config.yml#footerï¼‰</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token key atrule">footer</span><span class="token punctuation">:</span>
  <span class="token key atrule">since</span><span class="token punctuation">:</span> <span class="token number">2020   </span><span class="token comment" spellcheck="true">#å»ºç«‹åšå®¢çš„å¹´ä»½ã€‚è‹¥æœªå¡«å†™ï¼Œåˆ™é»˜è®¤ä¸ºå½“å‰å¹´ä»½ã€‚ä¾‹å¦‚ï¼šæˆ‘æ˜¯2020å¹´æ­å»ºçš„åšå®¢ï¼Œæ•…å†™2020</span>
  <span class="token key atrule">counter</span><span class="token punctuation">:</span> <span class="token boolean important">true </span><span class="token comment" spellcheck="true">#æ˜¯å¦å¼€å¯æ¸¸å®¢è®¿é—®å†å²è®°å½•</span>

  <span class="token comment" spellcheck="true"># Icon between year and copyright info.</span>
  <span class="token key atrule">icon</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> fa fa<span class="token punctuation">-</span>heart   <span class="token comment" spellcheck="true"># Icon name in Font Awesome. See: https://fontawesome.com/icons</span>
    <span class="token key atrule">animated</span><span class="token punctuation">:</span> <span class="token boolean important">false     </span><span class="token comment" spellcheck="true"># If you want to animate the icon, set it to true.</span>
    <span class="token key atrule">color</span><span class="token punctuation">:</span> "<span class="token comment" spellcheck="true">#ff0000"    # Change the color of icon, using Hex Code.</span>

  <span class="token comment" spellcheck="true"># If not defined, `author` from Hexo `_config.yml` will be used.</span>
  <span class="token key atrule">copyright</span><span class="token punctuation">:</span> 

  <span class="token comment" spellcheck="true"># Powered by Hexo &amp; NexT</span>
  <span class="token key atrule">powered</span><span class="token punctuation">:</span> <span class="token boolean important">true </span><span class="token comment" spellcheck="true">#ä¾‹å¦‚ï¼šâ€œç”± Hexo &amp; NexT.Gemini å¼ºåŠ›é©±åŠ¨â€</span>

  <span class="token comment" spellcheck="true"># Beian ICP and gongan information for Chinese users. See: http://www.beian.miit.gov.cn, http://www.beian.gov.cn</span>
  <span class="token key atrule">beian</span><span class="token punctuation">:</span>
    <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
    <span class="token key atrule">icp</span><span class="token punctuation">:</span>
    <span class="token key atrule">gongan_id</span><span class="token punctuation">:</span>          <span class="token comment" spellcheck="true"># The digit in the num of gongan beian.</span>
    <span class="token key atrule">gongan_num</span><span class="token punctuation">:</span>         <span class="token comment" spellcheck="true"># The full num of gongan beian.</span>
    <span class="token key atrule">gongan_icon_url</span><span class="token punctuation">:</span>    <span class="token comment" spellcheck="true"># The icon for gongan beian. See: http://www.beian.gov.cn/portal/download</span>
</code></pre>
<h1 id="é…ç½®å­—æ•°ç»Ÿè®¡ä¸é¢„è§ˆæ—¶é—´"><a href="#é…ç½®å­—æ•°ç»Ÿè®¡ä¸é¢„è§ˆæ—¶é—´" class="headerlink" title="é…ç½®å­—æ•°ç»Ÿè®¡ä¸é¢„è§ˆæ—¶é—´"></a>é…ç½®å­—æ•°ç»Ÿè®¡ä¸é¢„è§ˆæ—¶é—´</h1><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 1.å½“å‰åšå®¢ç«™ç‚¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå®‰è£…å‘½ä»¤ï¼š</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
$ npm i <span class="token punctuation">-</span><span class="token punctuation">-</span>save hexo<span class="token punctuation">-</span>wordcount

<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 2.é˜…è¯»è¿›åº¦ã€‚ç¼–è¾‘themeé…ç½®ï¼ˆ../themes/hexo-theme-next/_config.yml#post_wordcountï¼‰</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># ---------------------------------------------------------------</span>
<span class="token comment" spellcheck="true"># Post wordcount display settings</span>
<span class="token comment" spellcheck="true"># Dependencies: https://github.com/willin/hexo-wordcount</span>
<span class="token comment" spellcheck="true"># ---------------------------------------------------------------</span>
<span class="token key atrule">post_wordcount</span><span class="token punctuation">:</span>
  <span class="token key atrule">item_text</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">wordcount</span><span class="token punctuation">:</span> <span class="token boolean important">true       </span><span class="token comment" spellcheck="true">#å­—æ•°ç»Ÿè®¡</span>
  <span class="token key atrule">min2read</span><span class="token punctuation">:</span> <span class="token boolean important">true        </span><span class="token comment" spellcheck="true">#é¢„è§ˆæ—¶é—´</span>
  <span class="token key atrule">totalcount</span><span class="token punctuation">:</span> <span class="token boolean important">true      </span><span class="token comment" spellcheck="true">#æ€»å­—æ•°,æ˜¾ç¤ºåœ¨é¡µé¢åº•éƒ¨</span>
  <span class="token key atrule">separated_meta</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 3.é…ç½®æ˜¾ç¤ºæ ·å¼ã€‚ç¼–è¾‘post.swigé…ç½®ï¼ˆ../themes/hexo-theme-next/layout/_macro/post.swigï¼‰</span>
<span class="token comment" spellcheck="true"># åœ¨åˆé€‚çš„ä½ç½®æ’å…¥å¸ƒå±€ä»£ç ï¼Œä¾‹å¦‚åœ¨categoriesä¹‹åå’ŒLeanCloudä¹‹å‰ï¼Œå¦æ¢ä¸€è¡Œæ˜¾ç¤ºï¼š</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token punctuation">...</span>
<span class="token punctuation">{</span><span class="token comment" spellcheck="true"># å­—æ•°é˜…è¯»ç»Ÿè®¡åŠŸèƒ½ #}</span>
<span class="token punctuation">{</span>%<span class="token punctuation">-</span> if theme.post_wordcount.item_text %<span class="token punctuation">}</span>
&lt;div<span class="token punctuation">></span>
  &lt;span title="<span class="token punctuation">{</span><span class="token punctuation">{</span> __('post.wordcount') <span class="token punctuation">}</span><span class="token punctuation">}</span>"<span class="token punctuation">></span>æœ¬æ–‡çº¦ <span class="token punctuation">{</span><span class="token punctuation">{</span> wordcount(post.content)<span class="token punctuation">}</span><span class="token punctuation">}</span> å­—ï¼Œ&lt;/span<span class="token punctuation">></span>
  &lt;span title="<span class="token punctuation">{</span><span class="token punctuation">{</span> __('post.min2read') <span class="token punctuation">}</span><span class="token punctuation">}</span>"<span class="token punctuation">></span>é˜…è¯»å¤§æ¦‚ <span class="token punctuation">{</span><span class="token punctuation">{</span> min2read(post.content)<span class="token punctuation">}</span><span class="token punctuation">}</span> åˆ†é’Ÿ&lt;/span<span class="token punctuation">></span>
&lt;/div<span class="token punctuation">></span>
<span class="token punctuation">{</span>% endif %<span class="token punctuation">}</span>
<span class="token punctuation">...</span>
</code></pre>
<h1 id="æ·»åŠ æ–‡æœ«ç»“æŸæ ‡è¯­ï¼ˆpassage-end-tagï¼‰"><a href="#æ·»åŠ æ–‡æœ«ç»“æŸæ ‡è¯­ï¼ˆpassage-end-tagï¼‰" class="headerlink" title="æ·»åŠ æ–‡æœ«ç»“æŸæ ‡è¯­ï¼ˆpassage-end-tagï¼‰"></a>æ·»åŠ æ–‡æœ«ç»“æŸæ ‡è¯­ï¼ˆpassage-end-tagï¼‰</h1><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 1. åœ¨ ../themes/next/layout/_macro/ ä¸‹æ–°å»º passage-end-tag.swigã€‚</span>
<span class="token comment" spellcheck="true"># å¡«å……å†…å®¹å¦‚ä¸‹ï¼š</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
&lt;div<span class="token punctuation">></span>
    <span class="token punctuation">{</span>% if not is_index %<span class="token punctuation">}</span>
        &lt;div style="text<span class="token punctuation">-</span>align<span class="token punctuation">:</span>center;color<span class="token punctuation">:</span><span class="token comment" spellcheck="true">#ccc;font-size:14px;"></span>
        <span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span> æœ¬æ–‡ç»“æŸ<span class="token important">&amp;nbsp</span>;&lt;i class="fa fa<span class="token punctuation">-</span>paw"<span class="token punctuation">></span>&lt;/i<span class="token punctuation">></span><span class="token important">&amp;nbsp</span>;æ„Ÿè°¢é˜…è¯» <span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span>
        &lt;/div<span class="token punctuation">></span>
    <span class="token punctuation">{</span>% endif %<span class="token punctuation">}</span>
&lt;/div<span class="token punctuation">></span>

<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 2. æ‰“å¼€ ../themes/next/layout/_macro/post.swig æ–‡ä»¶ï¼Œåœ¨ post-bodyï¼ˆå³ï¼šEND POST BODYï¼‰ä¹‹åï¼Œæ·»åŠ å¦‚ä¸‹:</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token punctuation">{</span><span class="token comment" spellcheck="true"># æ–‡æœ«éƒ¨åˆ†ï¼Œå³ END POST BODY ä¹‹å#}</span>
<span class="token punctuation">{</span>%<span class="token punctuation">-</span> if not is_index %<span class="token punctuation">}</span>
  <span class="token punctuation">...</span>
  <span class="token punctuation">{</span><span class="token comment" spellcheck="true">#æ¯ç¯‡æ–‡ç« æœ«å°¾ç»Ÿä¸€æ·»åŠ â€œæœ¬æ–‡ç»“æŸâ€æ ‡è®°#}</span>
  <span class="token punctuation">{</span>% if theme.passage_end_tag.enable %<span class="token punctuation">}</span>
    <span class="token punctuation">{</span>% include 'passage<span class="token punctuation">-</span>end<span class="token punctuation">-</span>tag.swig' %<span class="token punctuation">}</span>
  <span class="token punctuation">{</span>% endif %<span class="token punctuation">}</span>
  <span class="token punctuation">...</span>
<span class="token punctuation">{</span>% endif %<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 3. åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸‹æ·»åŠ é…ç½®ï¼Œåœ¨ ../themes/next/_config.yml æ–‡ä»¶ä¸­æ·»åŠ å¼€å…³ï¼š</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># æ–‡ç« æœ«å°¾æ·»åŠ â€œæœ¬æ–‡ç»“æŸâ€æ ‡è®°</span>
<span class="token key atrule">passage_end_tag</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre>
<h1 id="æ·»åŠ è¯„è®ºåŠŸèƒ½ï¼ˆValineï¼‰"><a href="#æ·»åŠ è¯„è®ºåŠŸèƒ½ï¼ˆValineï¼‰" class="headerlink" title="æ·»åŠ è¯„è®ºåŠŸèƒ½ï¼ˆValineï¼‰"></a>æ·»åŠ è¯„è®ºåŠŸèƒ½ï¼ˆValineï¼‰</h1><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 1.æ³¨å†ŒLeanCloudï¼Œè·å–AppIdå’ŒAppKeyã€‚</span>
<span class="token comment" spellcheck="true"># åœ¨åˆé€‚çš„ä½ç½®æ’å…¥å¸ƒå±€ä»£ç ï¼Œä¾‹å¦‚åœ¨categoriesä¹‹åå’ŒLeanCloudä¹‹å‰ï¼Œå¦æ¢ä¸€è¡Œæ˜¾ç¤ºï¼š</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
1. æ³¨å†ŒLeanCloudè´¦æˆ·ã€‚
2. å®ååˆ¶ï¼ˆå§“åã€æ‰‹æœºå·ã€èº«ä»½è¯å·ï¼‰
3. åˆ›å»ºåº”ç”¨ï¼Œéšä¾¿å–ä¸ªåº”ç”¨åã€‚ä¾‹å¦‚ï¼šJiyiqini<span class="token punctuation">-</span>Hexo<span class="token punctuation">-</span>Blogs
4. å®ååˆ¶å’Œåˆ›å»ºåº”ç”¨æˆåŠŸåï¼Œä¼šå¾—åˆ°åˆ†é…çš„AppIdå’ŒAppKeyã€‚ç„¶åè¿›è¡Œä¸‹é¢ä¸€æ­¥ï½

<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 2.é…ç½®Valineã€‚ç¼–è¾‘themeé…ç½®ï¼ˆ../themes/hexo-theme-next/_config.yml#valineï¼‰</span>
<span class="token comment" spellcheck="true"># åœ¨åˆé€‚çš„ä½ç½®æ’å…¥å¸ƒå±€ä»£ç ï¼Œä¾‹å¦‚åœ¨categoriesä¹‹åå’ŒLeanCloudä¹‹å‰ï¼Œå¦æ¢ä¸€è¡Œæ˜¾ç¤ºï¼š</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># Valineè¯„è®ºç³»ç»Ÿ</span>
<span class="token comment" spellcheck="true"># See: https://leancloud.cn/dashboard/applist.html#/apps</span>
<span class="token comment" spellcheck="true"># For more information: https://valine.js.org, https://github.com/xCss/Valine</span>
<span class="token key atrule">valine</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">appid</span><span class="token punctuation">:</span> xxxx<span class="token punctuation">-</span>xxxx      <span class="token comment" spellcheck="true">#åœ¨LeanCloudåº”ç”¨æ³¨å†Œè·å–AppId</span>
  <span class="token key atrule">appkey</span><span class="token punctuation">:</span> yyyy<span class="token punctuation">-</span>yyyy     <span class="token comment" spellcheck="true">#åœ¨LeanCloudåº”ç”¨æ³¨å†Œè·å–AppKey</span>
  <span class="token key atrule">notify</span><span class="token punctuation">:</span> <span class="token boolean important">true          </span><span class="token comment" spellcheck="true">#æ˜¯å¦å¯ç”¨é‚®ä»¶é€šçŸ¥</span>
  <span class="token key atrule">verify</span><span class="token punctuation">:</span> <span class="token boolean important">false         </span><span class="token comment" spellcheck="true">#æ˜¯å¦å¯ç”¨éªŒè¯ç </span>
  <span class="token key atrule">placeholder</span><span class="token punctuation">:</span> å‘è¡¨è¯„è®ºæˆ–å»ºè®® <span class="token comment" spellcheck="true">#é»˜è®¤è¯„è®ºåŒºhint("Just go go")</span>
  <span class="token key atrule">avatar</span><span class="token punctuation">:</span> monsterid     <span class="token comment" spellcheck="true"># Gravatar style.å¤´åƒé£æ ¼ï¼Œé»˜è®¤ä¸ºmmï¼Œå¯è¿›å…¥ç½‘å€ï¼šhttps://valine.js.org/visitor.htmlæŸ¥çœ‹å¤´åƒè®¾ç½®ï¼Œè¿™é‡Œæœ‰è®¸å¤šå¤´åƒé£æ ¼ï¼Œè¿›è¡Œè®¾ç½®</span>
  <span class="token key atrule">guest_info</span><span class="token punctuation">:</span> nick<span class="token punctuation">,</span>mail<span class="token punctuation">,</span>link <span class="token comment" spellcheck="true"># è‡ªå®šä¹‰è¯„è®ºæ¡†å¤´éƒ¨ï¼ˆCustom comment headerï¼‰</span>
  <span class="token key atrule">pageSize</span><span class="token punctuation">:</span> <span class="token number">10          </span><span class="token comment" spellcheck="true">#åˆ†é¡µå¤§å°é˜ˆå€¼ï¼Œä¾‹å¦‚ï¼šè¾¾åˆ°10æ¡è¯„è®ºååˆ†é¡µ</span>
  <span class="token key atrule">language</span><span class="token punctuation">:</span> zh<span class="token punctuation">-</span>cn       <span class="token comment" spellcheck="true">#è¯­è¨€ï¼Œå¯é€‰: en, zh-cn</span>
  <span class="token key atrule">visitor</span><span class="token punctuation">:</span> <span class="token boolean important">false        </span><span class="token comment" spellcheck="true">#Article reading statistic.æ˜¯å¦å…è®¸æ¸¸å®¢è¯„è®ºï¼Œè¿›å…¥å®˜ç½‘æŸ¥çœ‹è®¾ç½®ï¼šhttps://valine.js.org/visitor.html</span>
  <span class="token key atrule">comment_count</span><span class="token punctuation">:</span> <span class="token boolean important">false  </span><span class="token comment" spellcheck="true">#If false, comment count will only be displayed in post page, not in home page</span>
  <span class="token key atrule">recordIP</span><span class="token punctuation">:</span> <span class="token boolean important">true        </span><span class="token comment" spellcheck="true">#Whether to record the commenter IP</span>
  <span class="token key atrule">serverURLs</span><span class="token punctuation">:</span>           <span class="token comment" spellcheck="true">#When the custom domain name is enabled, fill it in here (it will be detected automatically by default, no need to fill in)</span>
  <span class="token comment" spellcheck="true">#post_meta_order: 0</span>
  <span class="token comment" spellcheck="true">#background: /medias/comment_bg.png</span>
  
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 3.åœ¨éœ€è¦çš„æ–‡ç« Front-Matterå‰ï¼ŒæŒ‰éœ€é…ç½®æ˜¯å¦æ”¯æŒè¯„è®º</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true">#ä¾‹å¦‚ï¼šåˆ†ç±»ï¼ˆ../source/categories/index.mdï¼‰</span>
<span class="token punctuation">---</span>
<span class="token key atrule">title</span><span class="token punctuation">:</span> æ–‡ç« åˆ†ç±»
<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2020-05-16 13:21:33</span>
<span class="token key atrule">categories</span><span class="token punctuation">:</span> Testing
<span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"categories"</span>
<span class="token key atrule">comments</span><span class="token punctuation">:</span> <span class="token boolean important">false             </span><span class="token comment" spellcheck="true">#ç¦æ­¢è¯„è®º</span>
<span class="token punctuation">---</span>
</code></pre>
<blockquote>
<p><strong>ç±»ä¼¼å‚è€ƒï¼š</strong></p>
<ul>
<li><a href="https://blog.csdn.net/qq_43827595/article/details/101450966">hexo yiliaä¸»é¢˜æ·»åŠ è¯„è®ºç³»ç»Ÿè¯¦ç»†æ•™ç¨‹</a></li>
</ul>
</blockquote>
<h1 id="æ·»åŠ å¡é€šçœ‹æ¿å¨˜ï¼ˆLive2Dï¼‰"><a href="#æ·»åŠ å¡é€šçœ‹æ¿å¨˜ï¼ˆLive2Dï¼‰" class="headerlink" title="æ·»åŠ å¡é€šçœ‹æ¿å¨˜ï¼ˆLive2Dï¼‰"></a>æ·»åŠ å¡é€šçœ‹æ¿å¨˜ï¼ˆLive2Dï¼‰</h1><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 1.å½“å‰åšå®¢ç«™ç‚¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå®‰è£…å‘½ä»¤ï¼ˆå®‰è£…live2dï¼‰ï¼š</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
$ npm install <span class="token punctuation">-</span><span class="token punctuation">-</span>save hexo<span class="token punctuation">-</span>helper<span class="token punctuation">-</span>live2d

<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 2.å½“å‰åšå®¢ç«™ç‚¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå®‰è£…å‘½ä»¤ï¼ˆå®‰è£…ä¾‹å¦‚æ¨¡å‹shizukuï¼‰ï¼š</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
$ npm install live2d<span class="token punctuation">-</span>widget<span class="token punctuation">-</span>model<span class="token punctuation">-</span>shizuku

<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 3.è®¾ç½®æ˜¾ç¤ºã€‚ç¼–è¾‘themeé…ç½®ï¼ˆ../themes/theme-hexo-next/layout/_layout.swigï¼‰</span>
<span class="token comment" spellcheck="true"># æ·»åŠ ï¼šåœ¨&lt;/body>å‰ä¸€è¡Œæ·»åŠ  {{ live2d() }}</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
&lt;<span class="token tag">!DOCTYPE</span> html<span class="token punctuation">></span>
&lt;html lang="<span class="token punctuation">{</span><span class="token punctuation">{</span> config.language <span class="token punctuation">}</span><span class="token punctuation">}</span>"<span class="token punctuation">></span>
&lt;head<span class="token punctuation">></span><span class="token punctuation">...</span>&lt;/head<span class="token punctuation">></span>
&lt;body<span class="token punctuation">></span>
    <span class="token punctuation">...</span>
    <span class="token punctuation">{</span><span class="token comment" spellcheck="true">#### æ·»åŠ ï¼šå¡é€šçœ‹æ¿å¨˜ ####}</span>
    <span class="token punctuation">{</span><span class="token punctuation">{</span> live2d() <span class="token punctuation">}</span><span class="token punctuation">}</span>
&lt;/body<span class="token punctuation">></span>
&lt;/html<span class="token punctuation">></span>

<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 4.é…ç½®Live2Dã€‚ç¼–è¾‘globalé…ç½®ï¼ˆ../&lt;your_hexo_blog>/_config.yml#Live2Dï¼‰</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># Live2D</span>
<span class="token comment" spellcheck="true"># https://github.com/EYHN/hexo-helper-live2d</span>
<span class="token comment" spellcheck="true"># Refer: https://fjkang.github.io/2017/12/08/%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E8%90%8C%E7%89%A9/</span>
<span class="token comment" spellcheck="true"># live2d:</span>
<span class="token comment" spellcheck="true">#   model: z16 # æ¨¡å‹åç§° é»˜è®¤å€¼: z16</span>
<span class="token comment" spellcheck="true">#   width: 150 # å®½åº¦ é»˜è®¤å€¼: 150</span>
<span class="token comment" spellcheck="true">#   height: 300 # é«˜åº¦ é»˜è®¤å€¼: 300</span>
<span class="token comment" spellcheck="true">#   scaling: 1 # åˆ†è¾¨ç‡ç¼©æ”¾å€ç‡ é»˜è®¤å€¼: 2</span>
<span class="token comment" spellcheck="true">#   opacityDefault: 0.7 # åˆå§‹çš„é€æ˜åº¦ é»˜è®¤å€¼: 0.7</span>
<span class="token comment" spellcheck="true">#   opacityHover: 1 # é¼ æ ‡æ‚¬æµ®æ—¶çš„é€æ˜åº¦ é»˜è®¤å€¼: 1</span>
<span class="token comment" spellcheck="true">#   mobileShow: true # æ˜¯å¦åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ˜¾ç¤º é»˜è®¤å€¼: true</span>
<span class="token comment" spellcheck="true">#   mobileScaling: 0.5 # ç§»åŠ¨è®¾å¤‡ç¼©æ”¾å€ç‡ é»˜è®¤å€¼: 0.5</span>
<span class="token comment" spellcheck="true">#   position: right # æ¨¡å‹å·¦å³ä¾§æ”¾ç½®ä½ç½® é»˜è®¤å€¼: right</span>
<span class="token comment" spellcheck="true">#   horizontalOffset: 0 # å…ƒç´ çš„æ°´å¹³åç§» é»˜è®¤å€¼: 0</span>
<span class="token comment" spellcheck="true">#   verticalOffset: -20 # å…ƒç´ çš„åº•éƒ¨åç§» é»˜è®¤å€¼: -20</span>
<span class="token comment" spellcheck="true">#   id: live2dcanvas # å…ƒç´ çš„id é»˜è®¤å€¼: live2dcanvas</span>
<span class="token comment" spellcheck="true">#   deviceJsSource: local # current-device è„šæœ¬çš„æ¥æº é»˜è®¤å€¼: local</span>

<span class="token comment" spellcheck="true"># Live2D</span>
<span class="token comment" spellcheck="true"># https://github.com/EYHN/hexo-helper-live2d</span>
<span class="token comment" spellcheck="true"># Refer: http://yearito.cn/posts/hexo-theme-beautify.html</span>
<span class="token key atrule">live2d</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">pluginRootPath</span><span class="token punctuation">:</span> live2dw/
  <span class="token key atrule">pluginJsPath</span><span class="token punctuation">:</span> lib/
  <span class="token key atrule">pluginModelPath</span><span class="token punctuation">:</span> assets/ Relative)

  <span class="token comment" spellcheck="true"># è„šæœ¬åŠ è½½æº</span>
  <span class="token key atrule">scriptFrom</span><span class="token punctuation">:</span> local <span class="token comment" spellcheck="true">#é»˜è®¤ä»æœ¬åœ°åŠ è½½è„šæœ¬</span>
  <span class="token comment" spellcheck="true"># scriptFrom: jsdelivr # ä» jsdelivr CDN åŠ è½½è„šæœ¬</span>
  <span class="token comment" spellcheck="true"># scriptFrom: unpkg # ä» unpkg CDN åŠ è½½è„šæœ¬</span>
  <span class="token comment" spellcheck="true"># scriptFrom: https://cdn.jsdelivr.net/npm/live2d-widget@3.x/lib/L2Dwidget.min.js # ä»è‡ªå®šä¹‰åœ°å€åŠ è½½è„šæœ¬</span>
  <span class="token key atrule">tagMode</span><span class="token punctuation">:</span> <span class="token boolean important">true     </span><span class="token comment" spellcheck="true">#å¼€å¯trueã€‚åªåœ¨æœ‰ {{ live2d() }} æ ‡ç­¾çš„é¡µé¢ä¸ŠåŠ è½½ / åœ¨æ‰€æœ‰é¡µé¢ä¸ŠåŠ è½½</span>
  <span class="token key atrule">log</span><span class="token punctuation">:</span> <span class="token boolean important">false        </span><span class="token comment" spellcheck="true">#æ˜¯å¦åœ¨æ§åˆ¶å°æ‰“å°æ—¥å¿—</span>

  <span class="token comment" spellcheck="true"># é€‰æ‹©çœ‹æ¿å¨˜æ¨¡å‹</span>
  <span class="token key atrule">model</span><span class="token punctuation">:</span>
    <span class="token key atrule">use</span><span class="token punctuation">:</span> live2d<span class="token punctuation">-</span>widget<span class="token punctuation">-</span>model<span class="token punctuation">-</span>shizuku  <span class="token comment" spellcheck="true"># npm packageçš„åå­—ã€‚è¿™é‡Œä½¿ç”¨çš„shizukuæ¨¡å‹ï¼ˆnpm i live2d-widget-model-shizukuï¼‰</span>
    <span class="token comment" spellcheck="true"># use: wanko # /live2d_models/ ç›®å½•ä¸‹çš„æ¨¡å‹æ–‡ä»¶å¤¹åç§°</span>
    <span class="token comment" spellcheck="true"># use: ./wives/wanko # ç«™ç‚¹æ ¹ç›®å½•ä¸‹çš„æ¨¡å‹æ–‡ä»¶å¤¹åç§°</span>
    <span class="token comment" spellcheck="true"># use: https://cdn.jsdelivr.net/npm/live2d-widget-model-wanko@1.0.5/assets/wanko.model.json # è‡ªå®šä¹‰ç½‘ç»œæ•°æ®æº</span>
  <span class="token key atrule">display</span><span class="token punctuation">:</span>
    <span class="token key atrule">position</span><span class="token punctuation">:</span> left  <span class="token comment" spellcheck="true">#æ˜¾ç¤ºåœ¨å·¦è¾¹è¿˜æ˜¯å³è¾¹</span>
    <span class="token key atrule">width</span><span class="token punctuation">:</span> <span class="token number">100      </span><span class="token comment" spellcheck="true">#å®½åº¦</span>
    <span class="token key atrule">height</span><span class="token punctuation">:</span> <span class="token number">180     </span><span class="token comment" spellcheck="true">#é«˜åº¦</span>
  <span class="token key atrule">mobile</span><span class="token punctuation">:</span>
    <span class="token key atrule">show</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">react</span><span class="token punctuation">:</span>
    <span class="token key atrule">opacityDefault</span><span class="token punctuation">:</span> <span class="token number">0.7 </span><span class="token comment" spellcheck="true">#é»˜è®¤é€æ˜åº¦</span>
</code></pre>
<h1 id="æ·»åŠ é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆï¼ˆâ¤ï¸ã€çˆ†ç‚¸ï¼‰"><a href="#æ·»åŠ é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆï¼ˆâ¤ï¸ã€çˆ†ç‚¸ï¼‰" class="headerlink" title="æ·»åŠ é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆï¼ˆâ¤ï¸ã€çˆ†ç‚¸ï¼‰"></a>æ·»åŠ é¼ æ ‡ç‚¹å‡»ç‰¹æ•ˆï¼ˆâ¤ï¸ã€çˆ†ç‚¸ï¼‰</h1><p>â˜ <strong>æ·»åŠ æ­¥éª¤ï¼š</strong></p>
<blockquote>
<ol>
<li><code>../themes/next/source/js</code> ä¸‹åˆ›å»ºç‰¹æ•ˆjs. </li>
<li><code>../themes/next/layout/_layout.swig#head</code> éƒ¨åˆ†å¼•ç”¨jså’Œå…¶å®ƒè¾…åŠ©jsã€‚</li>
</ol>
</blockquote>
<p>1.ä¸»é¢˜é…ç½®é¡¹ï¼š<code>../themes/theme-hexo-next/_config.yml#cursor_effect</code></p>
<pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># Customize different effects while clicking cursor.</span>
<span class="token comment" spellcheck="true"># type values: love æµ®å‡ºçˆ±å¿ƒ | explosion çˆ†ç‚¸ | ...</span>
<span class="token key atrule">cursor_effect</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">type</span><span class="token punctuation">:</span> love
</code></pre>
<p>2.é…ç½®ï¼š<code>../themes/theme-hexo-next/layout/_custom/custom.swig</code></p>
<pre class=" language-yaml"><code class="language-yaml"><span class="token punctuation">{</span>% if theme.cursor_effect.enable %<span class="token punctuation">}</span>
    <span class="token punctuation">{</span>% if theme.cursor_effect.type == "love" %<span class="token punctuation">}</span>
      &lt;script src="/js/effects/cursor/love.min.js"<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>
    <span class="token punctuation">{</span>% elseif theme.cursor_effect.type == "explosion" %<span class="token punctuation">}</span>
      &lt;canvas class="fireworks" style="position<span class="token punctuation">:</span> <span class="token key atrule">fixed;left</span><span class="token punctuation">:</span> <span class="token key atrule">0;top</span><span class="token punctuation">:</span> <span class="token key atrule">0;z-index</span><span class="token punctuation">:</span> 1; pointer<span class="token punctuation">-</span><span class="token key atrule">events</span><span class="token punctuation">:</span> none;" <span class="token punctuation">></span>&lt;/canvas<span class="token punctuation">></span>
      &lt;script src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>
      &lt;script src="/js/effects/cursor/explosion.min.js"<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>
    <span class="token punctuation">{</span>% endif %<span class="token punctuation">}</span>
<span class="token punctuation">{</span>% endif %<span class="token punctuation">}</span>
</code></pre>
<p>3.é…ç½®ï¼š<code>/themes/theme-hexo-next/layout/_layout.swig</code></p>
<pre class=" language-yaml"><code class="language-yaml"><span class="token punctuation">{</span>% include '_custom/custom.swig' %<span class="token punctuation">}</span>
</code></pre>
<ul>
<li><p><em>ç¤ºä¾‹ç‰¹æ•ˆjsï¼šçº¢å¿ƒï¼ˆlove.min.jsï¼‰</em></p>
<pre class=" language-bash"><code class="language-bash"><span class="token operator">!</span>function<span class="token punctuation">(</span>e,t,a<span class="token punctuation">)</span><span class="token punctuation">{</span>function n<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>c<span class="token punctuation">(</span><span class="token string">".heart{width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 500%;-moz-border-radius: 50%;position: fixed;}.heart:after{top: -5px;}.heart:before{left: -5px;}"</span><span class="token punctuation">)</span>,o<span class="token punctuation">(</span><span class="token punctuation">)</span>,r<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>function r<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>for<span class="token punctuation">(</span>var e<span class="token operator">=</span>0<span class="token punctuation">;</span>e<span class="token operator">&lt;</span>d.length<span class="token punctuation">;</span>e++<span class="token punctuation">)</span>d<span class="token punctuation">[</span>e<span class="token punctuation">]</span>.alpha<span class="token operator">&lt;=</span>0?<span class="token punctuation">(</span>t.body.removeChild<span class="token punctuation">(</span>d<span class="token punctuation">[</span>e<span class="token punctuation">]</span>.el<span class="token punctuation">)</span>,d.splice<span class="token punctuation">(</span>e,1<span class="token punctuation">))</span>:<span class="token punctuation">(</span>d<span class="token punctuation">[</span>e<span class="token punctuation">]</span>.y--,d<span class="token punctuation">[</span>e<span class="token punctuation">]</span>.scale+<span class="token operator">=</span>.004,d<span class="token punctuation">[</span>e<span class="token punctuation">]</span>.alpha-<span class="token operator">=</span>.013,d<span class="token punctuation">[</span>e<span class="token punctuation">]</span>.el.style.cssText<span class="token operator">=</span><span class="token string">"left:"</span>+d<span class="token punctuation">[</span>e<span class="token punctuation">]</span>.x+<span class="token string">"px;top:"</span>+d<span class="token punctuation">[</span>e<span class="token punctuation">]</span>.y+<span class="token string">"px;opacity:"</span>+d<span class="token punctuation">[</span>e<span class="token punctuation">]</span>.alpha+<span class="token string">";transform:scale("</span>+d<span class="token punctuation">[</span>e<span class="token punctuation">]</span>.scale+<span class="token string">","</span>+d<span class="token punctuation">[</span>e<span class="token punctuation">]</span>.scale+<span class="token string">") rotate(45deg);background:"</span>+d<span class="token punctuation">[</span>e<span class="token punctuation">]</span>.color+<span class="token string">";z-index:99999"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>requestAnimationFrame<span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">}</span>function o<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>var t<span class="token operator">=</span><span class="token string">"function"</span><span class="token operator">==</span>typeof e.onclick<span class="token operator">&amp;&amp;</span>e.onclick<span class="token punctuation">;</span>e.onclick<span class="token operator">=</span>function<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>t<span class="token operator">&amp;&amp;</span>t<span class="token punctuation">(</span><span class="token punctuation">)</span>,i<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>function i<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>var a<span class="token operator">=</span>t.createElement<span class="token punctuation">(</span><span class="token string">"div"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>a.className<span class="token operator">=</span><span class="token string">"heart"</span>,d.push<span class="token punctuation">(</span><span class="token punctuation">{</span>el:a,x:e.clientX-5,y:e.clientY-5,scale:1,alpha:1,color:s<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>,t.body.appendChild<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">}</span>function c<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>var a<span class="token operator">=</span>t.createElement<span class="token punctuation">(</span><span class="token string">"style"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>a.type<span class="token operator">=</span><span class="token string">"text/css"</span><span class="token punctuation">;</span>try<span class="token punctuation">{</span>a.appendChild<span class="token punctuation">(</span>t.createTextNode<span class="token punctuation">(</span>e<span class="token punctuation">))</span><span class="token punctuation">}</span>catch<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">{</span>a.styleSheet.cssText<span class="token operator">=</span>e<span class="token punctuation">}</span>t.getElementsByTagName<span class="token punctuation">(</span><span class="token string">"head"</span><span class="token punctuation">)</span><span class="token punctuation">[</span>0<span class="token punctuation">]</span>.appendChild<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">}</span>function s<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>return<span class="token string">"rgb("</span>+~~<span class="token punctuation">(</span>255*Math.random<span class="token punctuation">(</span><span class="token punctuation">))</span>+<span class="token string">","</span>+~~<span class="token punctuation">(</span>255*Math.random<span class="token punctuation">(</span><span class="token punctuation">))</span>+<span class="token string">","</span>+~~<span class="token punctuation">(</span>255*Math.random<span class="token punctuation">(</span><span class="token punctuation">))</span>+<span class="token string">")"</span><span class="token punctuation">}</span>var d<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>e.requestAnimationFrame<span class="token operator">=</span>function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>return e.requestAnimationFrame<span class="token operator">||</span>e.webkitRequestAnimationFrame<span class="token operator">||</span>e.mozRequestAnimationFrame<span class="token operator">||</span>e.oRequestAnimationFrame<span class="token operator">||</span>e.msRequestAnimationFrame<span class="token operator">||</span>function<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>setTimeout<span class="token punctuation">(</span>e,1e3/60<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>,n<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">(</span>window,document<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</li>
<li><p><em>ç¤ºä¾‹ç‰¹æ•ˆjsï¼šçˆ†ç‚¸ï¼ˆexplosion.min.jsï¼‰</em></p>
<pre class=" language-bash"><code class="language-bash"><span class="token string">"use strict"</span><span class="token punctuation">;</span><span class="token keyword">function</span> updateCoords<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>pointerX<span class="token operator">=</span><span class="token punctuation">(</span>e.clientX<span class="token operator">||</span>e.touches<span class="token punctuation">[</span>0<span class="token punctuation">]</span>.clientX<span class="token punctuation">)</span>-canvasEl.getBoundingClientRect<span class="token punctuation">(</span><span class="token punctuation">)</span>.left,pointerY<span class="token operator">=</span>e.clientY<span class="token operator">||</span>e.touches<span class="token punctuation">[</span>0<span class="token punctuation">]</span>.clientY-canvasEl.getBoundingClientRect<span class="token punctuation">(</span><span class="token punctuation">)</span>.top<span class="token punctuation">}</span>function setParticuleDirection<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>var t<span class="token operator">=</span>anime.random<span class="token punctuation">(</span>0,360<span class="token punctuation">)</span>*Math.PI/180,a<span class="token operator">=</span>anime.random<span class="token punctuation">(</span>50,180<span class="token punctuation">)</span>,n<span class="token operator">=</span><span class="token punctuation">[</span>-1,1<span class="token punctuation">]</span><span class="token punctuation">[</span>anime.random<span class="token punctuation">(</span>0,1<span class="token punctuation">)</span><span class="token punctuation">]</span>*a<span class="token punctuation">;</span>return<span class="token punctuation">{</span>x:e.x+n*Math.cos<span class="token punctuation">(</span>t<span class="token punctuation">)</span>,y:e.y+n*Math.sin<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>function createParticule<span class="token punctuation">(</span>e,t<span class="token punctuation">)</span><span class="token punctuation">{</span>var a<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">return</span> a.x<span class="token operator">=</span>e,a.y<span class="token operator">=</span>t,a.color<span class="token operator">=</span>colors<span class="token punctuation">[</span>anime.random<span class="token punctuation">(</span>0,colors.length-1<span class="token punctuation">)</span><span class="token punctuation">]</span>,a.radius<span class="token operator">=</span>anime.random<span class="token punctuation">(</span>16,32<span class="token punctuation">)</span>,a.endPos<span class="token operator">=</span>setParticuleDirection<span class="token punctuation">(</span>a<span class="token punctuation">)</span>,a.draw<span class="token operator">=</span>function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>ctx.beginPath<span class="token punctuation">(</span><span class="token punctuation">)</span>,ctx.arc<span class="token punctuation">(</span>a.x,a.y,a.radius,0,2*Math.PI,<span class="token operator">!</span>0<span class="token punctuation">)</span>,ctx.fillStyle<span class="token operator">=</span>a.color,ctx.fill<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>,a<span class="token punctuation">}</span>function createCircle<span class="token punctuation">(</span>e,t<span class="token punctuation">)</span><span class="token punctuation">{</span>var a<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">return</span> a.x<span class="token operator">=</span>e,a.y<span class="token operator">=</span>t,a.color<span class="token operator">=</span><span class="token string">"#F00"</span>,a.radius<span class="token operator">=</span>0.1,a.alpha<span class="token operator">=</span>0.5,a.lineWidth<span class="token operator">=</span>6,a.draw<span class="token operator">=</span>function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>ctx.globalAlpha<span class="token operator">=</span>a.alpha,ctx.beginPath<span class="token punctuation">(</span><span class="token punctuation">)</span>,ctx.arc<span class="token punctuation">(</span>a.x,a.y,a.radius,0,2*Math.PI,<span class="token operator">!</span>0<span class="token punctuation">)</span>,ctx.lineWidth<span class="token operator">=</span>a.lineWidth,ctx.strokeStyle<span class="token operator">=</span>a.color,ctx.stroke<span class="token punctuation">(</span><span class="token punctuation">)</span>,ctx.globalAlpha<span class="token operator">=</span>1<span class="token punctuation">}</span>,a<span class="token punctuation">}</span>function renderParticule<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>for<span class="token punctuation">(</span>var t<span class="token operator">=</span>0<span class="token punctuation">;</span>t<span class="token operator">&lt;</span>e.animatables.length<span class="token punctuation">;</span>t++<span class="token punctuation">)</span><span class="token punctuation">{</span>e.animatables<span class="token punctuation">[</span>t<span class="token punctuation">]</span>.target.draw<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>function animateParticules<span class="token punctuation">(</span>e,t<span class="token punctuation">)</span><span class="token punctuation">{</span>for<span class="token punctuation">(</span>var a<span class="token operator">=</span>createCircle<span class="token punctuation">(</span>e,t<span class="token punctuation">)</span>,n<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>,i<span class="token operator">=</span>0<span class="token punctuation">;</span>i<span class="token operator">&lt;</span>numberOfParticules<span class="token punctuation">;</span>i++<span class="token punctuation">)</span><span class="token punctuation">{</span>n.push<span class="token punctuation">(</span>createParticule<span class="token punctuation">(</span>e,t<span class="token punctuation">))</span><span class="token punctuation">}</span>anime.timeline<span class="token punctuation">(</span><span class="token punctuation">)</span>.add<span class="token punctuation">(</span><span class="token punctuation">{</span>targets:n,x:function<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>return e.endPos.x<span class="token punctuation">}</span>,y:function<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>return e.endPos.y<span class="token punctuation">}</span>,radius:0.1,duration:anime.random<span class="token punctuation">(</span>1200,1800<span class="token punctuation">)</span>,easing:<span class="token string">"easeOutExpo"</span>,update:renderParticule<span class="token punctuation">}</span><span class="token punctuation">)</span>.add<span class="token punctuation">(</span><span class="token punctuation">{</span>targets:a,radius:anime.random<span class="token punctuation">(</span>80,160<span class="token punctuation">)</span>,lineWidth:0,alpha:<span class="token punctuation">{</span>value:0,easing:<span class="token string">"linear"</span>,duration:anime.random<span class="token punctuation">(</span>600,800<span class="token punctuation">)</span><span class="token punctuation">}</span>,duration:anime.random<span class="token punctuation">(</span>1200,1800<span class="token punctuation">)</span>,easing:<span class="token string">"easeOutExpo"</span>,update:renderParticule,offset:0<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>function debounce<span class="token punctuation">(</span>e,t<span class="token punctuation">)</span><span class="token punctuation">{</span>var a<span class="token punctuation">;</span><span class="token keyword">return</span> function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>var n<span class="token operator">=</span>this,i<span class="token operator">=</span>arguments<span class="token punctuation">;</span>clearTimeout<span class="token punctuation">(</span>a<span class="token punctuation">)</span>,a<span class="token operator">=</span>setTimeout<span class="token punctuation">(</span>function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>e.apply<span class="token punctuation">(</span>n,i<span class="token punctuation">)</span><span class="token punctuation">}</span>,t<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>var canvasEl<span class="token operator">=</span>document.querySelector<span class="token punctuation">(</span><span class="token string">".fireworks"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>if<span class="token punctuation">(</span>canvasEl<span class="token punctuation">)</span><span class="token punctuation">{</span>var ctx<span class="token operator">=</span>canvasEl.getContext<span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span>,numberOfParticules<span class="token operator">=</span>30,pointerX<span class="token operator">=</span>0,pointerY<span class="token operator">=</span>0,tap<span class="token operator">=</span><span class="token string">"mousedown"</span>,colors<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"#FF1461"</span>,<span class="token string">"#18FF92"</span>,<span class="token string">"#5A87FF"</span>,<span class="token string">"#FBF38C"</span><span class="token punctuation">]</span>,setCanvasSize<span class="token operator">=</span>debounce<span class="token punctuation">(</span>function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>canvasEl.width<span class="token operator">=</span>2*window.innerWidth,canvasEl.height<span class="token operator">=</span>2*window.innerHeight,canvasEl.style.width<span class="token operator">=</span>window.innerWidth+<span class="token string">"px"</span>,canvasEl.style.height<span class="token operator">=</span>window.innerHeight+<span class="token string">"px"</span>,canvasEl.getContext<span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span>.scale<span class="token punctuation">(</span>2,2<span class="token punctuation">)</span><span class="token punctuation">}</span>,500<span class="token punctuation">)</span>,render<span class="token operator">=</span>anime<span class="token punctuation">(</span><span class="token punctuation">{</span>duration:1/0,update:function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>ctx.clearRect<span class="token punctuation">(</span>0,0,canvasEl.width,canvasEl.height<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>document.addEventListener<span class="token punctuation">(</span>tap,function<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token string">"sidebar"</span><span class="token operator">!=</span><span class="token operator">=</span>e.target.id<span class="token operator">&amp;&amp;</span><span class="token string">"toggle-sidebar"</span><span class="token operator">!=</span><span class="token operator">=</span>e.target.id<span class="token operator">&amp;&amp;</span><span class="token string">"A"</span><span class="token operator">!=</span><span class="token operator">=</span>e.target.nodeName<span class="token operator">&amp;&amp;</span><span class="token string">"IMG"</span><span class="token operator">!=</span><span class="token operator">=</span>e.target.nodeName<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>render.play<span class="token punctuation">(</span><span class="token punctuation">)</span>,updateCoords<span class="token punctuation">(</span>e<span class="token punctuation">)</span>,animateParticules<span class="token punctuation">(</span>pointerX,pointerY<span class="token punctuation">))</span><span class="token punctuation">}</span>,<span class="token operator">!</span>1<span class="token punctuation">)</span>,setCanvasSize<span class="token punctuation">(</span><span class="token punctuation">)</span>,window.addEventListener<span class="token punctuation">(</span><span class="token string">"resize"</span>,setCanvasSize,<span class="token operator">!</span>1<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token string">"use strict"</span><span class="token punctuation">;</span><span class="token keyword">function</span> updateCoords<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>pointerX<span class="token operator">=</span><span class="token punctuation">(</span>e.clientX<span class="token operator">||</span>e.touches<span class="token punctuation">[</span>0<span class="token punctuation">]</span>.clientX<span class="token punctuation">)</span>-canvasEl.getBoundingClientRect<span class="token punctuation">(</span><span class="token punctuation">)</span>.left,pointerY<span class="token operator">=</span>e.clientY<span class="token operator">||</span>e.touches<span class="token punctuation">[</span>0<span class="token punctuation">]</span>.clientY-canvasEl.getBoundingClientRect<span class="token punctuation">(</span><span class="token punctuation">)</span>.top<span class="token punctuation">}</span>function setParticuleDirection<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>var t<span class="token operator">=</span>anime.random<span class="token punctuation">(</span>0,360<span class="token punctuation">)</span>*Math.PI/180,a<span class="token operator">=</span>anime.random<span class="token punctuation">(</span>50,180<span class="token punctuation">)</span>,n<span class="token operator">=</span><span class="token punctuation">[</span>-1,1<span class="token punctuation">]</span><span class="token punctuation">[</span>anime.random<span class="token punctuation">(</span>0,1<span class="token punctuation">)</span><span class="token punctuation">]</span>*a<span class="token punctuation">;</span>return<span class="token punctuation">{</span>x:e.x+n*Math.cos<span class="token punctuation">(</span>t<span class="token punctuation">)</span>,y:e.y+n*Math.sin<span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>function createParticule<span class="token punctuation">(</span>e,t<span class="token punctuation">)</span><span class="token punctuation">{</span>var a<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">return</span> a.x<span class="token operator">=</span>e,a.y<span class="token operator">=</span>t,a.color<span class="token operator">=</span>colors<span class="token punctuation">[</span>anime.random<span class="token punctuation">(</span>0,colors.length-1<span class="token punctuation">)</span><span class="token punctuation">]</span>,a.radius<span class="token operator">=</span>anime.random<span class="token punctuation">(</span>16,32<span class="token punctuation">)</span>,a.endPos<span class="token operator">=</span>setParticuleDirection<span class="token punctuation">(</span>a<span class="token punctuation">)</span>,a.draw<span class="token operator">=</span>function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>ctx.beginPath<span class="token punctuation">(</span><span class="token punctuation">)</span>,ctx.arc<span class="token punctuation">(</span>a.x,a.y,a.radius,0,2*Math.PI,<span class="token operator">!</span>0<span class="token punctuation">)</span>,ctx.fillStyle<span class="token operator">=</span>a.color,ctx.fill<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>,a<span class="token punctuation">}</span>function createCircle<span class="token punctuation">(</span>e,t<span class="token punctuation">)</span><span class="token punctuation">{</span>var a<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">return</span> a.x<span class="token operator">=</span>e,a.y<span class="token operator">=</span>t,a.color<span class="token operator">=</span><span class="token string">"#F00"</span>,a.radius<span class="token operator">=</span>0.1,a.alpha<span class="token operator">=</span>0.5,a.lineWidth<span class="token operator">=</span>6,a.draw<span class="token operator">=</span>function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>ctx.globalAlpha<span class="token operator">=</span>a.alpha,ctx.beginPath<span class="token punctuation">(</span><span class="token punctuation">)</span>,ctx.arc<span class="token punctuation">(</span>a.x,a.y,a.radius,0,2*Math.PI,<span class="token operator">!</span>0<span class="token punctuation">)</span>,ctx.lineWidth<span class="token operator">=</span>a.lineWidth,ctx.strokeStyle<span class="token operator">=</span>a.color,ctx.stroke<span class="token punctuation">(</span><span class="token punctuation">)</span>,ctx.globalAlpha<span class="token operator">=</span>1<span class="token punctuation">}</span>,a<span class="token punctuation">}</span>function renderParticule<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>for<span class="token punctuation">(</span>var t<span class="token operator">=</span>0<span class="token punctuation">;</span>t<span class="token operator">&lt;</span>e.animatables.length<span class="token punctuation">;</span>t++<span class="token punctuation">)</span><span class="token punctuation">{</span>e.animatables<span class="token punctuation">[</span>t<span class="token punctuation">]</span>.target.draw<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>function animateParticules<span class="token punctuation">(</span>e,t<span class="token punctuation">)</span><span class="token punctuation">{</span>for<span class="token punctuation">(</span>var a<span class="token operator">=</span>createCircle<span class="token punctuation">(</span>e,t<span class="token punctuation">)</span>,n<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>,i<span class="token operator">=</span>0<span class="token punctuation">;</span>i<span class="token operator">&lt;</span>numberOfParticules<span class="token punctuation">;</span>i++<span class="token punctuation">)</span><span class="token punctuation">{</span>n.push<span class="token punctuation">(</span>createParticule<span class="token punctuation">(</span>e,t<span class="token punctuation">))</span><span class="token punctuation">}</span>anime.timeline<span class="token punctuation">(</span><span class="token punctuation">)</span>.add<span class="token punctuation">(</span><span class="token punctuation">{</span>targets:n,x:function<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>return e.endPos.x<span class="token punctuation">}</span>,y:function<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span>return e.endPos.y<span class="token punctuation">}</span>,radius:0.1,duration:anime.random<span class="token punctuation">(</span>1200,1800<span class="token punctuation">)</span>,easing:<span class="token string">"easeOutExpo"</span>,update:renderParticule<span class="token punctuation">}</span><span class="token punctuation">)</span>.add<span class="token punctuation">(</span><span class="token punctuation">{</span>targets:a,radius:anime.random<span class="token punctuation">(</span>80,160<span class="token punctuation">)</span>,lineWidth:0,alpha:<span class="token punctuation">{</span>value:0,easing:<span class="token string">"linear"</span>,duration:anime.random<span class="token punctuation">(</span>600,800<span class="token punctuation">)</span><span class="token punctuation">}</span>,duration:anime.random<span class="token punctuation">(</span>1200,1800<span class="token punctuation">)</span>,easing:<span class="token string">"easeOutExpo"</span>,update:renderParticule,offset:0<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>function debounce<span class="token punctuation">(</span>e,t<span class="token punctuation">)</span><span class="token punctuation">{</span>var a<span class="token punctuation">;</span><span class="token keyword">return</span> function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>var n<span class="token operator">=</span>this,i<span class="token operator">=</span>arguments<span class="token punctuation">;</span>clearTimeout<span class="token punctuation">(</span>a<span class="token punctuation">)</span>,a<span class="token operator">=</span>setTimeout<span class="token punctuation">(</span>function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>e.apply<span class="token punctuation">(</span>n,i<span class="token punctuation">)</span><span class="token punctuation">}</span>,t<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span>var canvasEl<span class="token operator">=</span>document.querySelector<span class="token punctuation">(</span><span class="token string">".fireworks"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>if<span class="token punctuation">(</span>canvasEl<span class="token punctuation">)</span><span class="token punctuation">{</span>var ctx<span class="token operator">=</span>canvasEl.getContext<span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span>,numberOfParticules<span class="token operator">=</span>30,pointerX<span class="token operator">=</span>0,pointerY<span class="token operator">=</span>0,tap<span class="token operator">=</span><span class="token string">"mousedown"</span>,colors<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"#FF1461"</span>,<span class="token string">"#18FF92"</span>,<span class="token string">"#5A87FF"</span>,<span class="token string">"#FBF38C"</span><span class="token punctuation">]</span>,setCanvasSize<span class="token operator">=</span>debounce<span class="token punctuation">(</span>function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>canvasEl.width<span class="token operator">=</span>2*window.innerWidth,canvasEl.height<span class="token operator">=</span>2*window.innerHeight,canvasEl.style.width<span class="token operator">=</span>window.innerWidth+<span class="token string">"px"</span>,canvasEl.style.height<span class="token operator">=</span>window.innerHeight+<span class="token string">"px"</span>,canvasEl.getContext<span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span>.scale<span class="token punctuation">(</span>2,2<span class="token punctuation">)</span><span class="token punctuation">}</span>,500<span class="token punctuation">)</span>,render<span class="token operator">=</span>anime<span class="token punctuation">(</span><span class="token punctuation">{</span>duration:1/0,update:function<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>ctx.clearRect<span class="token punctuation">(</span>0,0,canvasEl.width,canvasEl.height<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>document.addEventListener<span class="token punctuation">(</span>tap,function<span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token string">"sidebar"</span><span class="token operator">!=</span><span class="token operator">=</span>e.target.id<span class="token operator">&amp;&amp;</span><span class="token string">"toggle-sidebar"</span><span class="token operator">!=</span><span class="token operator">=</span>e.target.id<span class="token operator">&amp;&amp;</span><span class="token string">"A"</span><span class="token operator">!=</span><span class="token operator">=</span>e.target.nodeName<span class="token operator">&amp;&amp;</span><span class="token string">"IMG"</span><span class="token operator">!=</span><span class="token operator">=</span>e.target.nodeName<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>render.play<span class="token punctuation">(</span><span class="token punctuation">)</span>,updateCoords<span class="token punctuation">(</span>e<span class="token punctuation">)</span>,animateParticules<span class="token punctuation">(</span>pointerX,pointerY<span class="token punctuation">))</span><span class="token punctuation">}</span>,<span class="token operator">!</span>1<span class="token punctuation">)</span>,setCanvasSize<span class="token punctuation">(</span><span class="token punctuation">)</span>,window.addEventListener<span class="token punctuation">(</span><span class="token string">"resize"</span>,setCanvasSize,<span class="token operator">!</span>1<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
</li>
</ul>
<h1 id="æ·»åŠ èƒŒæ™¯çº¿æ¡ç‰¹æ•ˆï¼ˆcanvas-nestï¼‰"><a href="#æ·»åŠ èƒŒæ™¯çº¿æ¡ç‰¹æ•ˆï¼ˆcanvas-nestï¼‰" class="headerlink" title="æ·»åŠ èƒŒæ™¯çº¿æ¡ç‰¹æ•ˆï¼ˆcanvas-nestï¼‰"></a>æ·»åŠ èƒŒæ™¯çº¿æ¡ç‰¹æ•ˆï¼ˆcanvas-nestï¼‰</h1><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 1. å½“å‰åšå®¢ç«™ç‚¹ç›®å½•ä¸‹ï¼Œ../themes/next/_config.yml é…ç½®æ–‡ä»¶ä¸­å¼€å¯ canvas_nest</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># https://github.com/hustcc/canvas-nest.js</span>
<span class="token comment" spellcheck="true"># https://github.com/theme-next/theme-next-canvas-nest</span>
<span class="token comment" spellcheck="true"># é…ç½®è¯¦è§ï¼š https://github.com/hustcc/canvas-nest.js#configuration</span>
<span class="token comment" spellcheck="true"># åŠ¨æ€çº¿æ¡æ•ˆæœï¼Œä¼šå‘é¼ æ ‡é›†ä¸­</span>
<span class="token key atrule">canvas_nest</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true                 </span><span class="token comment" spellcheck="true"># æ‰“å¼€è¿™ä¸ªå¼€å…³</span>
  <span class="token key atrule">color</span><span class="token punctuation">:</span> <span class="token string">'0,0,250'</span>             <span class="token comment" spellcheck="true"># color of lines, default: '0,0,0'; RGB values: (R,G,B).(note: use ',' to separate.)</span>
  <span class="token key atrule">pointColor</span><span class="token punctuation">:</span> <span class="token string">'156,39,176'</span>     <span class="token comment" spellcheck="true"># color of points, default: '0,0,0'; RGB values: (R,G,B).(note: use ',' to separate.)</span>
  <span class="token key atrule">opacity</span><span class="token punctuation">:</span> <span class="token string">'0.5'</span>               <span class="token comment" spellcheck="true"># the opacity of line (0~1), default: 0.5.</span>
  <span class="token key atrule">count</span><span class="token punctuation">:</span> <span class="token string">'99'</span>                  <span class="token comment" spellcheck="true"># the number of lines, default: 99.</span>
  <span class="token key atrule">zIndex</span><span class="token punctuation">:</span> <span class="token string">'-1'</span>                 <span class="token comment" spellcheck="true"># z-index property of the background, default: -1.</span>

<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 2. å®Œæˆç¬¬1æ­¥ï¼Œè¿˜éœ€è¦æä¾›2ä¸ªjsæ–‡ä»¶ï¼šcanvas-nest-nomobile.min.jsã€canvas-nest.min.js ï¼Œ</span>
<span class="token comment" spellcheck="true"># å°†å…¶æ”¾åˆ° "../themes/hexo-theme-next/source/lib/canvas-nest" ç›®å½•ä¸‹ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</span>
<span class="token comment" spellcheck="true"># å‚è€ƒä¾èµ–ï¼šDependencies: https://github.com/theme-next/theme-next-canvas-nest</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
$ git clone https<span class="token punctuation">:</span>//github.com/theme<span class="token punctuation">-</span>next/theme<span class="token punctuation">-</span>next<span class="token punctuation">-</span>canvas<span class="token punctuation">-</span>nest.git source/lib/canvas<span class="token punctuation">-</span>nest
$ æœ€åï¼Œé‡æ–°ç¼–è¯‘éƒ¨ç½²å³å¯ï¼šhexo clean &amp;&amp; hexo g <span class="token punctuation">-</span>d

<span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">---</span><span class="token punctuation">-</span><span class="token punctuation">-</span>

<span class="token comment" spellcheck="true"># å¦å¤–ï¼Œè¿˜æœ‰ä¸€ç§æ–¹æ³•ä¹Ÿä¼šä½¿çº¿æ¡ç‰¹æ•ˆç”Ÿæ•ˆï¼Œä½†æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°è¿˜æ˜¯æç¤º </span>
<span class="token comment" spellcheck="true"># source/lib/canvas-nest/canvas-nest-nomobile.min.jsã€canvas-nest.min.js </span>
<span class="token comment" spellcheck="true"># è¿™2ä¸ªjsæ‰¾ä¸åˆ°çš„é”™è¯¯ã€‚æ•…ï¼Œè¿˜æ˜¯æ¨èä¸Šé¢çš„æ–¹æ³•ã€‚</span>
1. å½“å‰åšå®¢ç«™ç‚¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºæ–‡ä»¶ &lt;your_hexo_blog<span class="token punctuation">></span>/source/_data/footer.swig
2. footer.swigå†…å®¹ä¸ºï¼š&lt;script color="0<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>255" opacity="0.5" zIndex="<span class="token punctuation">-</span>1" count="99" src="https<span class="token punctuation">:</span>//cdn.jsdelivr.net/npm/canvas<span class="token punctuation">-</span>nest.js@1/dist/canvas<span class="token punctuation">-</span>nest.js"<span class="token punctuation">></span>&lt;/script<span class="token punctuation">></span>
3. åœ¨â€œ../themes/hexo<span class="token punctuation">-</span>theme<span class="token punctuation">-</span>next/_config.ymlâ€é…ç½®ä¸­æ‰¾åˆ° custom_file_path èŠ‚ç‚¹ï¼Œæ‰“å¼€æ³¨é‡Š â€œfooter<span class="token punctuation">:</span> source/_data/footer.swigâ€ è¿™ä¸€è¡Œã€‚
</code></pre>
<h1 id="æ·»åŠ ç«™å†…æœç´¢åŠŸèƒ½ï¼ˆsearchdbï¼‰"><a href="#æ·»åŠ ç«™å†…æœç´¢åŠŸèƒ½ï¼ˆsearchdbï¼‰" class="headerlink" title="æ·»åŠ ç«™å†…æœç´¢åŠŸèƒ½ï¼ˆsearchdbï¼‰"></a>æ·»åŠ ç«™å†…æœç´¢åŠŸèƒ½ï¼ˆsearchdbï¼‰</h1><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 1. å®‰è£… hexo-generator-searchdb æ’ä»¶</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
$ npm install <span class="token punctuation">-</span>g hexo<span class="token punctuation">-</span>generator<span class="token punctuation">-</span>searchdb <span class="token punctuation">-</span><span class="token punctuation">-</span>save <span class="token comment" spellcheck="true"># å¹²è„†å…¨å±€å®‰è£…å§ -g</span>

<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 2. åšå®¢æ ¹ç«™ç‚¹ä¸‹ï¼Œå³ &lt;your_hexo_blog>/_config.yml é…ç½® searchï¼š</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># Search</span>
<span class="token key atrule">search</span><span class="token punctuation">:</span>
  <span class="token key atrule">path</span><span class="token punctuation">:</span> search.xml    <span class="token comment" spellcheck="true">#ç´¢å¼•æ–‡ä»¶çš„è·¯å¾„ï¼Œç›¸å¯¹äºç«™ç‚¹æ ¹ç›®å½•</span>
  <span class="token key atrule">field</span><span class="token punctuation">:</span> post         <span class="token comment" spellcheck="true">#æœç´¢èŒƒå›´ï¼Œé»˜è®¤æ˜¯ postï¼Œè¿˜å¯ä»¥é€‰æ‹© pageã€allï¼Œè®¾ç½®æˆ all è¡¨ç¤ºæœç´¢æ‰€æœ‰é¡µé¢</span>
  <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">format</span><span class="token punctuation">:</span> html
  <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">10000        </span><span class="token comment" spellcheck="true">#é™åˆ¶æœç´¢çš„æ¡ç›®æ•°</span>

<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 3. nextä¸»é¢˜ä¸‹ï¼Œå³ &lt;your_hexo_blog>/themes/hexo-theme-next/_config.yml é…ç½® Local Searchï¼šæ‰“å¼€å¼€å…³</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token key atrule">local_search</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true  </span><span class="token comment" spellcheck="true"># æ‰“å¼€å¼€å…³</span>
  <span class="token comment" spellcheck="true"># If auto, trigger search by changing input.</span>
  <span class="token comment" spellcheck="true"># If manual, trigger search by pressing enter key or search button.</span>
  <span class="token key atrule">trigger</span><span class="token punctuation">:</span> auto
  <span class="token comment" spellcheck="true"># Show top n results per article, show all results by setting to -1</span>
  <span class="token key atrule">top_n_per_article</span><span class="token punctuation">:</span> <span class="token number">1</span>
  <span class="token comment" spellcheck="true"># Unescape html strings to the readable one.</span>
  <span class="token key atrule">unescape</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token comment" spellcheck="true"># Preload the search data when the page loads.</span>
  <span class="token key atrule">preload</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 4. æœ¬ä»¥ä¸ºåˆ°ç¬¬3æ­¥å°±okäº†ï¼Œå¯æƒœè¿˜æ˜¯ä¸è¡Œã€‚æœ€åï¼Œè¿˜éœ€è¦æŠŠ algolia_search å…³æ‰ã€‚å³ &lt;your_hexo_blog>/themes/hexo-theme-next/_config.yml é…ç½® algolia_searchï¼šå…³é—­å®ƒã€‚</span>
<span class="token comment" spellcheck="true"># Algolia Search</span>
<span class="token comment" spellcheck="true"># For more information: https://www.algolia.com</span>
<span class="token key atrule">algolia_search</span><span class="token punctuation">:</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false   </span><span class="token comment" spellcheck="true"># å…³é—­è¿™ä¸ª</span>
  <span class="token punctuation">...</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>

$ æœ€åï¼Œé‡æ–°ç¼–è¯‘éƒ¨ç½²å³å¯ï¼šhexo clean &amp;&amp; hexo g <span class="token punctuation">-</span>d
</code></pre>
<h1 id="æ·»åŠ æ‰“èµåŠŸèƒ½ï¼ˆRewardï¼‰"><a href="#æ·»åŠ æ‰“èµåŠŸèƒ½ï¼ˆRewardï¼‰" class="headerlink" title="æ·»åŠ æ‰“èµåŠŸèƒ½ï¼ˆRewardï¼‰"></a>æ·»åŠ æ‰“èµåŠŸèƒ½ï¼ˆRewardï¼‰</h1><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 1. ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œå³ï¼š&lt;your_hexo_blog>/themes/hexo-theme-next/_config.yml ã€‚ å¼€å¯èµèµåŠŸèƒ½ã€æä¾›æ”¶æ¬¾ç å›¾ç‰‡ç­‰ã€‚</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># Reward (Donate)</span>
<span class="token comment" spellcheck="true"># Front-matter variable (unsupport animation).</span>
<span class="token key atrule">reward_settings</span><span class="token punctuation">:</span>
  <span class="token comment" spellcheck="true"># If true, reward will be displayed in every article by default.</span>
  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
  <span class="token key atrule">animation</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">comment</span><span class="token punctuation">:</span> è‹¥å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Ÿæ±‚é¼“åŠ±ï¼Œæ±‚æ”¯æŒï¼   <span class="token comment" spellcheck="true"># æ‰“èµæŒ‰é’®ä¸Šæ–¹çš„æ–‡å­—</span>

<span class="token comment" spellcheck="true"># æ³¨ï¼šä¸ºäº†éšç§åŠé€šå¸¸ï¼Œæ­¤å¤„çš„èµèµç å›¾ç‰‡æˆ‘ä¸æ”¾åœ¨ä¸»é¢˜ä¸‹çš„imagesé‡Œï¼ˆhexo-nexté»˜è®¤æ˜¯è¿™é‡Œï¼‰ã€‚</span>
<span class="token comment" spellcheck="true"># æˆ‘æ–°å»º images åœ¨æ ¹ç«™ç‚¹çš„ source ä¸‹ï¼Œå³ï¼š&lt;hexo_blog>/source/imagesï¼Œä¸ _post/categories/tags/about/404 ç­‰ç›®å½•å¹³çº§ã€‚</span>
<span class="token key atrule">reward</span><span class="token punctuation">:</span>
  <span class="token key atrule">wechatpay</span><span class="token punctuation">:</span> ../../images/private/wechatpay.png   <span class="token comment" spellcheck="true">#/images/wechatpay.png</span>
  <span class="token key atrule">alipay</span><span class="token punctuation">:</span> ../../images/private/alipay.png         <span class="token comment" spellcheck="true">#/images/alipay.png</span>
  <span class="token comment" spellcheck="true">#paypal: /images/paypal.png</span>
  <span class="token comment" spellcheck="true">#bitcoin: /images/bitcoin.png</span>

<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 2. ä¿®æ”¹é»˜è®¤â€œæ‰“èµâ€æŒ‰é’®æ–‡å­—ï¼Œå³ï¼š&lt;hexo_blog>/themes/hexo-theme-next/languages/zh-CN.yml</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token key atrule">reward</span><span class="token punctuation">:</span>
  <span class="token key atrule">donate</span><span class="token punctuation">:</span> æ‰“èµæ”¯æŒ
  <span class="token punctuation">...</span>

<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token comment" spellcheck="true"># 3. ç®€å•ç¾åŒ–æ‰“èµä½ç½®ï¼Œå³ï¼š&lt;hexo_blog>/themes/hexo-theme-next/layout/_macro/post.swig ï¼Œå¦‚ï¼šæ·»åŠ ä¸€ä¸ªè™šçº¿åˆ†éš”ï¼Œæˆ–è€…ç§»åŠ¨èµèµåŒºåŸŸä½ç½®ã€‚</span>
<span class="token comment" spellcheck="true">#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~#</span>
<span class="token punctuation">...</span>
<span class="token punctuation">{</span>%<span class="token punctuation">-</span> if post.reward_settings.enable %<span class="token punctuation">}</span>
  &lt;hr<span class="token punctuation">></span>
  <span class="token punctuation">{</span><span class="token punctuation">{</span> partial('_partials/post/post<span class="token punctuation">-</span>reward.swig') <span class="token punctuation">}</span><span class="token punctuation">}</span>
  &lt;hr<span class="token punctuation">></span>
<span class="token punctuation">{</span>%<span class="token punctuation">-</span> endif %<span class="token punctuation">}</span>
<span class="token punctuation">...</span>
</code></pre>
<hr>
<h1 id="Front-Matter-ç³»åˆ—ä½¿ç”¨æŒ‡å—"><a href="#Front-Matter-ç³»åˆ—ä½¿ç”¨æŒ‡å—" class="headerlink" title="Front-Matter ç³»åˆ—ä½¿ç”¨æŒ‡å—"></a>Front-Matter ç³»åˆ—ä½¿ç”¨æŒ‡å—</h1><p>é€šå¸¸ï¼Œæ–‡ç« å¼€å¤´çš„ <code>fron-matteræ¨¡æ¿</code> ç¤ºä¾‹ä¸ºï¼š</p>
<pre class=" language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>
<span class="token key atrule">title</span><span class="token punctuation">:</span> æ ‡é¢˜
<span class="token key atrule">subtitle</span><span class="token punctuation">:</span> å­æ ‡é¢˜
<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2020-05-17 01:07:05</span>
<span class="token key atrule">top</span><span class="token punctuation">:</span> <span class="token number">100  </span><span class="token comment" spellcheck="true">#æ–‡ç« ç½®é¡¶æƒé‡ï¼Œè¶Šå¤§è¶Šé å‰ã€‚ä¸å¡«å†™ï¼Œé»˜è®¤é€šè¿‡åˆ›å»ºæ—¶é—´å€’åº</span>
<span class="token key atrule">categories</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token punctuation">[</span>åˆ†ç±»1<span class="token punctuation">,</span>1å­ç±»A<span class="token punctuation">]</span>
<span class="token punctuation">-</span> <span class="token punctuation">[</span>åˆ†ç±»1<span class="token punctuation">,</span>1å­ç±»B<span class="token punctuation">]</span>
<span class="token punctuation">-</span> <span class="token punctuation">[</span>åˆ†ç±»2<span class="token punctuation">,</span>2å­ç±»A<span class="token punctuation">]</span>
<span class="token punctuation">-</span> <span class="token punctuation">[</span>åˆ†ç±»2<span class="token punctuation">,</span>2å­ç±»B<span class="token punctuation">]</span>
<span class="token punctuation">-</span> <span class="token punctuation">[</span>åˆ†ç±»2<span class="token punctuation">,</span>2å­ç±»C<span class="token punctuation">]</span>
<span class="token punctuation">-</span> åˆ†ç±»3
<span class="token key atrule">keywords</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>å…³é”®å­—1<span class="token punctuation">,</span>å…³é”®å­—2<span class="token punctuation">,</span>å…³é”®å­—N<span class="token punctuation">...</span><span class="token punctuation">]</span>
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token punctuation">[</span>æ ‡ç­¾1<span class="token punctuation">]</span>
<span class="token punctuation">-</span> <span class="token punctuation">[</span>æ ‡ç­¾2<span class="token punctuation">]</span>
<span class="token punctuation">-</span> <span class="token punctuation">[</span>æ ‡ç­¾N<span class="token punctuation">...</span><span class="token punctuation">]</span>
<span class="token key atrule">comments</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
<span class="token punctuation">---</span>
</code></pre>
<h2 id="categoriesï¼ˆåˆ†ç±»ï¼‰"><a href="#categoriesï¼ˆåˆ†ç±»ï¼‰" class="headerlink" title="categoriesï¼ˆåˆ†ç±»ï¼‰"></a>categoriesï¼ˆåˆ†ç±»ï¼‰</h2><p>Hexo+next é»˜è®¤ä¸æ”¯æŒå¤šçº§åˆ†ç±»ï¼Œä½†å¯ä»¥é€šè¿‡ <code>[a,b,c,...]</code> æˆ– <code>- - ç©ºæ ¼ç¼©è¿›</code> 2ç§å½¢å¼æ¥å®ç°åˆ†ç±»å±‚çº§ã€‚</p>
<ul>
<li><p><strong>â˜æ ¼å¼1ï¼š</strong></p>
<blockquote>
<pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">categories</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token punctuation">[</span>çˆ¶åˆ†ç±»1<span class="token punctuation">,</span>çˆ¶åˆ†ç±»1çš„å­åˆ†ç±»1<span class="token punctuation">]</span>
<span class="token punctuation">-</span> <span class="token punctuation">[</span>çˆ¶åˆ†ç±»1<span class="token punctuation">,</span>çˆ¶åˆ†ç±»1çš„å­åˆ†ç±»2<span class="token punctuation">]</span>
<span class="token punctuation">-</span> <span class="token punctuation">[</span>çˆ¶åˆ†ç±»2<span class="token punctuation">,</span>çˆ¶åˆ†ç±»2çš„å­åˆ†ç±»1<span class="token punctuation">]</span>
<span class="token punctuation">-</span> <span class="token punctuation">[</span>çˆ¶åˆ†ç±»2<span class="token punctuation">,</span>çˆ¶åˆ†ç±»2çš„å­åˆ†ç±»2<span class="token punctuation">]</span>
<span class="token punctuation">-</span> åˆ†ç±»3
</code></pre>
</blockquote>
</li>
<li><p><strong>â˜æ ¼å¼2ï¼š</strong></p>
<blockquote>
<pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">categories</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token punctuation">-</span> çˆ¶åˆ†ç±»1
  <span class="token punctuation">-</span> çˆ¶åˆ†ç±»1çš„å­åˆ†ç±»1
  <span class="token punctuation">-</span> çˆ¶åˆ†ç±»1çš„å­åˆ†ç±»2
<span class="token punctuation">-</span> <span class="token punctuation">-</span> çˆ¶åˆ†ç±»2
  <span class="token punctuation">-</span> çˆ¶åˆ†ç±»2çš„å­åˆ†ç±»1
  <span class="token punctuation">-</span> çˆ¶åˆ†ç±»2çš„å­åˆ†ç±»2
<span class="token punctuation">-</span> <span class="token punctuation">-</span> åˆ†ç±»3
</code></pre>
</blockquote>
</li>
</ul>
<h2 id="tagsï¼ˆæ ‡ç­¾ï¼‰"><a href="#tagsï¼ˆæ ‡ç­¾ï¼‰" class="headerlink" title="tagsï¼ˆæ ‡ç­¾ï¼‰"></a>tagsï¼ˆæ ‡ç­¾ï¼‰</h2><ul>
<li><p><strong>â˜æ ¼å¼1ï¼š</strong></p>
<blockquote>
<pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">tags</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token punctuation">[</span>æ ‡ç­¾1<span class="token punctuation">]</span>
<span class="token punctuation">-</span> <span class="token punctuation">[</span>æ ‡ç­¾2<span class="token punctuation">]</span>
<span class="token punctuation">-</span> <span class="token punctuation">[</span>æ ‡ç­¾N<span class="token punctuation">...</span><span class="token punctuation">]</span>
</code></pre>
</blockquote>
</li>
<li><p><strong>â˜æ ¼å¼2ï¼š</strong></p>
<blockquote>
<pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">tags</span><span class="token punctuation">:</span>
<span class="token punctuation">-</span> <span class="token punctuation">-</span> æ ‡ç­¾1
<span class="token punctuation">-</span> <span class="token punctuation">-</span> æ ‡ç­¾2
<span class="token punctuation">-</span> <span class="token punctuation">-</span> æ ‡ç­¾N<span class="token punctuation">...</span>
</code></pre>
</blockquote>
</li>
</ul>
<h2 id="scaffoldsï¼ˆæ¨¡æ¿ï¼‰"><a href="#scaffoldsï¼ˆæ¨¡æ¿ï¼‰" class="headerlink" title="scaffoldsï¼ˆæ¨¡æ¿ï¼‰"></a>scaffoldsï¼ˆæ¨¡æ¿ï¼‰</h2><ul>
<li><p><code>draft.md</code>ï¼šå¯¹åº” <code>hexo new draft &#39;NewDraftName&#39; &gt; ./source/NewDraftName/index.md</code>    </p>
<blockquote>
<pre class=" language-text"><code class="language-text">#æ¨¡æ¿å¡«å……ä¾‹å¦‚ï¼š
---
title: {{ title }}
tags:
---
</code></pre>
</blockquote>
</li>
<li><p><code>page.md</code>ï¼šå¯¹åº” <code>hexo new page &#39;NewPageName&#39; &gt; ./source/NewPageName/index.md</code></p>
<blockquote>
<pre class=" language-text"><code class="language-text">#æ¨¡æ¿å¡«å……ä¾‹å¦‚ï¼š
---
title: {{ title }}      #æ ‡é¢˜
date: {{ date }}        #åˆ›å»ºæ—¥æœŸæ—¶é—´
comments: false         #ç¦æ­¢è¯„è®º
---
</code></pre>
</blockquote>
</li>
<li><p><code>post.md</code>ï¼šå¯¹åº” <code>hexo new &#39;NewPostName&#39; &gt; ./source/_post/NewPostName.md</code></p>
<blockquote>
<pre class=" language-text"><code class="language-text">#æ¨¡æ¿å¡«å……ä¾‹å¦‚ï¼š
---
title: {{ title }}
date: {{ date }}
comments: true
categories: 
- [cat1,cat1-1]
- [cat2]
#keywords: [å…³é”®å­—1,å…³é”®å­—2]
#top: 10000 #ç½®é¡¶æƒé‡
tags: 
- [tag1] 
- [tag2] 
---

æ‘˜è¦....

<!-- more -->

æ­£æ–‡...
</code></pre>
</blockquote>
</li>
</ul>
<h1 id="hexo-å†…ç½®æ ‡ç­¾æ’ä»¶"><a href="#hexo-å†…ç½®æ ‡ç­¾æ’ä»¶" class="headerlink" title="hexo å†…ç½®æ ‡ç­¾æ’ä»¶"></a>hexo å†…ç½®æ ‡ç­¾æ’ä»¶</h1><h2 id="å¦‚ä½•å¼•ç”¨ç«™å†…æ–‡ç« ï¼Ÿï¼ˆpos-linkï¼‰"><a href="#å¦‚ä½•å¼•ç”¨ç«™å†…æ–‡ç« ï¼Ÿï¼ˆpos-linkï¼‰" class="headerlink" title="å¦‚ä½•å¼•ç”¨ç«™å†…æ–‡ç« ï¼Ÿï¼ˆpos_linkï¼‰"></a>å¦‚ä½•å¼•ç”¨ç«™å†…æ–‡ç« ï¼Ÿï¼ˆpos_linkï¼‰</h2><p>åœ¨ hexo-markdown ä¸­å¦‚ä½•å¼•ç”¨ç«™å†…æ–‡ç« ï¼Œä½¿ç”¨å†…ç½®çš„æ ‡ç­¾æ’ä»¶ <code>post_link</code> å®ç°ï¼š</p>
<blockquote>
<pre class=" language-text"><code class="language-text">è¯­æ³•ï¼š
{% post_link æ–‡ç« æ–‡ä»¶åï¼ˆä¸è¦åç¼€ï¼‰ æ–‡ç« æ ‡é¢˜ï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨å¼•ç”¨æ–‡ç« titleï¼‰ %}

ç¤ºä¾‹ï¼š
{% post_link dev-tools/hexo/How-To-Config %}
{% post_link dev-tools/hexo/How-To-Config ã€Šå˜¿å˜¿ï¼Œå¼•ç”¨åå­—æˆ‘ä¿®æ”¹äº†ã€‹%}
</code></pre>
</blockquote>
]]></content>
      <categories>
        <category>æŠ€æœ¯ç¯‡</category>
        <category>å·¥å…·æŒ‡å—</category>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>ä¸ªæ€§åŒ–</tag>
        <tag>ç¾åŒ–</tag>
        <tag>ä¸»é¢˜</tag>
      </tags>
  </entry>
  <entry>
    <title>å¿«é€Ÿæ­å»º Hexo+Github/Gitee ä¸ªäººåšå®¢ï¼ˆå…¥é—¨ç¯‡1ï¼‰</title>
    <url>/dev-tools/hexo/Setup-Tutorial/</url>
    <content><![CDATA[<p>å¦‚ä»Šå„ç±»åšå®¢ç³»ç»Ÿä¸€å¤§å †ï¼Œæ‰€è°“èåœç™½èœå„æœ‰æ‰€çˆ±ã€‚ç”±äºä¸ªäººçœ‹é‡ hexo çš„ç®€æ´æ€§å’Œå…è´¹æ‰˜ç®¡ <a href="https://github.com/">Github</a>&#x2F;<a href="https://gitee.com/">Gitee</a> çš„åŸå› ï¼Œå°†å†³å®šæŠ˜è…¾å­¦ä¹  hexoï¼Œä»¥ä¾¿åæœŸå­¦å†™æŠ€æœ¯åšå®¢ã€å¤‡å¿˜ç¬”è®°ã€å’Œè®°å½•ç”Ÿæ´»ç‚¹æ»´ã€‚åºŸè¯ä¸å¤šè¯´ï¼ŒåŸºäºç½‘ä¸Šå­¦ä¹ æ•™ç¨‹ï¼Œä¸ªäººåšäº†å¦‚ä¸‹æ€»ç»“ã€‚</p>
<span id="more"></span>

<!-- [toc] -->

<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul>
<li><a href="https://hexo.io/zh-cn/">Hexoå®˜ç½‘</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/60578464">ä½¿ç”¨ Hexo+GitHub æ­å»ºä¸ªäººå…è´¹åšå®¢æ•™ç¨‹ï¼ˆå°ç™½å‘ï¼‰</a></li>
<li><a href="https://www.jianshu.com/p/8681ab76da08">ç”¨hexo+githubæ­å»ºå±äºè‡ªå·±çš„åšå®¢</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/136552969">éƒ¨ç½²Hexoè¸©è¿‡çš„å‘â€”node14.0é…ç½®hexo</a></li>
<li><a href="https://segmentfault.com/a/1190000002632530">hexoå¸¸ç”¨å‘½ä»¤ç¬”è®°</a></li>
<li><a href="https://hexo.io/docs/one-command-deployment">One-Command Deployment</a></li>
<li><a href="https://blog.csdn.net/weixin_45667885/article/details/101084532">HexoåŒæ—¶éƒ¨ç½²åœ¨GitHubã€Codingã€Gitee</a></li>
<li><a href="https://gavincrown.gitee.io/2020/07/06/Hexo%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E5%88%B0Github%E5%92%8CGitee/">Hexoåšå®¢éƒ¨ç½²åˆ°GitHubå’ŒGitee</a></li>
</ul>
<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è¶Šæ¥è¶Šå¤šçš„äººä½¿ç”¨ GitHub&#x2F;Gitee Pages æ¥æ­å»º Hexo é™æ€åšå®¢ç½‘ç«™ï¼Œå…¶æœ€å¸å¼•äººçš„è«è¿‡äºå®Œå…¨å…è´¹ä½¿ç”¨ï¼Œå¹¶ä¸”éå¸¸ç¨³å®šã€‚è™½ç„¶ã€‚hexo æ­å»ºè¿‡ç¨‹æ¯”è¾ƒéº»çƒ¦ï¼Œæœ‰ç‚¹æŠ˜è…¾ï¼Œä½†æ˜¯é…ç½®å®Œæˆåï¼ŒåŸºæœ¬ä¸éœ€è¦æ“å¿ƒç»´æŠ¤çš„äº‹ï¼Œç”šè‡³æ”¾äº†å‡ å¹´éƒ½å¿˜è®°äº†ï¼Œæ‰“å¼€æ¥çœ‹æ–‡ç« ä¾ç„¶è¿˜åœ¨ã€‚</p>
<p>æœ¬æ–‡å°±è¯¦ç»†ä»‹ç»ä¸‹å¦‚ä½•ä½¿ç”¨ Hexo + GitHub&#x2F;Gitee æ­å»ºå…è´¹ä¸ªäººåšå®¢ç½‘ç«™çš„æ•™ç¨‹ã€‚</p>
<p><em>PSï¼šGithub å’Œ Gitee åŸºæœ¬ç±»ä¼¼ï¼Œä¸»è¦åŒºåˆ«ä¸º Gitee ä¸ºå›½å†…å¼€å‘ï¼ŒæœåŠ¡å™¨åœ¨å›½å†…ç›¸æ¯”è¾ƒè®¿é—®æ¯”è¾ƒå¿«é€Ÿï¼Œæ‰€ä»¥æœ¬ç¯‡è®²è§£å¦‚ä½•åŒæ—¶éƒ¨ç½² hexo åˆ° Github&#x2F;Giteeã€‚</em></p>
<hr>
<p>å¼€å§‹å‰ï¼Œå†ä»‹ç»ä¸€ä¸‹ï¼š</p>
<ul>
<li><h2 id="GitHub-x2F-Gitee-Pages-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#GitHub-x2F-Gitee-Pages-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="GitHub&#x2F;Gitee Pages æ˜¯ä»€ä¹ˆï¼Ÿ"></a><a href="https://help.github.com/en/github/working-with-github-pages/about-github-pages">GitHub&#x2F;Gitee Pages æ˜¯ä»€ä¹ˆï¼Ÿ</a></h2><p>  GitHub Pages æ˜¯ç”± GitHub å®˜æ–¹æä¾›çš„ä¸€ç§å…è´¹çš„é™æ€ç«™ç‚¹æ‰˜ç®¡æœåŠ¡ï¼Œè®©æˆ‘ä»¬å¯ä»¥åœ¨ GitHub ä»“åº“é‡Œæ‰˜ç®¡å’Œå‘å¸ƒè‡ªå·±çš„é™æ€ç½‘ç«™é¡µé¢ã€‚åŒç†ï¼ŒGitee Pages æ˜¯ Gitee å®˜æ–¹ä¸»çš„æ‰˜ç®¡æœåŠ¡ã€‚</p>
</li>
<li><h2 id="Hexo-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Hexo-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Hexo æ˜¯ä»€ä¹ˆï¼Ÿ"></a><a href="https://hexo.io/zh-cn/">Hexo æ˜¯ä»€ä¹ˆï¼Ÿ</a></h2><p>  Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„é™æ€åšå®¢æ¡†æ¶ï¼Œå®ƒåŸºäº Node.js è¿è¡Œï¼Œå¯ä»¥å°†æˆ‘ä»¬æ’°å†™çš„ Markdown æ–‡æ¡£è§£ææ¸²æŸ“æˆé™æ€çš„ HTML ç½‘é¡µã€‚</p>
</li>
<li><h2 id="Hexo-GitHub-x2F-Gitee-æ–‡ç« å‘å¸ƒåŸç†"><a href="#Hexo-GitHub-x2F-Gitee-æ–‡ç« å‘å¸ƒåŸç†" class="headerlink" title="Hexo + GitHub&#x2F;Gitee æ–‡ç« å‘å¸ƒåŸç†"></a>Hexo + GitHub&#x2F;Gitee æ–‡ç« å‘å¸ƒåŸç†</h2><p>  åœ¨æœ¬åœ°æ’°å†™ Markdown æ ¼å¼æ–‡ç« åï¼Œé€šè¿‡ Hexo è§£ææ–‡æ¡£ï¼Œæ¸²æŸ“ç”Ÿæˆå…·æœ‰ä¸»é¢˜æ ·å¼çš„ HTML é™æ€ç½‘é¡µï¼Œå†æ¨é€åˆ° GitHub&#x2F;Gitee ä¸Šå®Œæˆåšæ–‡çš„å‘å¸ƒã€‚</p>
</li>
</ul>
<pre class=" language-text"><code class="language-text">graph LR
A(æ’°å†™æ–‡ç« .md) --> |hexo g| B(Hexoç”Ÿæˆé™æ€ç½‘é¡µ)
B --> |hexo d| C(éƒ¨ç½²åˆ°Github Pages)
C --> |è®¿å®¢| D(è¯¥åšå®¢é¦–é¡µxxx.github.io)
</code></pre>
<p><img src="http://pic3.zhimg.com/80/v2-a193a47cf70fe6ecf156e5f3d34920ea_1440w.jpg"></p>
<ul>
<li><h2 id="Hexo-çš„ä¼˜ç¼ºç‚¹"><a href="#Hexo-çš„ä¼˜ç¼ºç‚¹" class="headerlink" title="Hexo çš„ä¼˜ç¼ºç‚¹"></a>Hexo çš„ä¼˜ç¼ºç‚¹</h2><p>  <strong>ä¼˜ç‚¹</strong>ï¼šå…è´¹æ‰˜ç®¡åœ¨ GitHub&#x2F;Giteeï¼Œå®‰å…¨çœå¿ƒï¼›é™æ€ç«™ç‚¹ï¼Œè½»é‡å¿«é€Ÿï¼›å¯è‡ªç”±å®šåˆ¶ï¼›è¿ç§»æ–¹ä¾¿â€¦â€¦</p>
<p>  <strong>ä¸è¶³</strong>ï¼šå‘æ–‡ä¸ä¾¿ï¼Œä¾èµ–äºæœ¬åœ°ç¯å¢ƒï¼›æ›´é€‚åˆä¸ªäººåšå®¢ä½¿ç”¨ï¼›GitHub åœ¨å›½å†…è®¿é—®é€Ÿåº¦æœ‰ç‚¹ä¸å¿«ã€‚</p>
</li>
<li><h2 id="æ‰˜ç®¡ä¸åšå®¢åœ°å€ä¸€è§ˆè¡¨"><a href="#æ‰˜ç®¡ä¸åšå®¢åœ°å€ä¸€è§ˆè¡¨" class="headerlink" title="æ‰˜ç®¡ä¸åšå®¢åœ°å€ä¸€è§ˆè¡¨"></a>æ‰˜ç®¡ä¸åšå®¢åœ°å€ä¸€è§ˆè¡¨</h2><table>
<thead>
<tr>
<th align="center">æ‰˜ç®¡å¹³å°</th>
<th align="center">è®¿é—®åšå®¢åœ°å€æ ¼å¼</th>
<th align="center">ç¤ºä¾‹</th>
<th align="center">å¤‡æ³¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><a href="https://github.com/">https://github.com</a></td>
<td align="center">https:&#x2F;&#x2F;ç”¨æˆ·å.github.io</td>
<td align="center"><a href="https://jiyiqini.github.io/">https://jiyiqini.github.io</a></td>
<td align="center">å›½å†…è®¿é—®æ…¢</td>
</tr>
<tr>
<td align="center"><a href="https://gitee.com/">https://gitee.com</a></td>
<td align="center">https:&#x2F;&#x2F;ç”¨æˆ·å.gitee.io</td>
<td align="center"><a href="https://jiyiqini.gitee.io/">https://jiyiqini.gitee.io</a></td>
<td align="center">å›½å†…è®¿é—®å¿«</td>
</tr>
</tbody></table>
</li>
</ul>
<h1 id="åšå®¢æ­å»º"><a href="#åšå®¢æ­å»º" class="headerlink" title="åšå®¢æ­å»º"></a>åšå®¢æ­å»º</h1><p>ç”±äº Hexo åŸºäº Node.jsï¼Œæ­å»ºè¿‡ç¨‹ä¸­è¿˜éœ€è¦ä½¿ç”¨ npmï¼ˆNode.js å·²å¸¦ï¼‰ å’Œ gitï¼Œå› æ­¤å…ˆæ­å»ºæœ¬åœ°æ“ä½œç¯å¢ƒï¼Œå®‰è£… Node.js å’Œ Gitã€‚</p>
<ul>
<li>Node.jsï¼š<a href="https://nodejs.org/zh-cn">https://nodejs.org/zh-cn</a></li>
<li>Gitï¼š<a href="https://git-scm.com/downloads">https://git-scm.com/downloads</a></li>
</ul>
<p>ä¸‹è½½ Node.js å’Œ Git ç¨‹åºå¹¶å®‰è£…ï¼Œä¸€è·¯ç‚¹ â€œä¸‹ä¸€æ­¥â€ æŒ‰é»˜è®¤é…ç½®å®Œæˆå®‰è£…ã€‚</p>
<p>å®‰è£…å®Œæˆåï¼Œæ‰“å¼€ terminal ï¼Œä¾æ¬¡è¾“å…¥ <code>node -vã€npm -vã€ git --version</code> å¹¶å›è½¦ï¼Œå‡ºç°ç¨‹åºç‰ˆæœ¬å·å³å¯ã€‚</p>
<h2 id="1-æ­å»ºç¯å¢ƒ"><a href="#1-æ­å»ºç¯å¢ƒ" class="headerlink" title="1. æ­å»ºç¯å¢ƒ"></a>1. æ­å»ºç¯å¢ƒ</h2><ul>
<li><h3 id="å®‰è£…-git"><a href="#å®‰è£…-git" class="headerlink" title="å®‰è£… git"></a>å®‰è£… git</h3><p>  å¿½ç•¥ã€‚å…·ä½“è¯·ä¸‹è½½å®‰è£…åŒ…æˆ–ç»ˆç«¯å‘½ä»¤å®‰è£…å‡å¯ã€‚</p>
</li>
<li><h3 id="å®‰è£…-node-js"><a href="#å®‰è£…-node-js" class="headerlink" title="å®‰è£… node.js"></a>å®‰è£… node.js</h3><p>  å¿½ç•¥ã€‚å…·ä½“è¯·ä¸‹è½½å®‰è£…åŒ…æˆ–ç»ˆç«¯å‘½ä»¤å®‰è£…å‡å¯ã€‚</p>
</li>
<li><h3 id="ç”³è¯·-githubã€gitee-è´¦å·"><a href="#ç”³è¯·-githubã€gitee-è´¦å·" class="headerlink" title="ç”³è¯· githubã€gitee è´¦å·"></a>ç”³è¯· githubã€gitee è´¦å·</h3><p>  å¿½ç•¥ã€‚æœ¬æ–‡ç€é‡è®²è§£hexoï¼Œè¯·è‡ªè¡Œç½‘ä¸ŠæŸ¥é˜…ã€‚</p>
</li>
<li><h3 id="å®‰è£…-hexo"><a href="#å®‰è£…-hexo" class="headerlink" title="å®‰è£… hexo"></a>å®‰è£… hexo</h3><p>  å…·ä½“è¿‡ç¨‹è¯·çœ‹å¦‚ä¸‹ã€‚</p>
</li>
</ul>
<h2 id="2-è¿æ¥-github-x2F-gitee-ä¸-SSH-key"><a href="#2-è¿æ¥-github-x2F-gitee-ä¸-SSH-key" class="headerlink" title="2. è¿æ¥ github&#x2F;gitee ä¸ SSH-key"></a>2. è¿æ¥ github&#x2F;gitee ä¸ SSH-key</h2><h3 id="Step1ï¼šSSH-keyï¼ˆæ–¹ä¾¿å¤šç¯å¢ƒç®¡ç†ä¸åŒSSH-Keyï¼Œæ­¤å¤„ä»¥é…ç½®å¤šä¸ªssk-keyä¸ºä¾‹ï¼‰"><a href="#Step1ï¼šSSH-keyï¼ˆæ–¹ä¾¿å¤šç¯å¢ƒç®¡ç†ä¸åŒSSH-Keyï¼Œæ­¤å¤„ä»¥é…ç½®å¤šä¸ªssk-keyä¸ºä¾‹ï¼‰" class="headerlink" title="Step1ï¼šSSH-keyï¼ˆæ–¹ä¾¿å¤šç¯å¢ƒç®¡ç†ä¸åŒSSH-Keyï¼Œæ­¤å¤„ä»¥é…ç½®å¤šä¸ªssk-keyä¸ºä¾‹ï¼‰"></a>Step1ï¼šSSH-keyï¼ˆæ–¹ä¾¿å¤šç¯å¢ƒç®¡ç†ä¸åŒSSH-Keyï¼Œæ­¤å¤„ä»¥é…ç½®å¤šä¸ªssk-keyä¸ºä¾‹ï¼‰</h3><pre class=" language-bash"><code class="language-bash">1ï¼Œåˆ†åˆ«ç”Ÿæˆä¸åŒä½¿ç”¨ç¯å¢ƒçš„SSH-Keyï¼š

<span class="token comment" spellcheck="true"># ä¾‹1ï¼Œç”Ÿæˆ githubã€gitgee ä½¿ç”¨çš„ ssh-keyï¼Œå¹¶å•ç‹¬å‘½åç®¡ç†ä¸º github_id_rsa</span>
<span class="token comment" spellcheck="true"># ä¾‹2ï¼Œç”Ÿæˆ å…¬å¸(ä¾‹å¦‚ï¼šgitlab) ä½¿ç”¨çš„ ssh-keyï¼Œå¹¶å•ç‹¬å‘½åç®¡ç†ä¸º gitlab_id_rsa</span>
$ ssh-keygen -t rsa -C <span class="token string">"your_email@your_github.com"</span> -f ~/.ssh/github_id_rsa
$ ssh-keygen -t rsa -C <span class="token string">"your_email@your_gitee.com"</span>  -f ~/.ssh/gitee_id_rsa
$ ssh-keygen -t rsa -C <span class="token string">"your_email@your_gitlab.com"</span> -f ~/.ssh/gitlab_id_rsa
$ <span class="token punctuation">..</span>.

æœ€ç»ˆï¼Œåœ¨ ~/.ssh/ ç›®å½•ä¼šç”Ÿæˆ ç§é’¥å’Œå…¬é’¥ï¼ˆåˆ†åˆ«ä¸ºï¼šgithub_id_rsa/github_id_rsa.pubã€gitee_id_rsa/gitee_id_rsa.pubã€gitlab_id_rsa/gitlab_id_rsa.pubï¼‰ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†å…¬é’¥ä¸­çš„å†…å®¹ç²˜å¸–åˆ°å„è‡ªæœåŠ¡å™¨çš„ SSH-key çš„é…ç½®ä¸­å³å¯ã€‚

2ï¼Œæ·»åŠ ç§é’¥ï¼š

$ ssh-add ~/.ssh/github_id_rsa  <span class="token comment" spellcheck="true">#è¾“å‡ºä¾‹å¦‚ï¼šIdentity added: id_rsa (sh14****60@163)</span>
$ ssh-add ~/.ssh/gitee_id_rsa   <span class="token comment" spellcheck="true">#è¾“å‡ºä¾‹å¦‚ï¼šIdentity added: id_rsa (sh14****60@163)</span>
$ ssh-add ~/.ssh/gitlab_id_rsa  <span class="token comment" spellcheck="true">#è¾“å‡ºä¾‹å¦‚ï¼šIdentity added: github_id_rsa (sh14****60@163)</span>
$ <span class="token punctuation">..</span>.

å¦‚æœæ‰§è¡Œssh-addæ—¶æç¤º<span class="token string">"Could not open a connection to your authentication agent"</span>ï¼Œå¯ä»¥ç°æ‰§è¡Œå‘½ä»¤ï¼š

$ ssh-agent <span class="token function">bash</span>

ç„¶åï¼Œå†è¿è¡Œssh-addå‘½ä»¤ï¼š

<span class="token comment" spellcheck="true"># å¯ä»¥é€šè¿‡ ssh-add -l æ¥æ˜¾ç¤ºç§é’¥åˆ—è¡¨</span>
$ ssh-add -l
<span class="token comment" spellcheck="true"># è¾“å‡ºï¼ˆå¯¹åº”ssh-addæ·»åŠ çš„å¯†é’¥ï¼‰ï¼Œä¾‹å¦‚ï¼š</span>
<span class="token comment" spellcheck="true"># 3072 SHA256:IFMBBfvZvSb1+Gmrs******9HaY2f5x******Sw+atVY sh14****60@163.com (RSA)</span>
<span class="token comment" spellcheck="true"># 3072 SHA256:IFMBBfvZvF+d+Bgtf******9HaY2f5x******BstddYZ sh14****60@163.com (RSA)</span>
<span class="token comment" spellcheck="true"># 3072 SHA256:Z65IEans5+7mZ5Fj8******lbYa2Qk******UP54oUeE sh14****60@163.com (RSA)</span>

<span class="token comment" spellcheck="true"># å¯ä»¥é€šè¿‡ ssh-add -D æ¥æ¸…ç©ºç§é’¥åˆ—è¡¨</span>
$ ssh-add -D

ssh-addå‘½ä»¤æ˜¯æŠŠä¸“ç”¨å¯†é’¥æ·»åŠ åˆ°ssh-agentçš„é«˜é€Ÿç¼“å­˜ä¸­ã€‚è¯¥å‘½ä»¤ä½ç½®åœ¨/usr/bin/ssh-addï¼Œå‚æ•°é€‰é¡¹æœ‰ï¼š

-Dï¼šåˆ é™¤ssh-agentä¸­çš„æ‰€æœ‰å¯†é’¥. 
-dï¼šä»ssh-agentä¸­çš„åˆ é™¤å¯†é’¥ 
-e pkcs11ï¼šåˆ é™¤PKCS<span class="token comment" spellcheck="true">#11å…±äº«åº“pkcs1æä¾›çš„é’¥åŒ™ã€‚ </span>
-s pkcs11ï¼šæ·»åŠ PKCS<span class="token comment" spellcheck="true">#11å…±äº«åº“pkcs1æä¾›çš„é’¥åŒ™ã€‚ </span>
-Lï¼šæ˜¾ç¤ºssh-agentä¸­çš„å…¬é’¥ 
-lï¼šæ˜¾ç¤ºssh-agentä¸­çš„å¯†é’¥ 
-t lifeï¼šå¯¹åŠ è½½çš„å¯†é’¥è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œè¶…æ—¶ssh-agentå°†è‡ªåŠ¨å¸è½½å¯†é’¥ -Xï¼šå¯¹ssh-agentè¿›è¡Œè§£é” 
-xï¼šå¯¹ssh-agentè¿›è¡ŒåŠ é”

3ï¼Œåˆ›å»ºå¹¶ä¿®æ”¹configé…ç½®æ–‡ä»¶ï¼š

<span class="token comment" spellcheck="true"># åœ¨ ~/.ssh ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª config æ–‡ä»¶ï¼š</span>
$ <span class="token function">touch</span> config

æ·»åŠ å†…å®¹ï¼š

<span class="token comment" spellcheck="true"># github</span>
Host github.com
    HostName github.com
    PreferredAuthentications publickey
    IdentityFile ~/.ssh/github_id_rsa

<span class="token comment" spellcheck="true"># gitee</span>
Host gitee.com
    HostName gitee.com
    PreferredAuthentications publickey
    IdentityFile ~/.ssh/gitee_id_rsa

<span class="token comment" spellcheck="true"># gitlab</span>
Host gitlab.com
    HostName gitlab.com <span class="token comment" spellcheck="true">#è¿™é‡Œå¡«ä½ ä»¬å…¬å¸çš„gitç½‘å€å³å¯</span>
    PreferredAuthentications publickey
    IdentityFile ~/.ssh/gitlab_id_rsa

<span class="token comment" spellcheck="true"># æ›´å¤šssh-keyæ·»åŠ ...</span>

4ï¼Œæµ‹è¯•ï¼š

$ <span class="token function">ssh</span> -T git@github.com
$ <span class="token function">ssh</span> -T git@gitee.com

<span class="token comment" spellcheck="true"># è‹¥å‡ºé”™çš„è¯ï¼Œåˆ«æ€¥ï¼é€šè¿‡debugæ¥æŸ¥çœ‹è§£å†³å§ã€‚(å…¶ä¸­-v æ˜¯è¾“å‡ºç¼–è¯‘ä¿¡æ¯ï¼Œç„¶åæ ¹æ®ç¼–è¯‘ä¿¡æ¯è‡ªå·±å»è§£å†³é—®é¢˜å§)ï¼š</span>
$ <span class="token function">ssh</span> -vT git@github.com

è‹¥è¾“å‡ºï¼š  

Hi <span class="token operator">&lt;</span>your_ssh_user_name<span class="token operator">></span><span class="token operator">!</span> You've successfully authenticated, but <span class="token operator">&lt;</span>GitHub<span class="token operator">|</span>GITEE.COM<span class="token operator">|</span><span class="token punctuation">..</span>.<span class="token operator">></span> does not provide shell access.  

åˆ™è¡¨ç¤ºæˆåŠŸçš„è¿ä¸Š github äº†ã€‚ä¹Ÿå¯ä»¥è¯•è¯•é“¾æ¥å…¬å¸çš„ gitlab ã€‚è¿™æ ·ï¼Œå°±å¯ä»¥åœ¨ä¸åŒçš„ä»“åº“ï¼Œç”¨ä¸åŒçš„è´¦å·ç™»å½•äº†~~~
</code></pre>
<h3 id="Step2ï¼šåœ¨æ‰˜ç®¡å¹³å°ä¸Šæ·»åŠ å…¬é’¥æˆæƒï¼š"><a href="#Step2ï¼šåœ¨æ‰˜ç®¡å¹³å°ä¸Šæ·»åŠ å…¬é’¥æˆæƒï¼š" class="headerlink" title="Step2ï¼šåœ¨æ‰˜ç®¡å¹³å°ä¸Šæ·»åŠ å…¬é’¥æˆæƒï¼š"></a>Step2ï¼šåœ¨æ‰˜ç®¡å¹³å°ä¸Šæ·»åŠ å…¬é’¥æˆæƒï¼š</h3><ul>
<li><p>Github æ·»åŠ å…¬é’¥æˆæƒï¼š</p>
<pre class=" language-bash"><code class="language-bash">1ï¼ŒGithub -<span class="token operator">></span> Settings -<span class="token operator">></span> SSH and GPG keys
2ï¼ŒSSH keysé€‰é¡¹ -<span class="token operator">></span> New SSH keyã€‚
3ï¼ŒTitleï¼šéšä¾¿å–ä¸ªåå­—å³å¯ï¼Œå¦‚ï¼šSSH-key_myGithubã€‚
4ï¼ŒKeyï¼šå°†ä¹‹å‰åˆ›å»ºçš„ github å…¬é’¥ï¼ˆå³ github_id_rsa.pubï¼‰é‡Œçš„å†…å®¹ï¼Œå…¨å¤åˆ¶ç²˜è´´è¿›å»ã€‚
5ï¼Œç‚¹å‡»â€œAdd SSH keyâ€ï¼Œä¿å­˜ã€‚
</code></pre>
</li>
<li><p>Gitee æ·»åŠ å…¬é’¥æˆæƒï¼š</p>
<pre class=" language-bash"><code class="language-bash">1ï¼ŒGitee -<span class="token operator">></span> è®¾ç½® -<span class="token operator">></span> å®‰å…¨è®¾ç½®<span class="token comment" spellcheck="true">#SSHå…¬é’¥ã€‚</span>
2ï¼ŒSSHå…¬é’¥ -<span class="token operator">></span> æ·»åŠ å…¬é’¥ã€‚
3ï¼Œæ ‡é¢˜ï¼šéšä¾¿å–ä¸ªåå­—å³å¯ã€‚å¦‚ï¼šSSH-key_myGiteeã€‚
4ï¼Œå…¬é’¥ï¼šå°†ä¹‹å‰åˆ›å»ºçš„ gitee å…¬é’¥ï¼ˆå³ gitee_id_rsa.pubï¼‰é‡Œçš„å†…å®¹ï¼Œå…¨å¤åˆ¶ç²˜è´´è¿›å»ã€‚
5ï¼Œç‚¹å‡»â€œç¡®å®šâ€ï¼Œä¿å­˜ã€‚
</code></pre>
</li>
</ul>
<h3 id="Step3ï¼šéªŒè¯è¿æ¥"><a href="#Step3ï¼šéªŒè¯è¿æ¥" class="headerlink" title="Step3ï¼šéªŒè¯è¿æ¥"></a>Step3ï¼šéªŒè¯è¿æ¥</h3><pre class=" language-bash"><code class="language-bash">1ï¼Œè¿›å…¥ç»ˆç«¯ã€‚
2ï¼Œè¾“å…¥å‘½ä»¤ï¼šssh -T git@github.com <span class="token comment" spellcheck="true"># giteeï¼šssh -T git@gitee.com</span>
3ï¼Œè‹¥å‡ºç° â€œAre you sureâ€¦â€¦â€ï¼Œè¾“å…¥ <span class="token function">yes</span> å›è½¦ç¡®è®¤ã€‚
4ï¼Œæœ€åè¾“å‡º â€œHi <span class="token operator">&lt;</span>your_ssh_user_name<span class="token operator">></span><span class="token operator">!</span> You've successfully authenticated, but <span class="token operator">&lt;</span>GitHub<span class="token operator">|</span>GITEE.COM<span class="token operator">></span> does not provide shell access.  â€ï¼Œè¡¨ç¤ºæˆåŠŸè¿æ¥ã€‚
</code></pre>
<h2 id="3-åˆ›å»º-Github-x2F-Gitee-Pages-ä»“åº“"><a href="#3-åˆ›å»º-Github-x2F-Gitee-Pages-ä»“åº“" class="headerlink" title="3. åˆ›å»º Github&#x2F;Gitee Pages ä»“åº“"></a>3. åˆ›å»º Github&#x2F;Gitee Pages ä»“åº“</h2><h3 id="Github-Pages-ä»“åº“"><a href="#Github-Pages-ä»“åº“" class="headerlink" title="Github Pages ä»“åº“"></a>Github Pages ä»“åº“</h3><pre class=" language-bash"><code class="language-bash">1ï¼ŒGitHub ä¸»é¡µå³ä¸Šè§’åŠ å· -<span class="token operator">></span> New repositoryã€‚
2ï¼ŒRepository name ä¸­è¾“å…¥â€œç”¨æˆ·å.github.ioâ€ã€‚
3ï¼Œå‹¾é€‰ Publicã€‚å¿…é¡» Public æ‰èƒ½ä½¿ç”¨ã€‚ 
4ï¼Œå‹¾é€‰ â€œInitialize this repository with a READMEâ€ã€‚
5ï¼Œå¡«å¥½åç‚¹å‡» Create repository åˆ›å»ºã€‚
6ï¼Œåˆ›å»ºåé»˜è®¤è‡ªåŠ¨å¯ç”¨ HTTPSï¼Œåšå®¢åœ°å€ä¸ºï¼šhttps://ç”¨æˆ·å.github.ioã€‚
</code></pre>
<p>ä¾‹å¦‚ï¼Œæˆ‘çš„åšå®¢ï¼š<a href="https://jiyiqini.github.io/">https://jiyiqini.github.io</a></p>
<h3 id="Gitee-Pages-ä»“åº“"><a href="#Gitee-Pages-ä»“åº“" class="headerlink" title="Gitee Pages ä»“åº“"></a>Gitee Pages ä»“åº“</h3><pre class=" language-bash"><code class="language-bash">1ï¼ŒGitee ä¸»é¡µå³ä¸Šè§’åŠ å· -<span class="token operator">></span> æ–°å»ºä»“åº“ã€‚
2ï¼Œä»“åº“åç§°ä¸­è¾“å…¥â€œç”¨æˆ·åâ€ã€‚
3ï¼Œå‹¾é€‰â€œå¼€æºâ€æˆ–â€œç§æœ‰â€å‡å¯ã€‚å¯¹äºä¸ªäººåšå®¢å˜›ï¼Œç§æœ‰å§ã€‚
4ï¼Œå‹¾é€‰â€œåˆå§‹åŒ–ä»“åº“â€ï¼Œå…¶å®ƒçœ‹æƒ…å†µå¯é€‰ï¼ˆå¦‚ï¼šè®¾ç½®æ¨¡æ¿ã€é€‰æ‹©åˆ†æ”¯æ¨¡å‹ï¼‰ã€‚
5ï¼Œåˆ›å»ºå®Œæˆåï¼Œç‚¹å‡»è¯¥ä»“åº“çš„ â€œæœåŠ¡â€ -<span class="token operator">></span> Gitee Pages <span class="token operator">></span> å‹¾é€‰â€œå¼ºåˆ¶ä½¿ç”¨HTTPSâ€ -<span class="token operator">></span> å¯åŠ¨ã€‚åšå®¢åœ°å€ä¸ºï¼šhttps://ç”¨æˆ·å.gitee.ioã€‚
</code></pre>
<p>ä¾‹å¦‚ï¼Œæˆ‘çš„åšå®¢ï¼š<a href="https://jiyiqini.gitee.io/">https://jiyiqini.gitee.io</a></p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>Github repo æƒé™åªèƒ½ä¸º <code>public</code> ï¼Œè€Œ Gitee repo æƒé™å¯ä»¥æ˜¯ <code>public</code>ã€ä¹Ÿå¯æ˜¯ <code>private</code>ã€‚</li>
<li>Github çš„ repo name å¿…é¡»ä¸º <code>â€œç”¨æˆ·å.github.ioâ€</code> æ ¼å¼ï¼Œä»è€Œåšå®¢è®¿é—®åœ°å€ä¸ºï¼š<code>https://ç”¨æˆ·å.github.io</code>ï¼›è€Œ Gitee çš„ repo name ä»»æ„ã€‚***ä¸€èˆ¬ä¸ç”¨æˆ·åä¸€è‡´ï¼Œè¿™æ ·åšå®¢åœ°å€å°±æ¯”è¾ƒç®€æ´ï¼Œå½¢å¦‚ï¼š<code>https://ç”¨æˆ·å.gitee.io</code>***ã€‚è‹¥ repo name ä¸ä¿æŒä¸ç”¨æˆ·åä¸€è‡´ï¼Œåˆ™éœ€è¦æœ‰äºŒçº§ç›®å½•æ–¹å¯è®¿é—®ï¼Œå¦‚ï¼š<code>https://ç”¨æˆ·å.gitee.io/ä»“åº“å</code>ã€‚</li>
<li>Github åˆ›å»ºå¥½ä»“åº“ï¼Œé»˜è®¤ä¸º <code>HTTPS</code> ï¼Œè€Œ Gitee éœ€è¦å»æ‰‹åŠ¨å¼€å¯ï¼</li>
</ul>
<h2 id="4-Hexoåšå®¢ç³»ç»Ÿæ¥å…¥ï¼ˆæ ¸å¿ƒï¼‰"><a href="#4-Hexoåšå®¢ç³»ç»Ÿæ¥å…¥ï¼ˆæ ¸å¿ƒï¼‰" class="headerlink" title="4. Hexoåšå®¢ç³»ç»Ÿæ¥å…¥ï¼ˆæ ¸å¿ƒï¼‰"></a>4. Hexoåšå®¢ç³»ç»Ÿæ¥å…¥ï¼ˆæ ¸å¿ƒï¼‰</h2><h3 id="hexo-å®‰è£…ä¸åŸºæœ¬ä½¿ç”¨"><a href="#hexo-å®‰è£…ä¸åŸºæœ¬ä½¿ç”¨" class="headerlink" title="hexo å®‰è£…ä¸åŸºæœ¬ä½¿ç”¨"></a>hexo å®‰è£…ä¸åŸºæœ¬ä½¿ç”¨</h3><p>â˜ <a href="https://hexo.io/zh-cn/">Hexo</a>å®˜æ–¹æ­¥éª¤å‚è€ƒï¼š</p>
<blockquote>
<pre class=" language-bash"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> hexo-cli -g
$ hexo init blog
$ <span class="token function">cd</span> blog
$ <span class="token function">npm</span> <span class="token function">install</span>
$ hexo server
</code></pre>
</blockquote>
<p>â˜ Hexo åšå®¢æ–‡ä»¶å¤¹ç›®å½•ç»“æ„æ¦‚è§ˆï¼ˆ<a href="https://hexo.io/zh-cn/docs/setup">æ›´å¤šè¯¦æƒ…</a>ï¼‰ï¼š</p>
<pre class=" language-bash"><code class="language-bash"><span class="token keyword">.</span>
â”œâ”€â”€ _config.yml         <span class="token comment" spellcheck="true">#ç½‘ç‚¹çš„é…ç½®ä¿¡æ¯</span>
â”œâ”€â”€ db.json             <span class="token comment" spellcheck="true">#ç¼“å­˜æ–‡ä»¶</span>
â”œâ”€â”€ node_modules        <span class="token comment" spellcheck="true">#å®‰è£…çš„æ’ä»¶ä»¥åŠhexoæ‰€éœ€çš„ä¸€äº›node.jsæ¨¡å—ã€‚</span>
â”œâ”€â”€ package-lock.json   <span class="token comment" spellcheck="true">#åº”ç”¨ç¨‹åºçš„ä¿¡æ¯</span>
â”œâ”€â”€ package.json        <span class="token comment" spellcheck="true">#åº”ç”¨ç¨‹åºä¿¡æ¯ï¼Œé…ç½®hexoè¿è¡Œéœ€è¦çš„jsåŒ…ã€‚</span>
â”œâ”€â”€ public              <span class="token comment" spellcheck="true">#æœ€ç»ˆæ‰€è§ç½‘é¡µçš„æ‰€æœ‰å†…å®¹</span>
â”œâ”€â”€ scaffolds           <span class="token comment" spellcheck="true">#æ¨¡ç‰ˆæ–‡ä»¶å¤¹ã€‚å½“æ‚¨æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexoä¼šæ ¹æ®scaffoldæ¥å»ºç«‹æ–‡ä»¶ã€‚Hexoçš„æ¨¡æ¿æ˜¯æŒ‡åœ¨æ–°å»ºçš„æ–‡ç« æ–‡ä»¶ä¸­é»˜è®¤å¡«å……çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä¿®æ”¹scaffold/post.mdä¸­çš„Front-matterå†…å®¹ï¼Œé‚£ä¹ˆæ¯æ¬¡æ–°å»ºä¸€ç¯‡æ–‡ç« æ—¶éƒ½ä¼šåŒ…å«è¿™ä¸ªä¿®æ”¹ã€‚</span>
â”‚   â”œâ”€â”€ draft.md
â”‚   â”œâ”€â”€ page.md
â”‚   â””â”€â”€ post.md
â”œâ”€â”€ <span class="token function">source</span>              <span class="token comment" spellcheck="true">#å­˜æ”¾ç”¨æˆ·èµ„æºï¼Œmdç­‰æ–‡æ¡£ã€‚é™¤ _posts æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º _ (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ / æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚Markdownå’ŒHTML æ–‡ä»¶ä¼šè¢«è§£æå¹¶æ”¾åˆ° public æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡å»ã€‚</span>
â”‚   â””â”€â”€ _posts
â””â”€â”€ themes              <span class="token comment" spellcheck="true">#ä¸»é¢˜ æ–‡ä»¶å¤¹ã€‚Hexo ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚</span>
</code></pre>
<p><em><strong>å…·ä½“ä¸ªäººæ­å»ºæ­¥éª¤ï¼š</strong></em></p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># ********** 1ï¼Œnpmå®‰è£…hexoåšå®¢ç¨‹åºï¼š</span>
$ <span class="token function">sudo</span> <span class="token function">npm</span> <span class="token function">install</span> -g hexo-cli


<span class="token comment" spellcheck="true"># ********** 2ï¼Œhexoåˆå§‹åŒ–åŠç›¸å…³ä¾èµ–ï¼š</span>
<span class="token comment" spellcheck="true"># å‡è®¾ï¼Œæˆ‘çš„åšå®¢æ”¾åœ¨ï¼š ~/MyBlogs/Hexo-Blogs</span>
$ <span class="token function">cd</span> ~/MyBlogs/Hexo-Blogs <span class="token comment" spellcheck="true">#è¿›å…¥å­˜æ”¾hexoåšå®¢ç¨‹åºçš„ç›®æ ‡ç›®å½•</span>
$ hexo init     <span class="token comment" spellcheck="true">#åˆå§‹åŒ–ã€‚äº¦å¯ï¼šè¿›å…¥ä¸Šä¸€çº§ç›®å½•~/MyBlogsä¸‹ï¼Œå†ç›´æ¥ hexo init Hexo-Blogsã€‚</span>
$ <span class="token function">npm</span> <span class="token function">install</span>   <span class="token comment" spellcheck="true">#å®‰è£…ä¾èµ–ç»„ä»¶</span>


<span class="token comment" spellcheck="true"># ********** 3ï¼Œç”Ÿæˆä¸é¢„è§ˆï¼š</span>
$ hexo g    <span class="token comment" spellcheck="true">#ç”Ÿæˆé™æ€é¡µé¢ã€‚æˆ–hexo generate</span>
$ hexo s    <span class="token comment" spellcheck="true">#å¯åŠ¨æœ¬åœ°é¢„è§ˆã€‚æˆ–hexo server</span>
<span class="token comment" spellcheck="true"># æµè§ˆå™¨æ‰“å¼€ç»ˆç«¯æç¤ºçš„urlï¼šhttp://localhost:4000ã€‚è‹¥å‡ºç°é»˜è®¤çš„hexoé¡µé¢ï¼Œè¡¨ç¤ºæœ¬åœ°åšå®¢æˆåŠŸã€‚</span>
<span class="token comment" spellcheck="true"># Tipsï¼šå¦‚æœå‡ºç°é¡µé¢åŠ è½½ä¸å‡ºæ¥ï¼Œå¯èƒ½æ˜¯ç«¯å£è¢«å ç”¨äº†ã€‚Ctrl+C å…³é—­æœåŠ¡å™¨ï¼Œè¿è¡Œ hexo server -p 5000 æ›´æ”¹ç«¯å£å·åé‡è¯•ã€‚</span>

<span class="token comment" spellcheck="true"># ********** 4ï¼Œéƒ¨ç½² Hexo åˆ° GitHub Pages</span>
<span class="token comment" spellcheck="true"># æœ¬åœ°åšå®¢æµ‹è¯•æˆåŠŸåï¼Œå°±æ˜¯ä¸Šä¼ åˆ° GitHub è¿›è¡Œéƒ¨ç½²ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨ç½‘ç»œä¸Šè®¿é—®ã€‚</span>
$ <span class="token function">npm</span> <span class="token function">install</span> hexo-deployer-git --save <span class="token comment" spellcheck="true">#å®‰è£… hexo-deployer-gitã€‚å¦åˆ™å¯èƒ½ä¼šå‡ºé”™â€œerror deployer not found:git/githubâ€</span>
$ ä¿®æ”¹ <span class="token punctuation">..</span>/<span class="token punctuation">{</span>your_hexo_blog<span class="token punctuation">}</span>/_config.yml<span class="token variable">$deploy</span> ä¸­ Deployment éƒ¨åˆ†å¹¶ä¿å­˜ï¼š
    <span class="token comment" spellcheck="true"># Deployment</span>
    <span class="token comment" spellcheck="true">## Docs: https://hexo.io/docs/deployment.html</span>
    deploy:
      type: <span class="token function">git</span>
      repo: https://github.com/<span class="token punctuation">{</span>ç”¨æˆ·å<span class="token punctuation">}</span>/<span class="token punctuation">{</span>ç”¨æˆ·å<span class="token punctuation">}</span>.github.io.git
      branch: master
$ hexo d <span class="token comment" spellcheck="true">#å‘å¸ƒç½‘ç‚¹åˆ° Github Pages</span>
$ æµè§ˆå™¨è®¿é—® https://ç”¨æˆ·å.github.ioï¼Œç»“æŸ. <span class="token comment" spellcheck="true">#æ³¨æ„ï¼šç¬¬ä¸€æ¬¡å‘å¸ƒå¯èƒ½ä¼šæœ‰10åˆ†é’Ÿçš„å»¶è¿Ÿï¼Œåœ¨è¿™æœŸé—´å¯èƒ½çœ‹åˆ°çš„æ˜¯ç©ºç™½é¡µé¢ã€‚</span>
</code></pre>
<p>â˜ &#x3D;&#x3D;<em><strong>æ¯æ¬¡ä¿®æ”¹å®Œæœ¬åœ°çš„æ–‡ä»¶åå¿…é¡»æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä»¥é‡æ–°éƒ¨ç½²Github Pagesï¼š</strong></em>&#x3D;&#x3D;</p>
<pre class=" language-bash"><code class="language-bash">hexo clean              <span class="token comment" spellcheck="true">#æ¸…é™¤ç¼“å­˜</span>
hexo g æˆ– hexo generate <span class="token comment" spellcheck="true">#ç”Ÿæˆé™æ€é¡µé¢</span>
hexo d æˆ– deploy        <span class="token comment" spellcheck="true">#éƒ¨ç½²å‘å¸ƒã€‚å‘å¸ƒå‰æœ¬åœ°æ£€æŸ¥é¢„è§ˆä¸‹ï¼šhexo s -> http://localhost:4000</span>
</code></pre>
<h3 id="hexo-åŒæ—¶éƒ¨ç½²-Github-x2F-Gitee-Pages"><a href="#hexo-åŒæ—¶éƒ¨ç½²-Github-x2F-Gitee-Pages" class="headerlink" title="hexo åŒæ—¶éƒ¨ç½² Github&#x2F;Gitee Pages"></a>hexo åŒæ—¶éƒ¨ç½² Github&#x2F;Gitee Pages</h3><p>å³ï¼Œåœ¨æ‚¨çš„åšå®¢æ ¹ç›®å½•ä¸‹ï¼Œç¼–è¾‘ <code>_config.yml</code> é…ç½®æ–‡ä»¶ï¼Œè®¾ç½® <code>deploy</code> ï¼Œå¦‚ï¼š</p>
<pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># Deployment</span>
<span class="token comment" spellcheck="true">## Docs: https://hexo.io/docs/deployment.html</span>
<span class="token key atrule">deploy</span><span class="token punctuation">:</span>
  <span class="token comment" spellcheck="true"># å•å¹³å°éƒ¨ç½²ï¼Œä¸ç”¨ - åˆ†æ é…ç½®äº¦å¯ä»¥ï¼Œç›´æ¥å¦‚ä¸‹ï¼š</span>
  <span class="token comment" spellcheck="true"># ref: https://hexo.io/docs/one-command-deployment</span>
  <span class="token comment" spellcheck="true"># type: git</span>
  <span class="token comment" spellcheck="true"># repo: https://github.com/ç”¨æˆ·å/ç”¨æˆ·å.github.io.git</span>
  <span class="token comment" spellcheck="true"># #repo: https://gitee.com/ç”¨æˆ·å/ç”¨æˆ·å.git</span>
  <span class="token comment" spellcheck="true"># branch: master</span>
  
  <span class="token comment" spellcheck="true"># å¦‚æœä¸ºå¤šå¹³å°éƒ¨ç½²ï¼Œè¯·ç”¨ - åˆ†æ é…ç½®ï¼š</span>
<span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> git
  <span class="token key atrule">repo</span><span class="token punctuation">:</span> git@github.com<span class="token punctuation">:</span>ç”¨æˆ·å/ç”¨æˆ·å.github.io.git <span class="token comment" spellcheck="true">#æˆ– https://github.com/ç”¨æˆ·å/ç”¨æˆ·å.github.io.git</span>
  <span class="token key atrule">branch</span><span class="token punctuation">:</span> master
<span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> git 
  <span class="token key atrule">repo</span><span class="token punctuation">:</span> git@gitee.com<span class="token punctuation">:</span>ç”¨æˆ·å/ç”¨æˆ·å.git <span class="token comment" spellcheck="true">#æˆ– https://gitee.com/ç”¨æˆ·å/ç”¨æˆ·å.git</span>
  <span class="token key atrule">branch</span><span class="token punctuation">:</span> master
</code></pre>
<p><strong>æ³¨æ„äº‹é¡¹ï¼šGithub Pages éƒ¨ç½²åï¼Œæ”¯æŒè‡ªåŠ¨æ›´æ–°ï¼Œæ— éœ€é¢å¤–æ“ä½œï¼Œç¨ç­‰ä¸€å°ä¼šå°±å¯è®¿é—®äº†ï¼Œå›  Github æœåŠ¡å™¨åœ¨å›½å¤–ã€‚è€Œ Gitee Pages åˆ™ä¸ä¸€æ ·ï¼Œéƒ¨ç½²åï¼Œä¸æ”¯æŒè‡ªåŠ¨æ›´æ–°ï¼Œéœ€è¦æ‰‹åŠ¨å»ç‚¹å‡»æ›´æ–°åæ‰å¯ä»¥è®¿é—®ã€‚</strong></p>
<h3 id="æœ€åï¼Œä¸€é”®éƒ¨ç½²ã€‚"><a href="#æœ€åï¼Œä¸€é”®éƒ¨ç½²ã€‚" class="headerlink" title="æœ€åï¼Œä¸€é”®éƒ¨ç½²ã€‚"></a>æœ€åï¼Œä¸€é”®éƒ¨ç½²ã€‚</h3><p>é€šå¸¸ï¼Œæˆ‘æ¯”è¾ƒå–œæ¬¢ä½¿ç”¨ä¸€é”®æ“ä½œï¼š</p>
<blockquote>
<p><code>hexo clean &amp;&amp; hexo g -d</code> æˆ– <code>hexo clean &amp;&amp; hexo d -g</code></p>
</blockquote>
<h1 id="Hexoå¸¸ç”¨å‘½ä»¤"><a href="#Hexoå¸¸ç”¨å‘½ä»¤" class="headerlink" title="Hexoå¸¸ç”¨å‘½ä»¤"></a>Hexoå¸¸ç”¨å‘½ä»¤</h1><h2 id="HexoåŸºæœ¬å‘½ä»¤ï¼ˆâ˜…â˜…â˜…â˜…ï¼‰"><a href="#HexoåŸºæœ¬å‘½ä»¤ï¼ˆâ˜…â˜…â˜…â˜…ï¼‰" class="headerlink" title="HexoåŸºæœ¬å‘½ä»¤ï¼ˆâ˜…â˜…â˜…â˜…ï¼‰"></a>HexoåŸºæœ¬å‘½ä»¤ï¼ˆâ˜…â˜…â˜…â˜…ï¼‰</h2><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># åŸºæœ¬å¸¸ç”¨</span>
hexo <span class="token punctuation">[</span>-<span class="token punctuation">]</span>h<span class="token operator">|</span><span class="token function">help</span>              <span class="token comment" spellcheck="true">#æŸ¥çœ‹å¸®åŠ©</span>
hexo <span class="token punctuation">[</span>-<span class="token punctuation">]</span>v<span class="token operator">|</span>version           <span class="token comment" spellcheck="true">#æŸ¥çœ‹ hexo çš„ç‰ˆæœ¬ï¼ŒåŒ…æ‹¬ hexo æ‰€ä¾èµ–çš„ç»„ä»¶æ­£åœ¨ä½¿ç”¨çš„ç‰ˆæœ¬ï¼Œå¦‚ï¼šnodeã€v8â€¦â€¦</span>

hexo n/new <span class="token string">"postName"</span>       <span class="token comment" spellcheck="true">#æ–°å»ºæ–‡ç« ã€‚åœ¨sourceä¸‹_postä¸­ç”Ÿæˆä¸€ä¸ªâ€œpostName.mdâ€ï¼Œæ‰“å¼€å¼€å§‹å†™æ–‡ç« å³å¯ã€‚å³ï¼š/source/_post/&lt;postName.md></span>
hexo n/new page <span class="token string">"pageName"</span>  <span class="token comment" spellcheck="true">#æ–°å»ºé¡µé¢ã€‚åœ¨sourceä¸‹ç”Ÿæˆpageæ–‡ä»¶å¤¹é¡µå¹¶é»˜è®¤ç”Ÿæˆindex.mdï¼Œå³ï¼š/source/&lt;pageName>/index.md</span>

hexo g/generate             <span class="token comment" spellcheck="true">#ç”Ÿæˆé™æ€é¡µé¢è‡³publicç›®å½•</span>
hexo s/server               <span class="token comment" spellcheck="true">#å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œ'ctrl + c'å…³é—­serverï¼‰</span>
hexo d/deploy               <span class="token comment" spellcheck="true">#å°†.deployç›®å½•éƒ¨ç½²åˆ°GitHub</span>
hexo p/publish <span class="token punctuation">[</span>layout<span class="token punctuation">]</span> <span class="token operator">&lt;</span>filename<span class="token operator">></span>  <span class="token comment" spellcheck="true">#å‘è¡¨è‰ç¨¿</span>

<span class="token comment" spellcheck="true"># å®Œæˆåéƒ¨ç½²</span>
<span class="token comment" spellcheck="true"># ä¸¤ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯ç›¸åŒçš„ï¼ˆ--deployå…¨åç­‰ä»·äº-ç®€å†™ï¼‰</span>
hexo deploy --generate æˆ– hexo generate --deploy
<span class="token comment" spellcheck="true">#ç®€å†™å³ä¸ºï¼š</span>
hexo g -d æˆ– hexo d -g  <span class="token comment" spellcheck="true">#ç”Ÿæˆåå¹¶éƒ¨ç½²ï¼ˆgå’Œdé¡ºåºå¯äº¤æ¢ï¼‰</span>
hexo g -d -m <span class="token string">'message'</span>  <span class="token comment" spellcheck="true">#ç”Ÿæˆåå¹¶éƒ¨ç½²å¸¦git-commit message</span>

<span class="token comment" spellcheck="true"># æœåŠ¡å™¨</span>
hexo s/server                   <span class="token comment" spellcheck="true">#Hexo ä¼šç›‘è§†æ–‡ä»¶å˜åŠ¨å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œæ‚¨æ— é¡»é‡å¯æœåŠ¡å™¨ã€‚</span>
hexo s/server -s                <span class="token comment" spellcheck="true">#é™æ€æ¨¡å¼</span>
hexo s/server -p 5000           <span class="token comment" spellcheck="true">#æ›´æ”¹ç«¯å£ä¸º5000</span>
hexo s/server -i 192.168.1.1    <span class="token comment" spellcheck="true">#è‡ªå®šä¹‰ IP</span>

<span class="token comment" spellcheck="true"># ç›‘è§†æ–‡ä»¶å˜åŠ¨</span>
hexo generate               <span class="token comment" spellcheck="true">#ä½¿ç”¨ Hexo ç”Ÿæˆé™æ€æ–‡ä»¶å¿«é€Ÿè€Œä¸”ç®€å•</span>
hexo generate --watch       <span class="token comment" spellcheck="true">#ç›‘è§†æ–‡ä»¶å˜åŠ¨</span>

<span class="token comment" spellcheck="true"># list</span>
hexo list <span class="token operator">&lt;</span>type: page<span class="token operator">|</span>post<span class="token operator">|</span>route<span class="token operator">|</span>tag<span class="token operator">|</span>category<span class="token operator">></span>      <span class="token comment" spellcheck="true">#åˆ—å‡ºç½‘ç«™èµ„æ–™</span>
<span class="token comment" spellcheck="true"># å¦‚ï¼šhexo list page</span>
<span class="token comment" spellcheck="true"># âœ Hexo-Blogs (master) âœï¸  hexo list page </span>
<span class="token comment" spellcheck="true"># INFO  Validating config</span>
<span class="token comment" spellcheck="true"># INFO  Start processing</span>
<span class="token comment" spellcheck="true"># Date        Title       Path</span>
<span class="token comment" spellcheck="true"># 2020-05-16  æ ‡ç­¾æœç´¢    tags/index.md</span>
<span class="token comment" spellcheck="true"># 2020-05-16  æ–‡ç« åˆ†ç±»    categories/index.md</span>
<span class="token comment" spellcheck="true"># 2020-05-16  é¡µé¢ä¸å­˜åœ¨  404/index.md</span>
<span class="token comment" spellcheck="true"># 2020-05-16  å…³äºä»‹ç»    about/index.md</span>
<span class="token comment" spellcheck="true"># 2021-08-11  ç•™è¨€ç‰ˆ      contact/index.md</span>
<span class="token comment" spellcheck="true"># 2021-08-11  friends     friends/index.md</span>

<span class="token comment" spellcheck="true"># hexo è‰ç¨¿</span>
<span class="token comment" spellcheck="true"># è‰ç¨¿ï¼Œç›¸å½“äºâ€œç§å¯†æ–‡ç« â€ï¼Œä¸ä¼šè¢«æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šï¼Œé“¾æ¥ä¹Ÿæ— æ³•è®¿é—®</span>
hexo new draft <span class="token string">"mydraft"</span>    <span class="token comment" spellcheck="true">#ä¼šä¸ _post/_data åŒçº§ï¼Œç”Ÿæˆä¸€ä¸ª _drafts ç›®å½•ï¼Œè‰ç¨¿ â€œmydraftâ€ å­˜æ”¾äº â€œ_drafts/mydraft.mdâ€</span>
hexo s/server _drafts       <span class="token comment" spellcheck="true">#å¯åŠ¨è‰ç¨¿é¢„è§ˆï¼Œå³åœ¨ http://localhost:4000 é‡Œçœ‹åˆ°æ‰€æœ‰è‰ç¨¿æ–‡ç« </span>
render_drafts: <span class="token boolean">true</span>         <span class="token comment" spellcheck="true">#å¼ºè¡Œé¢„è§ˆæŸè‰ç¨¿æ–‡ç« ï¼Œåˆ™æ·»åŠ é…ç½®ã€‚</span>
hexo publish <span class="token punctuation">[</span>layout<span class="token punctuation">]</span> <span class="token operator">&lt;</span>filename<span class="token operator">></span>    <span class="token comment" spellcheck="true">#å‘å¸ƒï¼ˆç§»åŠ¨ï¼‰è‰ç¨¿æ–‡ç« åˆ° _data/ ä¸‹</span>
</code></pre>
<h2 id="Hexoå‡çº§"><a href="#Hexoå‡çº§" class="headerlink" title="Hexoå‡çº§"></a>Hexoå‡çº§</h2><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># ä½¿ç”¨æ·˜å®æºçš„ cnpm æ›¿æ¢ npm</span>
<span class="token comment" spellcheck="true"># è‹¥ç½‘ç»œå¥½ï¼Œè¿˜æ˜¯å°½é‡ä½¿ç”¨ npm ï¼Œä¸‡ä¸€ä½¿ç”¨ cnpm å‡ºç°æœªåŒæ­¥æˆ–è€…å…¶ä»–é—®é¢˜ï¼Œå½“ç„¶å¯èƒ½æ€§å°ã€‚</span>
<span class="token function">npm</span> <span class="token function">install</span> -g cnpm --registry<span class="token operator">=</span>https://registry.npm.taobao.org

cnpm <span class="token function">install</span> -g cnpm        <span class="token comment" spellcheck="true"># å‡çº§ npm</span>
cnpm cache clean -f         <span class="token comment" spellcheck="true"># æ¸…é™¤ npm ç¼“å­˜</span>

<span class="token operator">==</span><span class="token operator">=</span>æ›´æ–° hexo: è¿›å…¥ blog ç›®å½•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤<span class="token operator">==</span><span class="token operator">=</span> 
<span class="token comment" spellcheck="true"># æ›´æ–° package.json ä¸­çš„ hexo åŠä¸ªæ’ä»¶ç‰ˆæœ¬</span>
cnpm <span class="token function">install</span> -g npm-check   <span class="token comment" spellcheck="true"># æ£€æŸ¥ä¹‹å‰å®‰è£…çš„æ’ä»¶ï¼Œéƒ½æœ‰å“ªäº›æ˜¯å¯ä»¥å‡çº§çš„ </span>
cnpm <span class="token function">install</span> -g npm-upgrade <span class="token comment" spellcheck="true"># å‡çº§ç³»ç»Ÿä¸­çš„æ’ä»¶</span>
npm-check
npm-upgrade

<span class="token comment" spellcheck="true"># æ›´æ–° hexo åŠæ‰€æœ‰æ’ä»¶</span>
cnpm update

<span class="token comment" spellcheck="true"># ç¡®è®¤ hexo å·²ç»æ›´æ–°</span>
hexo -v
</code></pre>
<h1 id="Hexoä¸ªæ€§åŒ–è®¾ç½®ï¼ˆåŸºç¡€å…¥é—¨ï¼‰"><a href="#Hexoä¸ªæ€§åŒ–è®¾ç½®ï¼ˆåŸºç¡€å…¥é—¨ï¼‰" class="headerlink" title="Hexoä¸ªæ€§åŒ–è®¾ç½®ï¼ˆåŸºç¡€å…¥é—¨ï¼‰"></a>Hexoä¸ªæ€§åŒ–è®¾ç½®ï¼ˆåŸºç¡€å…¥é—¨ï¼‰</h1><p>æ­¤ç« èŠ‚ä»…è®²è§£ hexo å¦‚ä½•è®¾ç½®ä¸»é¢˜ï¼Œæ›´å¤šè¯¦ç»†è¯·ç§»æ­¥: <a href="/dev-tools/hexo/How-To-Config/" title="ã€Šå¦‚ä½•ç¾åŒ– hexo+next ä¸ªäººåšå®¢ï¼Ÿ(å…¥é—¨ç¯‡2)ã€‹">ã€Šå¦‚ä½•ç¾åŒ– hexo+next ä¸ªäººåšå®¢ï¼Ÿ(å…¥é—¨ç¯‡2)ã€‹</a></p>
<h2 id="ä¸»é¢˜åˆ‡æ¢"><a href="#ä¸»é¢˜åˆ‡æ¢" class="headerlink" title="ä¸»é¢˜åˆ‡æ¢"></a>ä¸»é¢˜åˆ‡æ¢</h2><p>Hexoå®˜æ–¹æ¨èæˆ–Githubä¸Šæœç´¢ï¼Œéƒ½æœ‰å¾ˆå¤šä¸»é¢˜ã€‚</p>
<blockquote>
<ol>
<li><a href="https://hexo.io/themes">https://hexo.io/themes</a></li>
</ol>
</blockquote>
<p>â˜ <strong>åˆ‡æ¢ä¸»é¢˜æ­¥éª¤ï¼š</strong></p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#********** 1ï¼Œè¿›å…¥&lt;your_blogs>/themsç›®å½•</span>
$ <span class="token function">cd</span> themes

<span class="token comment" spellcheck="true">#********** 2ï¼Œä¸‹è½½ä¸»é¢˜ï¼ˆä¾‹å¦‚ï¼šhttps://github.com/theme-next/hexo-theme-next.gitï¼‰</span>
$ <span class="token function">git</span> clone <span class="token operator">&lt;</span>git_theme_repo_url<span class="token operator">></span>

<span class="token comment" spellcheck="true">#********** 3, é…ç½®&lt;your_blogs>/_config.yml</span>
    <span class="token comment" spellcheck="true"># vim _config.yml</span>
    <span class="token comment" spellcheck="true"># Extensions</span>
    <span class="token comment" spellcheck="true">## Plugins: https://hexo.io/plugins/</span>
    <span class="token comment" spellcheck="true">## Themes: https://hexo.io/themes/</span>
    theme: hexo-theme-next <span class="token comment" spellcheck="true">#landscape</span>

<span class="token comment" spellcheck="true">#********** 4, é‡å¯serverï¼ˆæœ¬åœ°é¢„è§ˆæˆ–éƒ¨ç½²Githubï¼‰</span>
$ hexo clean <span class="token operator">&amp;&amp;</span> hexo g <span class="token operator">&amp;&amp;</span> hexo s    <span class="token comment" spellcheck="true">#æ›´æ–°å¹¶æœ¬åœ°é¢„è§ˆæœåŠ¡</span>
$ hexo cleann <span class="token operator">&amp;&amp;</span> hexo d -g          <span class="token comment" spellcheck="true">#æ›´æ–°å¹¶éƒ¨ç½²å‘å¸ƒ</span>
</code></pre>
<h2 id="å¸ƒå±€åˆ‡æ¢"><a href="#å¸ƒå±€åˆ‡æ¢" class="headerlink" title="å¸ƒå±€åˆ‡æ¢"></a>å¸ƒå±€åˆ‡æ¢</h2><h1 id="Hexoæ­å»ºé‡åˆ°é—®é¢˜ï¼ˆä»…å…¥é—¨å¸¸è§çš„å‡ ä¸ªï¼‰"><a href="#Hexoæ­å»ºé‡åˆ°é—®é¢˜ï¼ˆä»…å…¥é—¨å¸¸è§çš„å‡ ä¸ªï¼‰" class="headerlink" title="Hexoæ­å»ºé‡åˆ°é—®é¢˜ï¼ˆä»…å…¥é—¨å¸¸è§çš„å‡ ä¸ªï¼‰"></a>Hexoæ­å»ºé‡åˆ°é—®é¢˜ï¼ˆä»…å…¥é—¨å¸¸è§çš„å‡ ä¸ªï¼‰</h1><p>æ­¤ç« èŠ‚ä»…è®²è§£ hexo å…¥é—¨æ­å»ºä¸­é‡åˆ°çš„å‡ ä¸ªæŠ¥é”™ä¸è§£å†³ï¼Œæ›´å¤šå¼‚å¸¸ä¸å¤„ç†è¯·ç§»æ­¥: <a href="/dev-tools/hexo/Hexo-Issues/" title="ã€Šå¸¸è§çš„ Hexo æŠ¥é”™ä¸è§£å†³ã€‹">ã€Šå¸¸è§çš„ Hexo æŠ¥é”™ä¸è§£å†³ã€‹</a></p>
<ul>
<li><p>è‹¥å‡ºç° <code>error deployer not found:git æˆ–è€… error deployer not found:github</code> çš„é”™è¯¯ï¼š</p>
<blockquote>
<p><strong>è§£å†³åŠæ³•</strong>ï¼š</p>
<pre class=" language-bash"><code class="language-bash"><span class="token variable">$npm</span> <span class="token function">install</span> hexo-deployer-git --save
</code></pre>
</blockquote>
</li>
<li><p>è‹¥å‡ºç°ç±»ä¼¼ <code>FATAL can not read a block mapping entry; a multiline key may not be an implicit key at line 70, column 1: ...</code> é”™è¯¯ï¼š</p>
<blockquote>
<p><strong>è§£å†³åŠæ³•</strong>ï¼š</p>
<pre class=" language-bash"><code class="language-bash">_config.ymlä¸­é…ç½®é¡¹çš„å†’å·åé¢è¦ç”¨ç©ºæ ¼éš”å¼€ï¼Œå†è·Ÿé…ç½®å†…å®¹ã€‚
<span class="token comment" spellcheck="true">#ä¾‹å¦‚ï¼š</span>
<span class="token comment" spellcheck="true">#deploy:</span>
<span class="token comment" spellcheck="true">#  type: git</span>
<span class="token comment" spellcheck="true">#  repo: https://github.com/ç”¨æˆ·å/ç”¨æˆ·å.github.io.git</span>
<span class="token comment" spellcheck="true">#  branch: master</span>
</code></pre>
</blockquote>
</li>
<li><p>ä¸­æ–‡ä¹±ç é—®é¢˜ï¼š</p>
<blockquote>
<p><strong>è§£å†³åŠæ³•</strong>ï¼š</p>
<pre class=" language-bash"><code class="language-bash">å°†æ–‡ä»¶çš„å†…å®¹ç¼–ç æ”¹ä¸ºUTF8æ ¼å¼
</code></pre>
</blockquote>
</li>
<li><p><code>hexo sever</code>èƒ½å¤ŸæˆåŠŸè¿è¡Œï¼Œä½†æ˜¯ <code>localhost:4000</code> æ— æ³•è®¿é—®ï¼š</p>
<blockquote>
<p><strong>è§£å†³åŠæ³•</strong>ï¼š</p>
<pre class=" language-bash"><code class="language-bash">$ hexo s -p 5000 <span class="token comment" spellcheck="true">#æ”¹ç”¨å…¶ä»–ç«¯å£5000å¯åŠ¨</span>
</code></pre>
</blockquote>
</li>
<li><p><code>hexo d</code> å’Œ <code>hexo -v</code> è‹¥å‡ºç°å¦‚ä¸‹ç¨€å¥‡å¤æ€ªé”™è¯¯ï¼Œå·²ç¡®ä¿æ‰€æœ‰é…ç½®éƒ½æ­£ç¡®ï¼Œä½†è¿˜æ˜¯ä¼šæŠ¥é”™ï¼š</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># hexo -v æç¤ºé”™è¯¯ï¼š</span>
<span class="token punctuation">(</span>node:13857<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'lineno'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>Use <span class="token variable"><span class="token variable">`</span>node --trace-warnings <span class="token punctuation">..</span>.<span class="token variable">`</span></span> to show where the warning was created<span class="token punctuation">)</span>
<span class="token punctuation">(</span>node:13857<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'column'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>node:13857<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'filename'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>node:13857<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'lineno'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>node:13857<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'column'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>node:13857<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'filename'</span> of module exports inside circular dependency
hexo: 4.2.0
hexo-cli: 3.1.0
os: Darwin 19.4.0 darwin x64
node: 14.2.0 <span class="token comment" spellcheck="true">#------ã€‹æ³¨æ„è¿™ä¸€è¡Œï¼ï¼ï¼</span>
v8: 8.1.307.31-node.32
uv: 1.37.0
zlib: 1.2.11
brotli: 1.0.7
ares: 1.16.0
modules: 83
nghttp2: 1.40.0
napi: 6
llhttp: 2.0.4
openssl: 1.1.1g
cldr: 36.1
icu: 66.1
tz: 2019c
unicode: 13.0

<span class="token comment" spellcheck="true"># hexo d æç¤ºé”™è¯¯ï¼š</span>
<span class="token punctuation">(</span>node:13872<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'lineno'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>Use <span class="token variable"><span class="token variable">`</span>node --trace-warnings <span class="token punctuation">..</span>.<span class="token variable">`</span></span> to show where the warning was created<span class="token punctuation">)</span>
<span class="token punctuation">(</span>node:13872<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'column'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>node:13872<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'filename'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>node:13872<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'lineno'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>node:13872<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'column'</span> of module exports inside circular dependency
<span class="token punctuation">(</span>node:13872<span class="token punctuation">)</span> Warning: Accessing non-existent property <span class="token string">'filename'</span> of module exports inside circular dependency
INFO  Start processing
INFO  Files loaded <span class="token keyword">in</span> 125 ms
INFO  0 files generated <span class="token keyword">in</span> 42 ms
INFO  Deploying: <span class="token function">git</span>
INFO  Clearing .deploy_git folder<span class="token punctuation">..</span>.
INFO  Copying files from public folder<span class="token punctuation">..</span>.
FATAL Something's wrong. Maybe you can <span class="token function">find</span> the solution here: https://hexo.io/docs/troubleshooting.html
TypeError <span class="token punctuation">[</span>ERR_INVALID_ARG_TYPE<span class="token punctuation">]</span>: The <span class="token string">"mode"</span> argument must be integer. Received an instance of Object
</code></pre>
<blockquote>
<p><strong>è§£å†³åŠæ³•ï¼š</strong></p>
<ul>
<li><strong>åŸå› </strong>ï¼šä¸€èˆ¬ç”±äº hexo ä¸èƒ½ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ node ç‰ˆæœ¬ï¼ˆå¦‚ï¼Œæˆ‘çš„ç‰ˆæœ¬æ¯”è¾ƒé«˜ 14.2.0ï¼‰ ï¼Œå®‰è£…æˆ–åˆ‡æ¢ä¸ºæŸä¸ªä½çš„ç¨³å®šç‰ˆæœ¬å³å¯ï¼ˆå¦‚ï¼Œæˆ‘åˆ‡æ¢æˆ v12.22.4 å°±æ­£å¸¸äº†ï¼‰ã€‚</li>
<li><strong>è§£å†³</strong>ï¼š  <pre class=" language-bash"><code class="language-bash">$ <span class="token function">sudo</span> n stable   <span class="token comment" spellcheck="true">#nä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆæœ¬ã€‚è‹¥éœ€è¦åˆ‡æ¢å›æŒ‡å®šç‰ˆæœ¬ï¼Œåˆ™ä½¿ç”¨ sudo n 14.2.0(å³ç‰ˆæœ¬å·)</span>
$ hexo <span class="token function">v</span><span class="token operator">|</span>version  <span class="token comment" spellcheck="true">#æŸ¥çœ‹ç‰ˆæœ¬ï¼Œæ­£å¸¸äº†ã€‚</span>
$ hexo d<span class="token operator">|</span>deploy   <span class="token comment" spellcheck="true">#é‡æ–°å‘å¸ƒï¼Œæ­£å¸¸äº†ã€‚</span>
</code></pre>
</li>
</ul>
</blockquote>
</li>
</ul>
]]></content>
      <categories>
        <category>æŠ€æœ¯ç¯‡</category>
        <category>å·¥å…·æŒ‡å—</category>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>ç¯å¢ƒ</tag>
      </tags>
  </entry>
  <entry>
    <title>Android é‡è¦æŠ€èƒ½</title>
    <url>/interviews/android/Android-Resume-3/</url>
    <content><![CDATA[<p>Androidé¢è¯•ä¹‹ã€Šé‡è¦æŠ€èƒ½ã€‹æ€»ç»“ã€‚å¯¹äºç®€å•éƒ¨åˆ†ï¼Œåªåšæ€»ç»“ã€‚è‡³äºéš¾ç‚¹ï¼Œå°†åšè¿›ä¸€æ­¥åˆ†æä¸è®°å½•ã€‚</p>
<span id="more"></span>

<h1 id="å››å¤§ç»„ä»¶"><a href="#å››å¤§ç»„ä»¶" class="headerlink" title="å››å¤§ç»„ä»¶"></a>å››å¤§ç»„ä»¶</h1><blockquote>
<p><strong>Androidä¹‹å››å¤§ç»„ä»¶</strong>ï¼šActivityã€Serviceã€BroadcastReceiverã€ContentProviderã€‚  </p>
</blockquote>
<h2 id="Activityï¼ˆæ´»åŠ¨ï¼‰"><a href="#Activityï¼ˆæ´»åŠ¨ï¼‰" class="headerlink" title="Activityï¼ˆæ´»åŠ¨ï¼‰"></a>Activityï¼ˆæ´»åŠ¨ï¼‰</h2><p><strong>ï¼ˆ1ï¼‰ç®€ä»‹ä¸ç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li>ä½œç”¨äºè¡¨ç°ä¸šåŠ¡åŠŸèƒ½ï¼Œå³äº¤äº’ã€‚æœ‰ UI ç•Œé¢ï¼Œä¸å¯å¤„ç†è€—æ—¶ä»»åŠ¡ã€‚</li>
<li>Activity é—´é€šè¿‡ Intent é€šä¿¡ã€‚</li>
<li>å¿…é¡»åœ¨ AndroidManifest.xml ä¸­æ³¨å†Œé…ç½®ï¼Œä½¿ç”¨æ—¶ç³»ç»Ÿæ‰å¯è¯†åˆ«ã€‚</li>
</ol>
<p><strong>ï¼ˆ2ï¼‰Activity çš„ 4 ç§çŠ¶æ€ï¼š</strong></p>
<ol>
<li>è¿è¡Œä¸­ï¼ˆrunning&#x2F;activeï¼‰ï¼šå¯¹åº” <code>onResume</code> çŠ¶æ€ï¼Œä½äºæ ˆé¡¶ï¼Œäº¤äº’å¯è§ã€‚</li>
<li>æš‚åœï¼ˆpausedï¼‰ï¼šå¯¹åº” <code>onPause</code> çŠ¶æ€ï¼Œå¯è§+ä¸å¯äº¤äº’ã€‚</li>
<li>åœæ­¢ï¼ˆstoppedï¼‰ï¼šå¯¹åº” <code>onStop</code> çŠ¶æ€ï¼Œä¸å¯è§+ä¸å¯äº¤äº’ã€‚</li>
<li>é”€æ¯ï¼ˆdestroyedï¼‰ï¼šå¯¹åº” <code>onDestroy</code> çŠ¶æ€ï¼ŒActivity è¢«é”€æ¯äº†ã€‚</li>
</ol>
<p>å¯¹äºç†è§£ Activity çš„ 4 ç§çŠ¶æ€ï¼Œåº”ç»“åˆ <a href="#">Post not found: ??? Activity ç”Ÿå‘½å‘¨æœŸ</a> æ¥ç†è§£ã€‚</p>
<p><strong>ï¼ˆ3ï¼‰Activity çš„ç”Ÿå‘½å‘¨æœŸï¼š</strong></p>
<blockquote>
<p>é¦–å…ˆï¼ŒçŒ®ä¸Šå®˜æ–¹çš„ Activity ç”Ÿå‘½å‘¨æœŸå›¾ï¼š<br><img src="/../../../images/illustration/android/lifecycle-Activity&Fragment.png" alt="lifecycle-Activity&amp;Fragment.png"></p>
</blockquote>
<p><strong>æŒ‰é¡ºåºæ€»ç»“ Activiyt å„ç”Ÿå‘½å‘¨æœŸï¼š</strong></p>
<ul>
<li><code>onCreate</code></li>
<li><code>onReStart</code></li>
<li><code>onStart</code></li>
<li><code>onRestoreInstanceState</code>ï¼šç”¨äºæ¢å¤æ•°æ®ã€‚</li>
<li><code>onResume</code></li>
<li><code>onSaveInstanceState</code>ï¼š<strong>ç‰¹åˆ«æ³¨æ„</strong>ï¼Œ<code>onSaveInstanceState</code> å§‹ç»ˆåœ¨ <code>onStop</code> å‰ï¼ˆå¯èƒ½åœ¨ <code>onPause</code> å‰æˆ– <code>onPause~onStop</code>ï¼Œè™½ç„¶æµ‹è¯•å¤§å¤šæ•°æƒ…å†µåœ¨ <code>onPause</code> å‰ï¼‰ã€‚ç”¨äºä¿å­˜æ•°æ®ã€‚</li>
<li><code>onPause</code></li>
<li><code>onStop</code></li>
<li><code>onDestroy</code></li>
</ul>
<h2 id="Serviceï¼ˆæœåŠ¡ï¼‰"><a href="#Serviceï¼ˆæœåŠ¡ï¼‰" class="headerlink" title="Serviceï¼ˆæœåŠ¡ï¼‰"></a>Serviceï¼ˆæœåŠ¡ï¼‰</h2><p><strong>ï¼ˆ1ï¼‰ç®€ä»‹ä¸ç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li>ä½œç”¨äºåå°æœåŠ¡ï¼Œå³æ— æ¥è§¦äº¤äº’ï¼Œä½†æ— ï¼ˆæˆ–è¯´ä¸ä¾èµ–ï¼‰ UI ç•Œé¢ã€‚ä¸å¯å¤„ç†è€—æ—¶ä»»åŠ¡ã€‚</li>
<li>åŒ Activity ä¸€æ ·ï¼Œå¿…é¡»åœ¨ AndroidManifest.xml ä¸­æ³¨å†Œé…ç½®ï¼Œä½¿ç”¨æ—¶ç³»ç»Ÿæ‰å¯è¯†åˆ«ã€‚</li>
<li>è™½è¯´æ—  UI äº¤äº’ï¼Œé€‚äºé•¿æœŸè¿è¡Œä»»åŠ¡ï¼Œä½†åŒæ ·ä¸èƒ½å¤„ç†è€—æ—¶ä»»åŠ¡ï¼ˆ***åˆ‡è®°ï¼Œå‹¿å‘~***ï¼‰ã€‚éœ€è¦æ‰‹åŠ¨ç»“åˆçº¿ç¨‹ï¼Œå°†è€—æ—¶ä»»åŠ¡æ”¾åœ¨çº¿ç¨‹ä¸­å¤„ç†ã€‚å¦åˆ™ï¼Œå°±ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</li>
</ol>
<p><strong>ï¼ˆ2ï¼‰Service çš„ 2 ç§å¯åŠ¨æ–¹å¼ï¼š</strong></p>
<blockquote>
<ol>
<li><strong>ctxObj.startServiceï¼š</strong></li>
</ol>
<ul>
<li>æ­¤ç±»æœåŠ¡å¯åœ¨åå°æ— é™æœŸè¿è¡Œã€‚</li>
<li>ç”Ÿå‘½å‘¨æœŸï¼š<code>onCreate -&gt; onStartCommand -&gt; onDestroy</code></li>
<li>å¤šæ¬¡ <code>startService</code>ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ <code>onCreate</code>ï¼ˆ++å…±äº«ä¸€ä¸ªå®ä¾‹++ï¼‰ï¼Œä½†ä¼šå¤šæ¬¡æ‰§è¡Œ <code>onStartCommand</code>ã€‚</li>
<li>å› å¯åŠ¨å®ƒçš„ç»„ä»¶ï¼ˆå¦‚Activityï¼‰ä¸ Service æ²¡æœ‰å…³è”ï¼Œåœæ­¢éœ€è¦æ‰‹åŠ¨è°ƒç”¨ <code>stopService</code> æˆ– <code>stopSelf</code> ã€‚</li>
</ul>
<ol start="2">
<li><strong>ctxObj.bindServiceï¼š</strong></li>
</ol>
<ul>
<li>æ­¤ç±»æœåŠ¡è·Ÿéšç»‘å®šç»„ä»¶ï¼ˆå¦‚<code>Activity</code>ï¼‰çš„ç”Ÿå‘½å‘¨æœŸï¼Œé™¤éä¸­é€”æ‰‹åŠ¨ <code>unbindService</code> æ‰ä¼šæå‰åœæ­¢ã€‚</li>
<li>ç”Ÿå‘½å‘¨æœŸï¼š<code>onCreate -&gt; onBind -&gt; onUnbind -&gt; onDestroy</code></li>
<li>å¤šæ¬¡ <code>bindService</code>ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ <code>onCreate å’Œ onBind</code>ï¼ˆ++å…±äº«ä¸€ä¸ªå®ä¾‹++ï¼‰ã€‚</li>
<li>è°ƒç”¨ <code>unbindService</code> åï¼Œè‹¥è¯¥ service æ²¡æœ‰ä¸å…¶å®ƒ client ç»‘å®šæ—¶ï¼Œæ‰ä¼šçœŸæ­£åœ° destroy æ‰ï¼ˆService-Clientï¼š1-Nï¼Œè‹¥ Client è¿˜æœ‰ä¸€ä¸ªåœ¨ç»‘å®šç€è¯¥ Serviceï¼Œå…¶å°±ä¸ä¼šçœŸæ­£é”€æ¯ï¼Œé™¤éåˆ°æœ€åä¸€ä¸ªå…³è”è€… Client è§£ç»‘ä¸å†ä½¿ç”¨åã€‚ï¼‰</li>
</ul>
</blockquote>
<h2 id="BroadcastReceiverï¼ˆå¹¿æ’­æ¥æ”¶è€…ï¼‰"><a href="#BroadcastReceiverï¼ˆå¹¿æ’­æ¥æ”¶è€…ï¼‰" class="headerlink" title="BroadcastReceiverï¼ˆå¹¿æ’­æ¥æ”¶è€…ï¼‰"></a>BroadcastReceiverï¼ˆå¹¿æ’­æ¥æ”¶è€…ï¼‰</h2><p><strong>ï¼ˆ1ï¼‰ç®€ä»‹ä¸ç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li>å¹¿æ’­æ¥æ”¶å™¨ï¼Œæ˜¯ Android ä¸­çš„ä¸€ç§è½»é‡çº§æ¶ˆæ¯ä¼ è¾“-å“åº”æœºåˆ¶ã€‚</li>
<li>å¯åˆ†é™æ€æ³¨å†Œä¸åŠ¨æ€æ³¨å†Œã€‚</li>
</ol>
<p><strong>ï¼ˆ2ï¼‰5å¤§ç±»å¹¿æ’­ï¼š</strong></p>
<blockquote>
<ol>
<li>æ™®é€šå¹¿æ’­ï¼ˆNormal Broadcastï¼‰</li>
<li>ç³»ç»Ÿå¹¿æ’­ï¼ˆSystem Broadcastï¼‰</li>
<li>æœ‰åºå¹¿æ’­ï¼ˆOrdered Broadcastï¼‰</li>
<li>ç²˜æ€§å¹¿æ’­ï¼ˆSticky Broadcastï¼‰</li>
<li>Appåº”ç”¨å†…å¹¿æ’­ï¼ˆLocal Broadcastï¼‰</li>
</ol>
</blockquote>
<ol>
<li><strong>æ™®é€šå¹¿æ’­ï¼ˆNormal Broadcastï¼‰</strong></li>
</ol>
<p>æ³¨ï¼šæ˜¯ä¸€ç§å…¨å±€å¹¿æ’­ï¼Œå“ªæ€•ä¸åœ¨åŒä¸€Appï¼Œåªè¦ç›‘å¬ç›¸åŒçš„actionä¹Ÿä¼šæ”¶åˆ°ï¼æ¨èä½¿ç”¨LocalBroadcastï¼</p>
<blockquote>
<p><strong>Normal Broadcast çš„ä½¿ç”¨</strong>ï¼š<code>sendBroadcast(Intent)</code><br><strong>Normal Broadcast çš„ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æ­¤ç±»å¹¿æ’­å¯¹äºæ‰€æœ‰å¹¿æ’­æ¥æ”¶å™¨å‡å¯æ¥æ”¶ã€‚</li>
<li>åŒä¸€çº§åˆ«çš„æ¥æ”¶å™¨æ¥æ”¶é¡ºåºä¸ç¡®å®šã€‚</li>
<li>æ¥æ”¶å™¨ä¸èƒ½å¯¹å¹¿æ’­è¿›è¡Œå¤„ç†æˆ–ä¿®æ”¹ã€‚</li>
<li>æ¥æ”¶å™¨ä¸èƒ½æˆªæ–­å¹¿æ’­ï¼Œä»ç»§ç»­ä¼ æ’­ã€‚</li>
</ul>
</blockquote>
<ol start="2">
<li><strong>ç³»ç»Ÿå¹¿æ’­ï¼ˆSystem Broadcastï¼‰</strong></li>
</ol>
<p>ç³»ç»Ÿå†…ç½®è®¸å¤šå¹¿æ’­ï¼Œåªè¦æ˜¯æ¶‰åŠæ‰‹æœºåŸºæœ¬æ“ä½œéƒ½æœ‰ã€‚å¦‚ï¼šç”µè¯ã€çŸ­ä¿¡ã€ç”µé‡ã€å¼€æœºã€ç½‘ç»œå˜åŒ–ã€æ‹ç…§ç­‰ï¼Œéƒ½ä¼šå‘å‡ºç›¸åº”å¹¿æ’­ã€‚å¸¸è§ç³»ç»Ÿå¹¿æ’­ action æœ‰ï¼š</p>
<table>
<thead>
<tr>
<th>æ“ä½œ</th>
<th>action</th>
</tr>
</thead>
<tbody><tr>
<td>ç½‘ç»œå˜åŒ–</td>
<td>android.net.conn.CONNECTIVITY_CHANGE</td>
</tr>
<tr>
<td>å¼€å…³é£è¡Œæ¨¡å¼</td>
<td>Intent.ACTION_AIRPLANE_MODE_CHANGED</td>
</tr>
<tr>
<td>å……ç”µæ—¶æˆ–ç”µé‡å˜åŒ–</td>
<td>Intent.ACTION_BATTERY_CHANGED</td>
</tr>
<tr>
<td>ç”µé‡å……è¶³æ—¶ï¼ˆå³ä»ä½å˜åŒ–åˆ°é¥±æ»¡çŠ¶æ€ä¼šå‘å‡ºå¹¿æ’­ï¼‰</td>
<td>Intent.ACTION_BATTERY_OKAY</td>
</tr>
<tr>
<td>ç³»ç»Ÿå¯åŠ¨å®Œæˆåï¼ˆåªå¹¿æ’­ä¸€æ¬¡ï¼‰</td>
<td>Intent.ACTION_BOOT_COMPLETED</td>
</tr>
<tr>
<td>æŒ‰ä¸‹æ‹ç…§æ—¶çš„æ‹ç…§æŒ‰é”®ï¼ˆç¡¬ä»¶æŒ‰é”®ï¼‰</td>
<td>Intent.ACTION_CAMERA_BUTTON</td>
</tr>
<tr>
<td>é”å±</td>
<td>Intent.ACTION_CLOSE_SYSTEM_DIALOGS</td>
</tr>
<tr>
<td>è®¾å¤‡è®¾ç½®è¢«æ›´æ”¹ï¼ˆå¦‚ï¼šè¯­è¨€Localeã€æ–¹å‘Orientationï¼‰</td>
<td>Intent.ACTION_CONFIGURATION_CHANGED</td>
</tr>
<tr>
<td>æ’å…¥è€³æœºæ—¶</td>
<td>Intent.ACTION_HEADSET_PLUG</td>
</tr>
<tr>
<td>æœªæ­£ç¡®ç§»é™¤SDå¡ï¼ˆæ­£ç¡®æ­¥éª¤ï¼šè®¾ç½®-SDå¡å’Œè®¾å¤‡å†…å­˜-å¸è½½SDå¡ï¼‰</td>
<td>Intent.ACTION_MEDIA_BAD_REMOVAL</td>
</tr>
<tr>
<td>æ’å…¥å¤–éƒ¨å­˜å‚¨è£…ç½®ï¼ˆå¦‚ï¼šæ’å…¥SDå¡ï¼‰</td>
<td>Intent.ACTION_MEDIA_CHECKING</td>
</tr>
<tr>
<td>æˆåŠŸå®‰è£…APK</td>
<td>Intent.ACTION_PACKAGE_ADDED</td>
</tr>
<tr>
<td>æˆåŠŸå¸è½½APK</td>
<td>Intent.ACTION_PACKAGE_REMOVED</td>
</tr>
<tr>
<td>å±å¹•è¢«å…³é—­</td>
<td>Intent.ACTION_SCREEN_OFF</td>
</tr>
<tr>
<td>å±å¹•è¢«æ‰“å¼€</td>
<td>Intent.ACTION_SCREEN_ON</td>
</tr>
<tr>
<td>å…³é—­ç³»ç»Ÿæ—¶</td>
<td>Intent.ACTION_SHUTDOWN</td>
</tr>
<tr>
<td>é‡å¯è®¾å¤‡</td>
<td>Intent.ACTION_REBOOT</td>
</tr>
</tbody></table>
<p>ç›‘å¬è¿™äº›ç³»ç»Ÿå¹¿æ’­å¤ªç®€å•äº†ï¼Œåªéœ€æ³¨å†Œç›¸å…³çš„actionå³å¯ã€‚</p>
<ol start="3">
<li><strong>æœ‰åºå¹¿æ’­ï¼ˆOrdered Broadcastï¼‰</strong></li>
</ol>
<blockquote>
<p><strong>Ordered Broadcast çš„ä½¿ç”¨</strong>ï¼š<code>sendOrderedBroadcast(Intent)</code><br><strong>Ordered Broadcast çš„ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>æœ‰åºï¼Œä½“ç°åœ¨æ¥æ”¶å™¨ <code>intent-filter</code> çš„ <code>priority</code> å–å€¼ï¼ˆèŒƒå›´ï¼š[-1000,1000]ï¼‰ï¼Œä¼˜å…ˆçº§ä¸è®¾å€¼æˆæ­£æ¯”ã€‚</li>
<li>åŒä¸€çº§åˆ«ï¼ˆpriorityç›¸åŒï¼‰çš„æ¥æ”¶å™¨æ¥æ”¶é¡ºåºä¸ç¡®å®šã€‚</li>
<li>é«˜ä¼˜å…ˆçº§ï¼ˆhigh-priorityï¼‰æ¥æ”¶å™¨èƒ½å¯¹å¹¿æ’­è¿›è¡Œå¤„ç†æˆ–ä¿®æ”¹ã€‚åœ¨ <code>onRecieve</code> ä¸­è°ƒç”¨ <code>setResultExtras(Bundle)</code> å³å¯ï¼Œåç»­ä½ä¼˜å…ˆçº§ï¼ˆlow-priorityï¼‰æ¥æ”¶å™¨åœ¨ <code>onReceive</code> ä¸­è°ƒç”¨ <code>getResultExtras(Bundle)</code> è·å–è¢«ä¿®æ”¹è¿‡çš„å¹¿æ’­å†…å®¹ã€‚è‹¥ä»ç”¨ <code>getExtras()</code> çš„è¯ï¼Œå–åˆ°çš„ä»æ˜¯æºå¤´å¹¿æ’­ã€‚</li>
<li>é«˜ä¼˜å…ˆçº§ï¼ˆhigh-priorityï¼‰æ¥æ”¶å™¨èƒ½æˆªæ–­å¹¿æ’­ï¼ˆåœ¨ <code>onReceive</code> è°ƒç”¨ <code>abortBroadcast()</code> å³å¯ï¼ï¼‰ï¼Œé˜»æ­¢ç»§ç»­ä¼ æ’­ã€‚</li>
</ul>
</blockquote>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// OrderBroadcatä¾‹å­ï¼š</span>
<span class="token comment" spellcheck="true">//</span>
<span class="token comment" spellcheck="true">// 1. è‡ªå®šä¹‰MyBroadcastReceiver1</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBroadcastReceiver1</span> <span class="token keyword">extends</span> <span class="token class-name">BroadcastReceiver</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceive</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> Intent intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        String action <span class="token operator">=</span> intent<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String data <span class="token operator">=</span> intent<span class="token punctuation">.</span><span class="token function">getStringExtra</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">"App"</span><span class="token punctuation">,</span> String<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"action:%s, data:%s, context: %s"</span><span class="token punctuation">,</span> action<span class="token punctuation">,</span> data<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Bundle bundle <span class="token operator">=</span> null <span class="token operator">!=</span> intent<span class="token punctuation">.</span><span class="token function">getExtras</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> intent<span class="token punctuation">.</span><span class="token function">getExtras</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Bundle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bundle<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> <span class="token string">"è€å­ä¿®æ”¹è¿‡çš„data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setResultExtras</span><span class="token punctuation">(</span>bundle<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// è‡ªå®šä¹‰MyBroadcastReceiver2</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBroadcastReceiver2</span> <span class="token keyword">extends</span> <span class="token class-name">BroadcastReceiver</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceive</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> Intent intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        String action <span class="token operator">=</span> intent<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String data <span class="token operator">=</span> intent<span class="token punctuation">.</span><span class="token function">getStringExtra</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">"App"</span><span class="token punctuation">,</span> String<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"[2]action:%s, data:%s, context: %s"</span><span class="token punctuation">,</span> action<span class="token punctuation">,</span> data<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Bundle b <span class="token operator">=</span> <span class="token function">getResultExtras</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        data <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">"App"</span><span class="token punctuation">,</span> String<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"[2]action:%s, data:%s, context: %s"</span><span class="token punctuation">,</span> action<span class="token punctuation">,</span> data<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">"App"</span><span class="token punctuation">,</span> String<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"[2]bundle1:%s, getResultExtras:%s"</span><span class="token punctuation">,</span> intent<span class="token punctuation">.</span><span class="token function">getExtras</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getResultExtras</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        b<span class="token punctuation">.</span><span class="token function">putString</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> <span class="token string">"äºŒè€å­ä¿®æ”¹è¿‡çš„data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setResultExtras</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token comment" spellcheck="true">//abortBroadcast();//æˆªæ–­ç»§ç»­å¹¿æ’­</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// è‡ªå®šä¹‰MyBroadcastReceiver3</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBroadcastReceiver3</span> <span class="token keyword">extends</span> <span class="token class-name">BroadcastReceiver</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceive</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> Intent intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        String action <span class="token operator">=</span> intent<span class="token punctuation">.</span><span class="token function">getAction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        String data <span class="token operator">=</span> intent<span class="token punctuation">.</span><span class="token function">getStringExtra</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">"App"</span><span class="token punctuation">,</span> String<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"[3]action:%s, data:%s, context: %s"</span><span class="token punctuation">,</span> action<span class="token punctuation">,</span> data<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        Bundle b <span class="token operator">=</span> <span class="token function">getResultExtras</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        data <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">"App"</span><span class="token punctuation">,</span> String<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"[3]action:%s, data:%s, context: %s"</span><span class="token punctuation">,</span> action<span class="token punctuation">,</span> data<span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Log<span class="token punctuation">.</span><span class="token function">v</span><span class="token punctuation">(</span><span class="token string">"App"</span><span class="token punctuation">,</span> String<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"[3]bundle1:%s, getResultExtras:%s"</span><span class="token punctuation">,</span> intent<span class="token punctuation">.</span><span class="token function">getExtras</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">getResultExtras</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 2. xmlå¸ƒå±€æ–‡ä»¶ï¼Œä¸€ä¸ªæŒ‰é’®å‘é€orderedå¹¿æ’­</span>
<span class="token operator">&lt;</span>LineaLayout <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token operator">&lt;</span>Button 
        android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"å‘é€orderedå¹¿æ’­"</span>
        android<span class="token operator">:</span>onclick<span class="token operator">=</span><span class="token string">"performSendOrderedBroadcast"</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>LinearLayout<span class="token operator">></span>

<span class="token comment" spellcheck="true">// 3. åœ¨AndroidManifest.xmlä¸­é™æ€æ³¨å†Œï¼ˆå½“ç„¶ï¼ŒåŠ¨æ€ä¹Ÿå¯ä»¥ï¼Œè¿™é‡Œä¸ºäº†æ–¹ä¾¿æµ‹è¯•ä»¥å‡å°‘ä»£ç ï¼‰</span>
<span class="token operator">&lt;</span>manifest xmlns<span class="token operator">:</span>android<span class="token operator">=</span><span class="token string">"http://schemas.android.com/apk/res/android"</span><span class="token operator">></span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token operator">&lt;</span>application<span class="token operator">></span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token operator">&lt;</span>receiver android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">".MyBroadcastReceiver1"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>intent<span class="token operator">-</span>filter android<span class="token operator">:</span>priority<span class="token operator">=</span><span class="token string">"1000"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>action android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"com.hsong.intent.action.OrderedBroadcastReceiver"</span> <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>intent<span class="token operator">-</span>filter<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>receiver<span class="token operator">></span>
        <span class="token operator">&lt;</span>receiver android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">".MyBroadcastReceiver2"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>intent<span class="token operator">-</span>filter android<span class="token operator">:</span>priority<span class="token operator">=</span><span class="token string">"500"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>action android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"com.hsong.intent.action.OrderedBroadcastReceiver"</span> <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>intent<span class="token operator">-</span>filter<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>receiver<span class="token operator">></span>
        <span class="token operator">&lt;</span>receiver android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">".MyBroadcastReceiver3"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>intent<span class="token operator">-</span>filter android<span class="token operator">:</span>priority<span class="token operator">=</span><span class="token string">"250"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>action android<span class="token operator">:</span>name<span class="token operator">=</span><span class="token string">"com.hsong.intent.action.OrderedBroadcastReceiver"</span> <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>intent<span class="token operator">-</span>filter<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>receiver<span class="token operator">></span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>application<span class="token operator">></span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>manifest<span class="token operator">></span>


<span class="token comment" spellcheck="true">// 4. MyActivityç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyActivity</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">{</span>
    
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">performSendOrderedBroadcast</span><span class="token punctuation">(</span>View v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Intent intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        intent<span class="token punctuation">.</span><span class="token function">putExtra</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> <span class="token string">"Orderedå¹¿æ’­"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        intent<span class="token punctuation">.</span><span class="token function">setAction</span><span class="token punctuation">(</span>com<span class="token punctuation">.</span>hsong<span class="token punctuation">.</span>intent<span class="token punctuation">.</span>action<span class="token punctuation">.</span>OrderedBroadcastReceiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">sendOrderedBroadcast</span><span class="token punctuation">(</span>intent<span class="token punctuation">,</span> null<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>æµ‹è¯•ä¸ç»“æœï¼š</strong></p>
<pre class=" language-text"><code class="language-text">//receiver1çš„ç»“æœï¼š
[1]action:com.hsong.intent.action.OrderedBroadcastReceiver, data:Orderedå¹¿æ’­, context: android.app.ReceiverRestrictedContext@c314c02

//receiver2çš„ç»“æœï¼š
[2]action:com.hsong.intent.action.OrderedBroadcastReceiver, data:Orderedå¹¿æ’­, context: android.app.ReceiverRestrictedContext@c314c02
[2]action:com.hsong.intent.action.OrderedBroadcastReceiver, data:è€å­ä¿®æ”¹è¿‡çš„data, context: android.app.ReceiverRestrictedContext@c314c02
[2]bundle1:Bundle[{data=Orderedå¹¿æ’­}], getResultExtras:Bundle[{data=è€å­ä¿®æ”¹è¿‡çš„data}]

//receiver3çš„ç»“æœï¼šè‹¥receiver2ä¸­çš„abortBroadcast()è°ƒç”¨æˆªæ–­çš„è¯ï¼Œåˆ™receiver3ä¸ä¼šæ”¶åˆ°äº†ï¼Œå…¶ä»–åé¢çš„receiversä¹Ÿä¸€æ ·æ”¶ä¸åˆ°äº†ã€‚
[3]action:com.hsong.intent.action.OrderedBroadcastReceiver, data:Orderedå¹¿æ’­, context: android.app.ReceiverRestrictedContext@c314c02
[3]action:com.hsong.intent.action.OrderedBroadcastReceiver, data:äºŒè€å­ä¿®æ”¹è¿‡çš„data, context: android.app.ReceiverRestrictedContext@c314c02
[3]bundle1:Bundle[{data=Orderedå¹¿æ’­}], getResultExtras:Bundle[{data=äºŒè€å­ä¿®æ”¹è¿‡çš„data}]
</code></pre>
<p>ä»ä¸Šå¯ä»¥å‘ç°ï¼Œè™½ç„¶é«˜ä¼˜å…ˆçº§çš„receiver(1)ä¿®æ”¹çš„å¹¿æ’­ç»­ä¼ å†…å®¹ï¼Œä½†æ˜¯receiver(2)ä¸­ intent.getExtras() çš„å€¼å´æ˜¯ä¸å˜çš„ï¼ˆè¿˜æ˜¯senderå‘å‡ºé‚£äº›ï¼‰ã€‚å¦‚æœè¦è·å–è¢«å‰é¢æˆ–è€…é«˜ä¼˜å…ˆçº§çš„receiverä¿®æ”¹è¿‡çš„å†…å®¹çš„è¯ï¼Œåº”è¯¥è°ƒç”¨ getResultExtras() ã€‚</p>
<ol start="4">
<li><strong>ç²˜æ€§å¹¿æ’­ï¼ˆSticky Broadcastï¼‰</strong></li>
</ol>
<blockquote>
<p><strong>Sticky Broadcast çš„ä½¿ç”¨</strong>ï¼š<code>sendStickyBroadcast(Intent)</code><br><strong>Sticky Broadcast çš„ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>sendStickyBroadcast</code> API è¿˜å¿…é¡»åœ¨ <code>AndroidManifest.xml</code> ä¸­æ·»åŠ æƒé™ <code>&lt;use-permission android:name=&quot;android.permission.BROADCAST_STICKY&quot;/&gt;</code></li>
<li>æ­¤ç±»å¹¿æ’­æœ€å¤§ç‰¹ç‚¹æ˜¯ï¼Œ<code>sendStickyBroadcast(Intent)</code> çš„ Intent ä¼šä¸€ç›´ä¿ç•™åˆ°æ­¤å¹¿æ’­äº‹ä»¶ç»“æŸï¼ˆå³è¢« onReceive() æ¶ˆè´¹æ‰ï¼‰ï¼Œä¸”å…¶ä¸åƒæ™®é€šå¹¿æ’­æœ‰ 10s è¶…æ—¶ ANR é™åˆ¶ã€‚é‚£ä»…å¯¹äº <em>æ™®é€šå¹¿æ’­</em> è€Œè¨€ï¼Œè‹¥å…¶ <code>onReceive()</code> æ‰§è¡Œå¤ªä¹…ï¼Œè¶…è¿‡ 10s å°±ä¼šè¢«ç³»ç»Ÿç½®ä¸º ***å¯å¹²æ‰çš„ <code>candidate</code> ***ï¼Œä¸€æ—¦ç³»ç»Ÿèµ„æºä¸å¤Ÿç”¨å°±ä¼šè¢«ç³»ç»Ÿé”€æ¯æ­¤ <code>candidateå¹¿æ’­</code>ï¼Œä¸è®©å…¶æ‰§è¡Œã€‚</li>
</ul>
</blockquote>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// StickyBroadcatä¾‹å­ï¼š</span>
<span class="token comment" spellcheck="true">//</span>
<span class="token comment" spellcheck="true">// 1. è‡ªå®šä¹‰MyBroadcastReceiver</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBroadcastReceiver</span> <span class="token keyword">extends</span> <span class="token class-name">BroadcastReceiver</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceive</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> Intent intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string">"æˆ‘æ”¶åˆ°stickyå¹¿æ’­äº†~"</span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 2. xmlå¸ƒå±€æ–‡ä»¶ï¼Œä¸€ä¸ªæŒ‰é’®å‘é€stickyå¹¿æ’­ï¼Œä¸€ä¸ªæ³¨å†Œå¹¿æ’­æ¥æ”¶å™¨</span>
<span class="token operator">&lt;</span>LineaLayout <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token operator">&lt;</span>Button 
        android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"å‘é€stickyå¹¿æ’­"</span>
        android<span class="token operator">:</span>onclick<span class="token operator">=</span><span class="token string">"performSendStickyBroadcast"</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>Button 
        android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"æ³¨å†Œå¹¿æ’­seceiver"</span>
        android<span class="token operator">:</span>onclick<span class="token operator">=</span><span class="token string">"performRegisterBroadcastReceiver"</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>LinearLayout<span class="token operator">></span>

<span class="token comment" spellcheck="true">// 3. MyActivityç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyActivity</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> MyBroadcastReceiver mReceiver<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">performSendStickyBroadcast</span><span class="token punctuation">(</span>View v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Intent intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token string">"com.myintent.stickybroadcast"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">sendStickyBroadcast</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">performRegisterBroadcastReceiver</span><span class="token punctuation">(</span>View v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        IntentFilter filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntentFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">setAction</span><span class="token punctuation">(</span><span class="token string">"com.myintent.stickybroadcast"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mReceiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyBroadcastReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">registerReceiver</span><span class="token punctuation">(</span>mReceiver<span class="token punctuation">,</span> filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">unregisterReceiver</span><span class="token punctuation">(</span>mReceiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>æµ‹è¯•ä¸ç»“æœï¼š</strong> å½“åªç‚¹å‡»â€œå‘é€stickyå¹¿æ’­â€æŒ‰é’®æ—¶ï¼Œæ²¡æœ‰toastå“åº”ã€‚ç„¶åï¼Œå†ç‚¹å‡»â€œæ³¨å†Œå¹¿æ’­seceiverâ€æŒ‰é’®æ—¶ï¼Œè¿™æ—¶å°±æ”¶åˆ°ä¹‹å‰å‘é€çš„stickyå¹¿æ’­äº†ï¼Œå³toastæç¤ºâ€œæˆ‘æ”¶åˆ°stickyå¹¿æ’­äº†~â€ã€‚å³ï¼Œè¿™ç§stickyå¹¿æ’­å°±æ˜¯Intentä¼šä¸€ç›´ä¿ç•™äº‹ä»¶ç»“æŸï¼Œå“ªæ€•å°šæœªæ³¨å†Œreceiverã€‚</p>
<ol start="5">
<li><strong>Appåº”ç”¨å†…å¹¿æ’­ï¼ˆLocal Broadcastï¼‰</strong></li>
</ol>
<blockquote>
<p><strong>Local Boradcast çš„ä½¿ç”¨ï¼š</strong></p>
<blockquote>
<ul>
<li>æ³¨å†Œï¼š<code>LocalBroadcastManager.getInstance(context).registerReceiver(receiver, filter)</code></li>
<li>è§£æ³¨å†Œï¼š<code>LocalBroadcastManager.getInstance(context).unregisterReceiver(receiver)</code></li>
<li>å‘é€ï¼š<code>LocalBroadcastManager.getInstance(context).sendBroadcast(Intent)</code><br><strong>Local Boradcast çš„ç‰¹ç‚¹ï¼š</strong><br>å›  Android ä¸­çš„å¹¿æ’­æ˜¯å¯ä»¥è·¨åŸŸçš„ï¼ˆå³è·¨Appï¼‰ï¼Œå¯å­˜åœ¨å¦‚ä¸‹é—®é¢˜ï¼š</li>
</ul>
<ol>
<li>other-App å‘å‡ºä¸ current-App çš„ intent-filter ç›¸åŒ¹é…çš„å¹¿æ’­æ—¶ï¼Œcurrent-App ä¼šä¸æ–­æ”¶åˆ°å¹¿æ’­å¹¶å¤„ç†ã€‚</li>
<li>current-App å‘å‡ºä¸ other-App çš„ intent-filter ç›¸åŒ¹é…çš„å¹¿æ’­æ—¶ï¼Œother-App ä¼šä¸æ–­æ”¶åˆ°å¹¿æ’­å¹¶å¤„ç†ã€‚<br>è¿™æ ·ï¼Œå°±å‡ºç°äº† **å®‰å…¨æ€§ &amp;&amp; æ•ˆç‡æ€§ ** çš„é—®é¢˜ã€‚</li>
</ol>
</blockquote>
<ul>
<li>å¯¹äºä¸Šè¿° <strong>å®‰å…¨æ€§ &amp;&amp; æ•ˆç‡æ€§</strong> é—®é¢˜ï¼Œä½¿ç”¨ <strong>Appåº”ç”¨å†…å¹¿æ’­</strong> å¯è§£å†³ï¼Œå¯ç†è§£ä¸ºå±€åŸŸå¹¿æ’­ï¼Œåªå±€é™äºå½“å‰Appåº”ç”¨å†…å‘é€ä¸æ¥æ”¶ã€‚</li>
<li><strong>ç‰¹åˆ«æ³¨æ„ï¼š<em>LocalBroadcast åªèƒ½åŠ¨æ€æ³¨å†Œï¼Œä¸å¯é™æ€æ³¨å†Œï¼ˆå³ä½¿æ³¨å†Œä¹Ÿæ— æ•ˆï¼‰ï¼</em></strong></li>
</ul>
</blockquote>
<p><em>ç¤ºä¾‹ï¼š</em></p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// LocalBroadcatä¾‹å­ï¼š</span>
<span class="token comment" spellcheck="true">//</span>
<span class="token comment" spellcheck="true">// 1. è‡ªå®šä¹‰MyBroadcastReceiver</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyBroadcastReceiver</span> <span class="token keyword">extends</span> <span class="token class-name">BroadcastReceiver</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onReceive</span><span class="token punctuation">(</span>Context context<span class="token punctuation">,</span> Intent intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token string">"æˆ‘æ”¶åˆ°localå¹¿æ’­äº†~"</span><span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_SHORT<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// 2. xmlå¸ƒå±€æ–‡ä»¶ï¼Œä¸€ä¸ªæŒ‰é’®å‘é€localå¹¿æ’­</span>
<span class="token operator">&lt;</span>LineaLayout <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token operator">&lt;</span>Button 
        android<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"å‘é€localå¹¿æ’­"</span>
        android<span class="token operator">:</span>onclick<span class="token operator">=</span><span class="token string">"performSendLocalBroadcast"</span><span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>LinearLayout<span class="token operator">></span>

<span class="token comment" spellcheck="true">// 3. MyActivityç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyActivity</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> MyBroadcastReceiver mReceiver<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">performSendLocalBroadcast</span><span class="token punctuation">(</span>View v<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Intent intent <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Intent</span><span class="token punctuation">(</span><span class="token string">"com.myintent.localbroadcast"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        LocalBroadcastManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">sendBroadcast</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        IntentFilter filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntentFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        filter<span class="token punctuation">.</span><span class="token function">setAction</span><span class="token punctuation">(</span><span class="token string">"com.myintent.localbroadcast"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mReceiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyBroadcastReceiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        LocalBroadcastManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">registerReceiver</span><span class="token punctuation">(</span>mReceiver<span class="token punctuation">,</span> filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        LocalBroadcastManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unregisterReceiver</span><span class="token punctuation">(</span>mReceiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>å°ç»“ï¼š</strong></p>
<ul>
<li>å¯¹äºä¸åŒæ³¨å†Œæ–¹å¼çš„å¹¿æ’­æ¥æ”¶å™¨å›è°ƒ <code>onReceive(Context context, Intent intent)</code> ä¸­çš„ <code>context</code> è¿”å›å€¼æ˜¯ä¸ä¸€æ ·çš„ï¼š<blockquote>
<ul>
<li><strong>é™æ€æ³¨å†Œçš„å…¨å±€å¹¿æ’­ï¼ˆNormal&#x2F;Ordered&#x2F;Sticky&#x2F;Systemï¼‰</strong>ï¼š<code>android.app.ReceiverRestrictedContext</code></li>
<li><strong>åŠ¨æ€æ³¨å†Œçš„å…¨å±€å¹¿æ’­ï¼ˆNormal&#x2F;Ordered&#x2F;Sticky&#x2F;Systemï¼‰</strong>ï¼š<code>Activityï¼ˆå³å…·ä½“sendå¹¿æ’­çš„ç»„ä»¶ï¼‰</code></li>
<li><strong>åŠ¨æ€æ³¨å†Œçš„åº”ç”¨å†…å¹¿æ’­ï¼ˆLocalBroadcastManageræ–¹å¼ï¼‰</strong>ï¼š<code>android.app.Application</code></li>
</ul>
</blockquote>
</li>
<li>æµ‹è¯•å‘ç°ï¼Œå½“é™æ€å’ŒåŠ¨æ€éƒ½åŒæ—¶æ³¨å†Œçš„è¯ï¼Œsend å¹¿æ’­åï¼Œåˆ†åˆ†åˆ«æ”¶åˆ° 2 æ¬¡ <code>onReceive</code> ä¸”å„è‡ªçš„ <code>context</code> ç±»å‹ä¸åŒã€‚<strong>å¹¶ä¸”ï¼ŒåŠ¨æ€æ³¨å†Œçš„ä¼˜å…ˆçº§æ›´é«˜ï¼</strong></li>
<li>æµ‹è¯•å‘ç°ï¼Œè™½ç„¶é«˜ä¼˜å…ˆçº§çš„ receiver(1) ä¿®æ”¹çš„å¹¿æ’­ç»­ä¼ å†…å®¹ï¼Œä½†æ˜¯ receiver(2) ä¸­ <code>intent.getExtras()</code> çš„å€¼å´æ˜¯ä¸å˜çš„ï¼ˆè¿˜æ˜¯senderå‘å‡ºé‚£äº›ï¼‰ã€‚å¦‚æœè¦è·å–è¢«å‰é¢æˆ–è€…é«˜ä¼˜å…ˆçº§çš„ <code>receiver.setResultExtras(bundle)</code> ä¿®æ”¹è¿‡çš„å†…å®¹çš„è¯ï¼Œåº”è¯¥è°ƒç”¨ <code>getResultExtras(flase)</code> ã€‚</li>
<li>è‹¥ä¸ºå…¨å±€ï¼ˆé<code>LocalBroadcastManager</code>ï¼‰é™æ€æ³¨å†Œçš„ receiverï¼Œæ— è®ºåº”ç”¨æ˜¯å¦å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œéƒ½ä¼šè¿›è¡Œç›‘å¬ï¼›åŠ¨æ€æ³¨å†Œçš„å½“åº”ç”¨ç¨‹åºå…³é—­åå°†ä¸å†ç›‘å¬ã€‚</li>
</ul>
<h2 id="ContentProviderï¼ˆå†…å®¹æä¾›è€…ï¼‰"><a href="#ContentProviderï¼ˆå†…å®¹æä¾›è€…ï¼‰" class="headerlink" title="ContentProviderï¼ˆå†…å®¹æä¾›è€…ï¼‰"></a>ContentProviderï¼ˆå†…å®¹æä¾›è€…ï¼‰</h2><p>å½“ä¸€ä¸ª App æŒ‡å®šçš„æ•°æ®é›†æä¾›ç»™å…¶å®ƒåº”ç”¨ç¨‹åºï¼Œè¿™å°±æ˜¯ <code>ContentProvider</code> çš„èƒ½åŠ›ã€‚</p>
<p><strong>ï¼ˆ1ï¼‰ç®€ä»‹ä¸ç‰¹ç‚¹ï¼š</strong></p>
<ol>
<li><code>ContentProvider</code> å®ç°è·¨åº”ç”¨é—´çš„æ•°æ®å…±äº«ã€‚å…¶ç”¨äºæ•°æ®çš„ä¿å­˜ï¼ˆsetï¼‰å’Œè·å–ï¼ˆgetï¼‰ï¼Œå¹¶ä½¿å…¶å¯¹æ‰€æœ‰åº”ç”¨ç¨‹åºå¯è§ã€‚<strong>åœ¨Androidä¸­ï¼Œè¿™æ˜¯å®ç°è·¨åº”ç”¨å…±äº«æ•°æ®çš„å”¯ä¸€æ–¹å¼ï¼å› ä¸ºAndroidæ²¡æœ‰æä¾›æ‰€æœ‰åº”ç”¨ç¨‹åºå…±åŒè®¿é—®çš„å…¬å…±å­˜å‚¨åŒºã€‚</strong></li>
<li>åªæœ‰éœ€è¦åœ¨å¤šä¸ªç¨‹åºé—´å…±äº«æ•°æ®ï¼Œæ‰éœ€è¦ <code>ContentProvider</code>ã€‚å¦‚ï¼Œé€šè®¯å½•æ•°æ®å¯è¢«å¤šä¸ªåº”ç”¨è¯»å–è‡ªå®šä¹‰æ˜¾ç¤ºåœ¨å„è‡ªçš„åº”ç”¨é‡Œï¼Œä¸”å¿…é¡»å­˜å‚¨åœ¨åŒä¸€å†…å®¹æä¾›è€…ä¸­ã€‚è¿™æ ·çš„å¥½å¤„ï¼š<strong>ç»Ÿä¸€è®¿é—®æ–¹å¼ï¼</strong></li>
<li><code>ContentProvider</code> ä½¿ç”¨ URI å”¯ä¸€æ ‡è¯†å…¶æ•°æ®é›†ï¼Œä¸”æ ‡å‡†ä»¥ <strong><code>content://</code></strong> ä¸ºå‰ç¼€ï¼Œè¡¨ç¤ºè¯¥æ•°æ®ç”± <code>ContentProvider</code> ç®¡ç†ã€‚</li>
<li>å¼€å‘äººå‘˜ä¸ä¼šç›´æ¥ä½¿ç”¨ <code>ContentProvider</code> ç±»çš„å¯¹è±¡æ¥å­˜å–æ•°æ®ï¼Œè€Œæ˜¯é€šè¿‡ <code>ContentResolver</code> å¯¹è±¡æ¥å®ç°å¯¹ <code>ContentProvider</code> çš„æ“ä½œã€‚</li>
</ol>
<p><strong>ï¼ˆ2ï¼‰<code>ContentProviderã€ContentResolverã€ContentObserver</code> ä¹‹é—´åŒºåˆ«ï¼š</strong></p>
<blockquote>
<ul>
<li><strong>ContentProviderï¼š 4å¤§ç»„ä»¶ä¹‹å†…å®¹æä¾›è€…ï¼Œä¸»è¦ç”¨äºå¯¹å¤–æä¾›æ•°æ®ã€‚</strong><br>ä¸€ä¸ªå·²ç»å®ç°ContentProvideræ¥æä¾›æ•°æ®ç»™å…¶å®ƒåº”ç”¨æ¥æ“ä½œï¼Œå¯é€šè¿‡ ContentResolver æ¥æ“ä½œåˆ«çš„åº”ç”¨æ•°æ®ï¼Œå½“ç„¶åœ¨æœ¬èº«åº”ç”¨ä¸­ä¹Ÿå¯ä»¥ã€‚</li>
<li><strong>ContentResolverï¼š å†…å®¹è§£æè€…ï¼Œç”¨äºè·å–å…¶å®ƒåº”ç”¨ ContentProvider æä¾›çš„æ•°æ®ã€‚</strong><pre class=" language-java"><code class="language-java">ContentResolver<span class="token punctuation">.</span><span class="token function">notifyChange</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span> ï¼šå‘å‡ºæ¶ˆæ¯
ContentResolver<span class="token punctuation">.</span><span class="token function">registerContentObserver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> ï¼šç›‘å¬æ¶ˆæ¯
</code></pre>
</li>
<li><strong>ContentObserverï¼š å†…å®¹ç›‘å¬å™¨ï¼Œå¯ä»¥ç›‘å¬æ•°æ®çš„å˜åŒ–ã€‚</strong><br>ç›®çš„æ˜¯è§‚å¯Ÿï¼ˆæ•æ‰ï¼‰ç‰¹å®šUriå¼•èµ·çš„æ•°æ®åº“çš„å˜åŒ–ï¼Œç»§è€Œåšå‡ºç›¸åº”çš„å¤„ç†ã€‚ç±»ä¼¼äºæ•°æ®åº“é‡Œçš„triggerï¼ˆè§¦å‘å™¨ï¼‰ï¼Œå½“ ContentObserver æ‰€è§‚å¯Ÿçš„Uriå‘ç”Ÿå˜åŒ–ï¼Œå°±ä¼šè§¦å‘å®ƒã€‚è§¦å‘å™¨åˆ†ä¸º è¡¨è§¦å‘å™¨ã€è¡Œè§¦å‘å™¨ ï¼Œç›¸åº”åœ° ContentObserver ä¹Ÿåˆ†ä¸º è¡¨ContentObserverã€è¡ŒContentObserver ï¼Œå½“ç„¶è¿™ä¸å…¶ç›‘å¬çš„ Uri MIME Type æœ‰å…³ã€‚</li>
</ul>
<p>æ€»ä¹‹ï¼Œä¸€å¥è¯ï¼š</p>
<blockquote>
<p><strong>ä½¿ç”¨ <code>ContentResolver</code> æ¥è·å– <code>ContentProvider</code> æä¾›çš„æ•°æ®ï¼ŒåŒæ—¶æ³¨å†Œ <code>ContentObserver</code> ç›‘å¬ <code>Uri</code> æ•°æ®å˜åŒ–ã€‚</strong></p>
</blockquote>
</blockquote>
<p>å­¦ä¹ å‚è€ƒï¼š<a href="https://blog.csdn.net/wenzhi20102321/article/details/53078861">Androidå†…å®¹æä¾›è€…ContentProvideræ€»ç»“</a></p>
<h1 id="äº”å¤§å­˜å‚¨"><a href="#äº”å¤§å­˜å‚¨" class="headerlink" title="äº”å¤§å­˜å‚¨"></a>äº”å¤§å­˜å‚¨</h1><blockquote>
<p>Androidä¸­ 5 å¤§å­˜å‚¨æ–¹å¼ï¼š</p>
<ul>
<li>File</li>
<li>SharedPreference</li>
<li>Sqlite</li>
<li>Network</li>
<li>ContentProvider</li>
</ul>
</blockquote>
<h1 id="ä¸ƒå¤§å¸ƒå±€"><a href="#ä¸ƒå¤§å¸ƒå±€" class="headerlink" title="ä¸ƒå¤§å¸ƒå±€"></a>ä¸ƒå¤§å¸ƒå±€</h1><blockquote>
<p>Androidä¸­ 7 å¤§å¸ƒå±€ï¼š</p>
<ul>
<li>LinearLayout</li>
<li>RelativeLayout</li>
<li>FrameLayout</li>
<li>ConstraintLayoutï¼šAndroidStudio 2.2 æ–°æ¨å‡ºï¼Œå¹¶è‡ª AndroidStudio 2.3 æˆä¸ºé»˜è®¤å¸ƒå±€ã€‚</li>
<li>AbsoluteLayoutï¼ˆè¿‡æ—¶ï¼‰</li>
<li>TableLaout</li>
<li>GridLayoutï¼ˆAndroid 4.0 æ–°å¢ï¼‰</li>
</ul>
</blockquote>
<h2 id="ConstraintLayoutï¼ˆçº¦æŸå¸ƒå±€ï¼‰"><a href="#ConstraintLayoutï¼ˆçº¦æŸå¸ƒå±€ï¼‰" class="headerlink" title="ConstraintLayoutï¼ˆçº¦æŸå¸ƒå±€ï¼‰"></a>ConstraintLayoutï¼ˆçº¦æŸå¸ƒå±€ï¼‰</h2><blockquote>
<p>ConstraintLayoutï¼šAndroidStudio 2.3 èµ·ï¼Œæˆä¸ºé»˜è®¤å¸ƒå±€ã€‚ä¸ºäº†è§£å†³å¤æ‚å¸ƒå±€æ—¶ï¼Œå‡ºç°åµŒå¥—å±‚çº§è¿‡å¤šå¼•å‘çš„æ€§èƒ½é—®é¢˜ï¼ˆå±‚çº§å¤šåˆ™ç»˜åˆ¶æ›´è€—æ—¶ï¼‰ã€‚</p>
</blockquote>
]]></content>
      <categories>
        <category>é¢è¯•</category>
        <category>Androidé¢è¯•</category>
      </categories>
      <tags>
        <tag>é¢è¯•</tag>
        <tag>Androidé¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title>Android æ€§èƒ½ä¼˜åŒ–</title>
    <url>/interviews/android/Android-Resume-4/</url>
    <content><![CDATA[<p>Androidé¢è¯•ä¹‹ã€Šæ€§èƒ½ä¼˜åŒ–ã€‹æ€»ç»“ã€‚å¯¹äºç®€å•éƒ¨åˆ†ï¼Œåªåšæ€»ç»“ã€‚è‡³äºéš¾ç‚¹ï¼Œå°†åšè¿›ä¸€æ­¥åˆ†æä¸è®°å½•ã€‚</p>
<span id="more"></span>

<hr>
<p><strong>å¸¸è§çš„Androidæ€§èƒ½ä¼˜åŒ–ï¼Œå¤§è‡´æœ‰å¦‚ä¸‹å‡ å¤§æ¨¡å—ï¼ˆç»†åˆ†å°æ¨¡å—ï¼‰ï¼š</strong></p>
<blockquote>
<ul>
<li>ç¨³å®šæ€§ï¼ˆå¦‚ï¼šå†…å­˜æº¢å‡º&#x2F;æ³„æ¼ã€å´©æºƒï¼‰&#x3D;&gt; <code>Crashä¸ANR</code></li>
<li>æµç•…åº¦ï¼ˆå¦‚ï¼šå¡é¡¿â€”â€”UI(å¸ƒå±€+ç»˜åˆ¶)ã€çº¿ç¨‹ä¼˜åŒ–ã€å“åº”é€Ÿåº¦ï¼‰</li>
<li>è€—æŸï¼ˆå¦‚ï¼šè€—ç”µã€æµé‡ã€ç½‘ç»œï¼‰&#x3D;&gt; <code>ä»£ç è´¨é‡ä¸é€»è¾‘</code></li>
<li>å®‰è£…åŒ…ï¼ˆå¦‚ï¼šAPKç˜¦èº«ï¼‰</li>
</ul>
</blockquote>
<h1 id="ï¼ˆä¸€ï¼‰ä¼˜åŒ–ï¼šã€Šç¨³å®šæ€§ã€‹"><a href="#ï¼ˆä¸€ï¼‰ä¼˜åŒ–ï¼šã€Šç¨³å®šæ€§ã€‹" class="headerlink" title="ï¼ˆä¸€ï¼‰ä¼˜åŒ–ï¼šã€Šç¨³å®šæ€§ã€‹"></a>ï¼ˆä¸€ï¼‰ä¼˜åŒ–ï¼šã€Šç¨³å®šæ€§ã€‹</h1><p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaå¼€å‘ä¸€èˆ¬ä¸éœ€è¦æ‰‹åŠ¨åˆ†é…å†…å­˜å’Œé‡Šæ”¾å†…å­˜ï¼Œè¿™å¾—æ„Ÿè°¢Javaåº•å±‚æœºåˆ¶â€”â€”JVMåŠå…¶GCã€‚äº¤ç”±è™šæ‹Ÿæœºå¸®åŠ©åˆ†é…å’Œé‡Šæ”¾ï¼Œä½†å› æ­¤å¯¼è‡´å¼€å‘è€…ç¼–ç¨‹ä¸è§„èŒƒæˆ–è€…ä¸ä¸¥è°¨ï¼Œæ˜“å‡ºç°å†…å­˜æ³„æ¼å’Œå†…å­˜æº¢å‡ºã€‚</p>
<blockquote>
<p>Androidæ“ä½œç³»ç»Ÿå¯¹æ•´ä¸ªè®¾å¤‡å†…å­˜åšäº†ä¸€ä¸ªå¤§è‡´çš„å…¨å±€æŠŠæ§ï¼š  </p>
<ul>
<li>æ¯ä¸ªAppéƒ½åˆ†é… <code>Dalvik Heap Size</code> ï¼Œè¡¨ç¤ºç³»ç»Ÿåˆ†é…ç»™æ¯ä¸ªAppå†…å­˜çš„æœ€å¤§é™åˆ¶é˜ˆå€¼ã€‚</li>
</ul>
<p>æ­¤é˜ˆå€¼åœ¨ä¸åŒå‚å•†è®¾å¤‡æ˜¯ä¸ä¸€æ ·çš„ï¼ŒæŸ¥çœ‹æ–¹å¼å¦‚ï¼š</p>
<pre class=" language-bash"><code class="language-bash">âœ ~ adb shell getprop <span class="token operator">|</span> <span class="token function">grep</span> heap
<span class="token punctuation">[</span>dalvik.vm.heapgrowthlimit<span class="token punctuation">]</span>: <span class="token punctuation">[</span>256m<span class="token punctuation">]</span>
<span class="token punctuation">[</span>dalvik.vm.heapmaxfree<span class="token punctuation">]</span>: <span class="token punctuation">[</span>2m<span class="token punctuation">]</span>
<span class="token punctuation">[</span>dalvik.vm.heapminfree<span class="token punctuation">]</span>: <span class="token punctuation">[</span>512k<span class="token punctuation">]</span>
<span class="token punctuation">[</span>dalvik.vm.heapsize<span class="token punctuation">]</span>: <span class="token punctuation">[</span>256m<span class="token punctuation">]</span>
<span class="token punctuation">[</span>dalvik.vm.heapstartsize<span class="token punctuation">]</span>: <span class="token punctuation">[</span>5m<span class="token punctuation">]</span>
<span class="token punctuation">[</span>dalvik.vm.heaptargetutilization<span class="token punctuation">]</span>: <span class="token punctuation">[</span>0.75<span class="token punctuation">]</span>
</code></pre>
<p>æ€»ä¹‹ï¼ŒAndroidå¯¹æ¯ä¸ªAppé™åˆ¶å†…å­˜å¤§å°ï¼š</p>
<blockquote>
<ul>
<li>å¯¹åº”Javaä»£ç çš„ <code>Runtime.getRuntime().maxMemory()</code>ã€‚</li>
<li>å³ <code>/system/build.prop</code> ä¸­çš„å¦‚ä¸‹é€‰é¡¹å€¼ï¼š<ul>
<li><code>dalvik.vm.heapgrowthlimit</code>ï¼šå½“é…ç½®æ¸…å•çš„ <code>&lt;application android:largeHeap=&quot;false&quot; æˆ–ç¼ºçœ .../&gt;</code>æ—¶ï¼Œç”¨è¿™ä¸ªã€‚</li>
<li><code>dalvik.vm.heapsize</code>ï¼šå½“é…ç½®æ¸…å•çš„ <code>&lt;application android:largeHeap=&quot;true&quot; .../&gt;</code>æ—¶ï¼Œç”¨è¿™ä¸ªã€‚<br>è¶…å‡ºè¯¥é™åˆ¶å†ç»§ç»­ç”³è¯·ï¼Œåˆ™OOMã€‚</li>
</ul>
</li>
</ul>
</blockquote>
</blockquote>
<p>æ‰€ä»¥ï¼ŒJavaå¼€å‘ä¸éœ€è¦å¯¹å†…å­˜æ‰‹åŠ¨åˆ†é…ä¸é‡Šæ”¾ï¼Œä½† <strong>éœ€è¦åˆç†çš„å†…å­˜ç®¡ç†</strong> ã€‚</p>
<h2 id="ã€ç¨³ã€‘å†…å­˜ä¼˜åŒ–ç‚¹"><a href="#ã€ç¨³ã€‘å†…å­˜ä¼˜åŒ–ç‚¹" class="headerlink" title="ã€ç¨³ã€‘å†…å­˜ä¼˜åŒ–ç‚¹"></a>ã€ç¨³ã€‘å†…å­˜ä¼˜åŒ–ç‚¹</h2><blockquote>
<ol>
<li><em><strong>é¿å…å†…å­˜æ³„æ¼ï¼ˆâ˜…â˜…â˜…â˜…â˜…ï¼‰</strong></em></li>
<li><em><strong>ä¼˜åŒ–å†…å­˜ç©ºé—´</strong></em><ul>
<li><strong>åˆç†åˆ©ç”¨å¯¹è±¡å¼•ç”¨ï¼Œä»¥åŠ© GC åˆç†å›æ”¶ã€‚</strong>å¦‚ï¼šå¼º&#x2F;è½¯&#x2F;å¼±&#x2F;è™šã€‚</li>
<li><strong>å‡å°‘ä¸å¿…è¦çš„å†…å­˜å¼€é”€ï¼š</strong><ul>
<li><strong>æ…ç”¨è‡ªåŠ¨è£…ç®±</strong>ã€‚å¦‚ï¼šä¸€ä¸ª int å  4bytesï¼Œåˆ™ä¸€ä¸ª Integer å  16bytesã€‚</li>
<li><strong>æ…ç”¨æšä¸¾ã€‚</strong> Enumæ˜“è¯»ä¸”å®‰å…¨ï¼Œä½†è¿‡åº¦ä½¿ç”¨åœ¨æ€§èƒ½ä¸Šå´ä¸å¦‚æ™®é€šå¸¸é‡å®šä¹‰ã€‚Androidä¸­ï¼Œæšä¸¾å†…å­˜æ˜¯å¸¸é‡2~3å€+ã€‚</li>
<li><strong>å†…å­˜å¤ç”¨</strong>ï¼š<ul>
<li><strong>å……åˆ†åˆ©ç”¨ç³»ç»Ÿå†…ç½®èµ„æºã€‚</strong> å¦‚ï¼š<code>strings/colors/icons/animation/simple-layout</code> ç­‰ï¼Œè¿˜èƒ½ä¼˜åŒ–apkå¤§å°ã€‚</li>
<li><strong>å……åˆ†åˆ©ç”¨Androidç‰¹æœ‰æ•°æ®ç»“æ„ã€‚</strong> å¦‚ï¼š<code>SparceArray/Pair</code> ç­‰ã€‚</li>
<li><strong>è§†å›¾å¤ç”¨ã€‚</strong> å¦‚ï¼š<code>ViewHolder</code> å®ç° <code>ContentView</code> å¤ç”¨ç­‰ã€‚</li>
<li><strong>å¯¹è±¡æ± ã€‚</strong> å¦‚ï¼š<code>çº¿ç¨‹æ± ã€æ¶ˆæ¯æ± </code> ç­‰ï¼Œå¯¹è±¡é‡ç”¨ä»¥å‡å°‘å¯¹è±¡åˆ›å»ºï¼Œé¿å…å†…å­˜æŠ–åŠ¨ç­‰ã€‚</li>
<li><strong><code>Bitmap</code>å¯¹è±¡å¤ç”¨ã€‚</strong> åˆ©ç”¨ Bitmap ä¸­çš„ <code>inBitmap</code> é«˜çº§ç‰¹æ€§ï¼Œæé«˜ç³»ç»Ÿåœ¨ Bitmap çš„åˆ†é…ä¸é‡Šæ”¾æ•ˆç‡ï¼Œä¸ä»…å¯ä»¥å¤ç”¨å†…å­˜ï¼Œè¿˜èƒ½æé«˜è¯»å†™é€Ÿåº¦ã€‚è¯¥ç‰¹æ€§å¯ä»¥åœ¨å·²ç»çš„å†…å­˜åŒºåŸŸä¸­ç”³è¯·ä¸€å—åŒºåŸŸæ¥å­˜æ”¾ Bitmapã€‚ï¼ˆâ˜…â˜…â˜…â˜…â˜…ï¼‰&#x3D;&gt; <em>PSï¼šæœ‰å¾…æ›´æ·±ç ”ç©¶~~~~</em></li>
</ul>
</li>
</ul>
</li>
<li><strong><code>ListView/RecycleView</code> ä¼˜åŒ–ã€‚</strong></li>
<li><strong><code>LruCache</code> ç¼“å­˜ã€‚</strong>   </li>
<li><strong>å›¾ç‰‡å†…å­˜ä¼˜åŒ–ï¼šä»¥è®¾ç½®ä½å›¾è§„æ ¼ï¼Œæ ¹æ®â€œé‡‡æ ·å› å­â€åšå‹ç¼©ï¼Œç”¨ä¸€äº›å›¾ç‰‡ç¼“å­˜æ–¹å¼ï¼ˆå¦‚<code>LruCache</code>ï¼‰å¯¹å›¾ç‰‡è¿›è¡Œç®¡ç†ç­‰ç­‰ã€‚</strong> ç”±äºæ¯ä¸ªAppè¢«åˆ†é…çš„ dalvik heap size æœ‰é™åˆ¶ï¼Œè€Œä¸”å›¾ç‰‡èµ„æºåˆç›¸å¯¹è€—å†…å­˜ã€‚æ‰€ä»¥ï¼Œè§£å†³å¥½å›¾ç‰‡å†…å­˜ä¼˜åŒ–ï¼Œæ˜¯Androidå¼€å‘ä¸­çš„ä¸€å¤§é‡è¦æ¨¡å—ï¼ï¼ï¼ï¼ˆå‚è€ƒï¼š<a href="https://blog.csdn.net/haha223545/article/details/95349267%EF%BC%89">https://blog.csdn.net/haha223545/article/details/95349267ï¼‰</a></li>
</ul>
</li>
</ol>
</blockquote>
<h3 id="1-å†…å­˜æ³„æ¼"><a href="#1-å†…å­˜æ³„æ¼" class="headerlink" title="1. å†…å­˜æ³„æ¼"></a>1. å†…å­˜æ³„æ¼</h3><blockquote>
<p><strong>å½’ç±»ä¸€ä¸‹ï¼Œå¸¸è§çš„å†…å­˜æ³„æ¼æœ‰ï¼š</strong>  </p>
<ol>
<li>å®¹å™¨ä¸­æ— ç”¨å¯¹è±¡æœªæ¸…ç†é€ æˆçš„æ³„æ¼</li>
<li>å•ä¾‹&#x2F;<code>staticå˜é‡</code>é€ æˆçš„å†…å­˜æ³„æ¼</li>
<li>å†…éƒ¨ç±»(<code>åŒ¿åã€éé™æ€</code>)</li>
<li>èµ„æºæœªå…³é—­&#x2F;æ³¨å†Œæœªè§£æ³¨å†Œé€ æˆçš„å†…å­˜æ³„æ¼</li>
<li><code>Webview</code> å¼•èµ·çš„å†…å­˜æ³„æ¼</li>
<li><code>Handler</code> å¼•èµ·çš„å†…å­˜æ³„æ¼</li>
<li>å¤šçº¿ç¨‹å¼•èµ·çš„å†…å­˜æ³„æ¼</li>
</ol>
</blockquote>
<h4 id="1-1-å®¹å™¨ä¸­æ— ç”¨å¯¹è±¡æœªæ¸…ç†é€ æˆçš„æ³„æ¼"><a href="#1-1-å®¹å™¨ä¸­æ— ç”¨å¯¹è±¡æœªæ¸…ç†é€ æˆçš„æ³„æ¼" class="headerlink" title="1.1 å®¹å™¨ä¸­æ— ç”¨å¯¹è±¡æœªæ¸…ç†é€ æˆçš„æ³„æ¼"></a>1.1 å®¹å™¨ä¸­æ— ç”¨å¯¹è±¡æœªæ¸…ç†é€ æˆçš„æ³„æ¼</h4><p>å®¹å™¨ä¸­æ·»åŠ å¯¹è±¡ï¼Œå½“ä¸å†éœ€è¦è¯¥å¯¹è±¡æ—¶ï¼Œå¹¶æ²¡æœ‰å°†å…¶å¼•ç”¨ä»å®¹å™¨ï¼ˆé›†åˆï¼‰ä¸­æ¸…ç†æ‰ï¼Œå°±ä¼šå¯¼è‡´é›†åˆå®¹å™¨è¶Šæ¥è¶Šå¤§ã€‚å¦‚æœè¯¥é›†åˆå®¹å™¨æ˜¯ <code>static</code> çš„è¯ï¼Œæƒ…å†µå°±æ›´ä¸¥é‡ã€‚</p>
<p><strong>ğŸ‘‰ğŸ»å®¹å™¨å¼•å‘æ³„æ¼çš„è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<blockquote>
<p>åœ¨ <code>Activity</code> é€€å‡ºå‰ï¼Œå°†é›†åˆé‡Œçš„ä¸œè¥¿ <code>clear</code>ï¼Œç„¶åç½®ä¸º <code>null</code>ï¼Œå†é€€å‡ºç¨‹åºã€‚å¦‚ï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  xxxList<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xxxList <span class="token operator">=</span> null<span class="token punctuation">;</span>
  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</blockquote>
<h4 id="1-2-å•ä¾‹-x2F-staticå˜é‡é€ æˆçš„å†…å­˜æ³„æ¼"><a href="#1-2-å•ä¾‹-x2F-staticå˜é‡é€ æˆçš„å†…å­˜æ³„æ¼" class="headerlink" title="1.2 å•ä¾‹&#x2F;staticå˜é‡é€ æˆçš„å†…å­˜æ³„æ¼"></a>1.2 å•ä¾‹&#x2F;<code>staticå˜é‡</code>é€ æˆçš„å†…å­˜æ³„æ¼</h4><p><code>static</code> å˜é‡é•¿æœŸç»´æŒå¯¹è±¡å¼•ç”¨ï¼Œé˜»æ­¢ <code>GC</code> å›æ”¶ã€‚å½“ <code>static</code> å˜é‡æŒæœ‰çš„æ˜¯å¤§æ•°æ®å¯¹è±¡ï¼Œå¦‚ <code>Bitmap/Context/View/...</code> ç­‰ï¼Œå°±æ›´å®¹æ˜“å¼•èµ·æ³„æ¼ç­‰é—®é¢˜ã€‚</p>
<p>å¦‚ï¼Œå•ä¾‹ä¸­å¯èƒ½ä¼šå‡ºç° <code>private static Context sContext</code> ï¼Œå¦‚æœè¯¥ <code>Context</code> æ˜¯ <code>Activity</code> ç±»å‹ï¼Œåˆ™å°±å¿…å®šå‡ºç° <code>leak</code>ï¼Œæ­¤æ—¶å¯ä»¥åœ¨ä¼ å…¥çš„ <code>Activity Context</code> å‚æ•°ä¸­ï¼Œä½¿ç”¨ <code>context.getApplicationContext()</code> ï¼Œè¿™æ ·å°±å’Œ <code>Activity</code> æ²¡æœ‰å…³ç³»ï¼Œä¹Ÿä¸å­˜åœ¨å†…å­˜æ³„æ¼äº†ã€‚</p>
<blockquote>
<p>å°½é‡ç”¨ <code>Application Context</code> ä»£æ›¿ <code>Activity Context</code>ã€‚</p>
</blockquote>
<h4 id="1-3-å†…éƒ¨ç±»-åŒ¿åã€éé™æ€"><a href="#1-3-å†…éƒ¨ç±»-åŒ¿åã€éé™æ€" class="headerlink" title="1.3 å†…éƒ¨ç±»(åŒ¿åã€éé™æ€)"></a>1.3 å†…éƒ¨ç±»(åŒ¿åã€éé™æ€)</h4><blockquote>
<p>æ€»ä¹‹ï¼Œå†…éƒ¨ç±»æ˜“é€ æˆå†…å­˜æ³„æ¼çš„æ ¹æœ¬åŸå› æ˜¯ï¼šå†…éƒ¨ç±»å¯æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨ï¼ˆè¿™ä¹Ÿæ˜¯å†…éƒ¨ç±»çš„ç‰¹ç‚¹~~ï¼‰ã€‚  </p>
<p>ä¾‹å¦‚ï¼Œå¸¸è§çš„éé™æ€å†…éƒ¨ç±»å’ŒåŒ¿åå†…éƒ¨ç±»ï¼Œç¼–å†™ä¸å¥½åŸºæœ¬å°±å†…å­˜æ³„æ¼äº†ï¼š</p>
<ul>
<li><code>Handler</code>ã€<code>TimerTask</code>ã€<code>AsyncTask</code>ã€<code>Thread</code> â€¦â€¦</li>
</ul>
<p><em><strong>ğŸ‘‰ğŸ»æ€»ä¹‹ï¼ŒAndroidä¸­è§£å†³ <code>Activityå†…éƒ¨ç±»</code> å†…å­˜æ³„æ¼çš„æ–¹æ¡ˆä¸ºï¼š</strong></em></p>
<ol>
<li>ä½¿ç”¨ <code>Application Context</code> ä»£æ›¿ <code>Activity Context</code>ï¼Œè®©ç”Ÿå‘½å‘¨æœŸä¸APPä¸€æ ·é•¿ï¼Œå°±å¯é¿å…äº†ã€‚</li>
<li>éé™æ€å†…éƒ¨ç±»è¦å¼•ç”¨ <code>Actiity</code> ï¼Œåˆ™ä¼˜å…ˆ <code>è½¯å¼•ç”¨</code>ã€‚</li>
<li>æ…ç”¨ <code>static</code> å£°æ˜ <code>Context</code> å¯¹è±¡ï¼ï¼ï¼</li>
</ol>
</blockquote>
<h5 id="1-3-1-åŒ¿åå†…éƒ¨ç±»å¼•å‘å†…å­˜æ³„æ¼"><a href="#1-3-1-åŒ¿åå†…éƒ¨ç±»å¼•å‘å†…å­˜æ³„æ¼" class="headerlink" title="1.3.1 åŒ¿åå†…éƒ¨ç±»å¼•å‘å†…å­˜æ³„æ¼"></a>1.3.1 åŒ¿åå†…éƒ¨ç±»å¼•å‘å†…å­˜æ³„æ¼</h5><p><em>ä»£ç è§£é‡Šï¼š</em></p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OuterClass</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token comment" spellcheck="true">//å¯æŒæœ‰ OuterClass å¼•ç”¨ã€‚ã€‚ã€‚</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>åŒ¿åå†…éƒ¨ç±» leak åŸç†åŒ <code>no-staticå†…éƒ¨ç±»</code> ï¼Œè§£å†³æ–¹æ¡ˆä¸ºï¼š</p>
<blockquote>
<p><strong>æ”¹ä¸ºï¼šé™æ€å†…éƒ¨ç±»ã€‚</strong></p>
</blockquote>
<h5 id="1-3-2-éé™æ€å†…éƒ¨ç±»å¼•å‘å†…å­˜æ³„æ¼"><a href="#1-3-2-éé™æ€å†…éƒ¨ç±»å¼•å‘å†…å­˜æ³„æ¼" class="headerlink" title="1.3.2 éé™æ€å†…éƒ¨ç±»å¼•å‘å†…å­˜æ³„æ¼"></a>1.3.2 éé™æ€å†…éƒ¨ç±»å¼•å‘å†…å­˜æ³„æ¼</h5><blockquote>
<p>ä¸€ä¸ª <code>no-staticå†…éƒ¨ç±»</code> <em><strong>å¯¹è±¡å®ä¾‹è¢«å£°æ˜</strong></em> æˆ <code>static</code> ï¼Œåˆ™å…¶å°±é»˜è®¤æ‹¥æœ‰äº†å¤–éƒ¨ç±»çš„å®ä¾‹å¼•ç”¨ï¼Œä¹Ÿå³æ˜¯å…¶ç”Ÿå‘½å‘¨æœŸå¤§äºå¤–éƒ¨å¼•ç”¨ï¼Œå’Œæ•´ä¸ªåº”ç”¨å­˜æ´»çš„ç”Ÿå‘½å‘¨æœŸä¸€æ ·é•¿äº†ã€‚æ˜¾ç„¶ï¼Œå°±å¯¼è‡´äº†å†…å­˜æ³„æ¼ã€‚  </p>
<p><em>ä»£ç è§£é‡Šï¼š</em></p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OuterClass</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InnerClass</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> InnerClass sInnerClazz <span class="token operator">=</span> null<span class="token punctuation">;</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>Bundle savedInstanceState<span class="token punctuation">)</span>
    sInnerClazz <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">InnerClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><em>è¯´æ˜</em>ï¼šActivity æ¯æ¬¡å¯åŠ¨éƒ½ä¼šä½¿ç”¨ InnerClassã€‚è€Œ InnerClass æœ¬èº«ä¸º no-static å†…éƒ¨ç±»å·²ç»æŒæœ‰å¤–éƒ¨ç±» OuterClass çš„å¼•ç”¨äº†ï¼Œä½†åœ¨å£°æ˜å¯¹è±¡æ—¶ç”¨ static å£°æ˜äº†ï¼Œè¿™åˆè¡¨æ˜äº†è¯¥ no-static-inner-class åˆå˜æˆä¸æ•´ä¸ªåº”ç”¨å¯¿å‘½ä¸€æ ·é•¿äº†ï¼Œè¿œå¤§äº Activity äº†ï¼Œæ‰€ä»¥å½“å‰ Activity å ç”¨çš„å†…å­˜èµ„æºæ ¹æœ¬ä¸å¯èƒ½è¢«æ­£å¸¸å›æ”¶ï¼Œä¹…è€Œä¹…ä¹‹å°±é€ æˆäº†å†…å­˜æ³„æ¼ï¼Œè¿›è€ŒOOMã€‚</p>
</blockquote>
<hr>
<p>æ€»ä¹‹ï¼Œæ— è®ºæ˜¯åŒ¿åå†…éƒ¨ç±»è¿˜æ˜¯éé™æ€å†…éƒ¨ç±»ï¼Œéƒ½æ˜¯ <em><strong>å› ä¸ºå¯æŒæœ‰å¤–éƒ¨ç±»å¼•ç”¨å¹¶ç”Ÿå‘½å‘¨æœŸå¤§äºå¤–éƒ¨å¼•ç”¨çš„ç”Ÿå‘½å‘¨æœŸ</strong></em> ã€‚æ‰€ä»¥ï¼Œè§£å†³åŠæ³•éƒ½æ˜¯ä¸€ä¸ªæ–¹å‘ã€‚</p>
<blockquote>
<p><em><strong>ğŸ‘‰ğŸ»åŒ¿åå†…éƒ¨ç±»ã€éé™æ€å†…éƒ¨ç±»å£°æ˜æˆ <code>static</code> å¯¹è±¡å¼•ç”¨çš„è§£å†³æ–¹æ¡ˆï¼š</strong></em></p>
<ol>
<li>ã€åŒ¿åå†…éƒ¨ç±»ã€ï¼šæ”¹ä¸º <strong>é™æ€å†…éƒ¨ç±»</strong>ï¼Œå¦‚ï¼š</li>
<li>ã€éé™æ€å†…éƒ¨ç±»å£°æ˜æˆ <code>static</code> å¯¹è±¡å¼•ç”¨ã€ï¼šæ”¹ä¸º <strong>å†…éƒ¨é€šè¿‡ <code>è½¯å¼•ç”¨/å¼±å¼•ç”¨</code> åŠ å¼ºã€‚</strong></li>
</ol>
<p><em><strong>æ€»ä¹‹ï¼Œè¿™ä¸¤ç§æƒ…å†µçš„å†…éƒ¨ç±» leak è§£å†³æ–¹æ¡ˆï¼Œå¯ç»ˆæä¸ºä¸€ä¸ªï¼š</strong></em></p>
<blockquote>
<p><strong>ä¼˜åŒ–ä¸ºï¼š<code>é™æ€å†…éƒ¨ç±» + è½¯å¼•ç”¨/å¼±å¼•ç”¨ å†…éƒ¨æŒæœ‰å¤–éƒ¨å¼•ç”¨çš„ä¸¥æ ¼åŠ å¼ºï¼</code></strong></p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OuterClass</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">{</span>
  
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">InnerClass</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> WeakReference<span class="token operator">&lt;</span>Context<span class="token operator">></span> myContext<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token function">InnerClass</span><span class="token punctuation">(</span>Context context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          myContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakReference</span><span class="token operator">&lt;</span>Context<span class="token operator">></span><span class="token punctuation">(</span>context<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>null <span class="token operator">!=</span> myContext<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre>
</blockquote>
</blockquote>
<hr>
<h4 id="1-4-èµ„æºæœªå…³é—­-x2F-æ³¨å†Œæœªè§£æ³¨å†Œé€ æˆçš„å†…å­˜æ³„æ¼"><a href="#1-4-èµ„æºæœªå…³é—­-x2F-æ³¨å†Œæœªè§£æ³¨å†Œé€ æˆçš„å†…å­˜æ³„æ¼" class="headerlink" title="1.4 èµ„æºæœªå…³é—­&#x2F;æ³¨å†Œæœªè§£æ³¨å†Œé€ æˆçš„å†…å­˜æ³„æ¼"></a>1.4 èµ„æºæœªå…³é—­&#x2F;æ³¨å†Œæœªè§£æ³¨å†Œé€ æˆçš„å†…å­˜æ³„æ¼</h4><blockquote>
<ul>
<li><strong>èµ„æºæ€§å¯¹è±¡ï¼Œè¯¸å¦‚ <code>Cursor/File/IOæµæ“ä½œ/...</code> å¾€å¾€éƒ½ä½¿ç”¨äº†ç¼“å†²ã€‚ä¸”</strong>ã€‚å½“ä¸å†ä½¿ç”¨æ—¶ï¼Œåº”åŠæ—¶å…³é—­ï¼Œä»¥ä¾¿å®ƒä»¬çš„<strong>ç¼“å†²ï¼ˆç¼“å­˜å¯¹è±¡ï¼‰åŠæ—¶å›æ”¶å†…å­˜</strong>ï¼Œè€Œéç­‰å¾… <code>GC</code> æ¥å¤„ç†ã€‚<strong>å› å®ƒä»¬çš„ç¼“å­˜ä¸ä»…å­˜åœ¨äº JVM å†…ï¼Œè¿˜å­˜åœ¨äº JVM ä¹‹å¤–ã€‚æ‰€ä»¥ï¼Œå¦‚æœåªæ˜¯ç®€å•çš„ç½®ä¸º <code>null</code> ï¼Œè€Œä¸å…³é—­å®ƒä»¬ï¼Œå°±ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚</strong>  </li>
<li>è‹¥äº‹ä»¶ï¼ˆè¯¸å¦‚ <code>BroadcastReceiver/æ³¨å†Œè§‚å¯Ÿè€…ç­‰å¦‚EventBus</code>ï¼‰æ³¨å†Œåæœªè§£æ³¨å†Œï¼Œ<strong>ä¼šå¯¼è‡´è§‚å¯Ÿè€…åˆ—è¡¨ä¸­ç»´æŒç€å¯¹è±¡çš„å¼•ç”¨</strong>ï¼Œé˜»æ­¢ <code>GC</code> å›æ”¶ã€‚</li>
</ul>
</blockquote>
<p>ä¸€èˆ¬ç¤ºä¾‹å†™æ³•ï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>null <span class="token operator">!=</span> xxx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    xxx<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    xxx <span class="token operator">=</span> null<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>null <span class="token operator">!=</span> yyy<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    yyy<span class="token punctuation">.</span><span class="token function">unregister</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    yyy <span class="token operator">=</span> null<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="1-5-WebView-å¼•èµ·çš„å†…å­˜æ³„æ¼"><a href="#1-5-WebView-å¼•èµ·çš„å†…å­˜æ³„æ¼" class="headerlink" title="1.5 WebView å¼•èµ·çš„å†…å­˜æ³„æ¼"></a>1.5 WebView å¼•èµ·çš„å†…å­˜æ³„æ¼</h4><p>Android-WebView é™¤äº†å…¼å®¹å’Œæ€§èƒ½ä¸Šçš„é—®é¢˜å¤–ï¼Œä¸åŒç‰ˆæœ¬å’Œä¸åŒå®šåˆ¶ROMä¹Ÿæœ‰å¾ˆå¤§å·®å¼‚ã€‚<strong>æ›´é‡è¦åœ°ï¼Œ<code>WebView</code> éƒ½å­˜åœ¨å†…å­˜æ³„æ¼ï¼Œå“ªæ€•åœ¨åº”ç”¨ä¸­ä½¿ç”¨è¿‡ä¸€æ¬¡ï¼Œå†…å­˜å°±ä¸ä¼šè¢«é‡Šæ”¾æ‰ã€‚</strong> </p>
<blockquote>
<p><strong>è§£å†³ <code>WebView</code>å†…å­˜æ³„æ¼æ–¹æ¡ˆï¼š</strong> </p>
<ul>
<li><em>ä¸º <code>WebView</code> æ‰€åœ¨çš„ <code>Activity</code> å¼€å¯æ–°çš„ç‹¬ç«‹è¿›ç¨‹ï¼ˆ<code>android:process=&quot;:&lt;process_name&gt;&quot;</code>ï¼‰ï¼Œä¸ä¸»è¿›ç¨‹é€šä¿¡åˆ™é€šè¿‡ <code>AIDL</code> æ–¹å¼ã€‚ä¸”å¯æ ¹æ®ä¸šåŠ¡éœ€è¦é€‰æ‹©åˆé€‚æ—¶æœºè¿›è¡Œ <code>é”€æ¯è¯¥ç‹¬ç«‹è¿›ç¨‹</code>ï¼Œä»¥è¾¾åˆ°æ­£å¸¸é‡Šæ”¾å†…å­˜ç›®çš„ã€‚</em>  <blockquote>
<p><strong>ğŸ‘‰ğŸ»ç»ˆææš´åŠ›è§£å†³ï¼ˆå®Œç¾æœ‰æ•ˆï¼‰ğŸ‘ˆğŸ»ï¼š</strong><br><em><strong>åœ¨ <code>WebViewActivity.onDestroy()</code> ä¸­ <code>System.exit(0)</code> æ€æ­»å½“å‰è¿›ç¨‹ï¼Œå³ç›´æ¥é€€å‡º <code>dvm</code>ã€‚</strong></em>  </p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    System<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//android.os.Process.killProcess(android.os.Process.myPid());ä¸å¤ªç®¡ç”¨~</span>
<span class="token punctuation">}</span>
</code></pre>
</blockquote>
</li>
</ul>
<p>æœ€åï¼Œé™„ä¸Šå¸¸è§„çš„ WebView ä¼˜åŒ–æ–¹æ¡ˆï¼ˆå…¼å®¹æ‰€æœ‰é‡Šæ”¾ï¼‰ï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">// 1. æ³¨å†Œçš„ services/monitors/handlers/... åŠæ—¶ç§»é™¤å¹¶ç½®nullã€‚</span>
      <span class="token function">unregisterReceiver</span><span class="token punctuation">(</span>mXXXReceiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
      mXXXReceiver <span class="token operator">=</span> null<span class="token punctuation">;</span>
      
    <span class="token comment" spellcheck="true">// 2. å¦‚å½“å‰é¡µé¢æœ‰ ImageViewï¼Œä¹Ÿè¦åŠæ—¶å›æ”¶å¹¶é”€æ¯ã€‚å¦‚ï¼ŒèƒŒæ™¯å¤§å›¾ï¼Œä¸»åŠ¨å›æ”¶ã€‚</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>mIVBackground <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          Drawable drawable <span class="token operator">=</span> mIVBackground<span class="token punctuation">.</span><span class="token function">getDrawable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>drawable <span class="token keyword">instanceof</span> <span class="token class-name">BitmapDrawable</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              BitmapDrawable bitmapDrawable <span class="token operator">=</span> <span class="token punctuation">(</span>BitmapDrawable<span class="token punctuation">)</span> drawable<span class="token punctuation">;</span>
              Bitmap bitmap <span class="token operator">=</span> bitmapDrawable<span class="token punctuation">.</span><span class="token function">getBitmap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>bitmap <span class="token operator">!=</span> null <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>bitmap<span class="token punctuation">.</span><span class="token function">isRecycled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  bitmap<span class="token punctuation">.</span><span class="token function">recycle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token comment" spellcheck="true">// ImageViewçš„çˆ¶ç»„ä»¶å¿…é¡»ç§»é™¤æ­¤ImageViewï¼š</span>
        mIVBackground<span class="token punctuation">.</span><span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeView</span><span class="token punctuation">(</span>mIVBackground<span class="token punctuation">)</span><span class="token punctuation">;</span>
      mIVBackground <span class="token operator">=</span> null<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      
      <span class="token comment" spellcheck="true">// æœ€åï¼Œæ¸…é™¤ WebView ç»„ä»¶ç¼“å­˜å¹¶é”€æ¯</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>mWebView <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mWebView<span class="token punctuation">.</span><span class="token function">stopLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mWebView<span class="token punctuation">.</span><span class="token function">clearHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mWebView<span class="token punctuation">.</span><span class="token function">removeAllViewsInLayout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mWebView<span class="token punctuation">.</span><span class="token function">removeAllViews</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mWebView<span class="token punctuation">.</span><span class="token function">setWebViewClient</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mWebView<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mWebView <span class="token operator">=</span> null<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">// æœ€åï¼Œæ‰§è¡Œ super.onDestroy å¹¶ System.exit(0) é€€å‡º dvm è¿›ç¨‹ï¼</span>
      <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      System<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//android.os.Process.killProcess(android.os.Process.myPid());ä¸å¤ªç®¡ç”¨~</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</blockquote>
<p><em><strong>PSï¼šç‰¹åˆ«æ³¨æ„ï¼Œå¦‚æœä½ ä½¿ç”¨çš„æ˜¯è…¾è®¯æµè§ˆå™¨æœåŠ¡ï¼ˆTBSï¼‰<code>X5WebView</code> çš„è¯ï¼Œåˆ™æ— éœ€åƒä¸Šé¢é‚£æ ·ç¹çï¼Œå®˜æ–¹APIç»™å®šä¸€å¥è°ƒç”¨å¹¶ä¿è¯å³å¯ä¸€æ¬¡å…¨éƒ¨æ¸…é™¤å®Œæ¯•ï¼š</strong></em></p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  QbSdk<span class="token punctuation">.</span><span class="token function">clearAllWebViewCache</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p><em><strong>æ‰©å±•ï¼Œ<code>TBS-X5WebView</code> ä½¿ç”¨ï¼š</strong></em>(å¼•ç”¨è‡ª<a href="https://www.jianshu.com/p/93970d419bc7">https://www.jianshu.com/p/93970d419bc7</a>)</p>
<ol>
<li>æ·»åŠ ä¾èµ–ï¼š</li>
</ol>
<pre class=" language-groovy"><code class="language-groovy">dependencies <span class="token punctuation">{</span>
    api <span class="token string">'com.yanzhenjie:permission:2.0.3'</span>
    api <span class="token string">'com.tencent.tbs.tbssdk:sdk:43939'</span> <span class="token comment" spellcheck="true">// è…¾è®¯X5WebView</span>

    implementation <span class="token string">"org.jetbrains.kotlin:kotlin-stdlib:$kotlin_version"</span>
    implementation <span class="token string">'androidx.core:core-ktx:1.2.0'</span>
    implementation <span class="token string">'androidx.appcompat:appcompat:1.1.0'</span>
    implementation <span class="token string">'com.google.android.material:material:1.1.0'</span>
    implementation <span class="token string">'androidx.constraintlayout:constraintlayout:1.1.3'</span>
    testImplementation <span class="token string">'junit:junit:4.+'</span>
    androidTestImplementation <span class="token string">'androidx.test.ext:junit:1.1.1'</span>
    androidTestImplementation <span class="token string">'androidx.test.espresso:espresso-core:3.2.0'</span>
<span class="token punctuation">}</span>
</code></pre>
<ol start="2">
<li><code>AndroidManifest.xml</code> é…ç½® <code>service</code>ï¼š</li>
</ol>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span>
    <span class="token attr-name"><span class="token namespace">android:</span>name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>com.tencent.smtt.export.external.DexClassLoaderProviderService<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>dexopt<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>process</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>:dexopt<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>service</span><span class="token punctuation">></span></span>
</code></pre>
<ol start="3">
<li><code>Applicationç±»</code> ä¸­åˆå§‹åŒ– <code>TBS</code>ï¼š</li>
</ol>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> android<span class="token punctuation">.</span>app<span class="token punctuation">.</span>Application<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>tencent<span class="token punctuation">.</span>smtt<span class="token punctuation">.</span>export<span class="token punctuation">.</span>external<span class="token punctuation">.</span>TbsCoreSettings<span class="token punctuation">;</span>
<span class="token keyword">import</span> com<span class="token punctuation">.</span>tencent<span class="token punctuation">.</span>smtt<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>QbSdk<span class="token punctuation">;</span>
<span class="token keyword">import</span> java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>HashMap<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> BaseApplication extends Application <span class="token punctuation">{</span>
    <span class="token annotation builtin">@Override</span>
    <span class="token keyword">public</span> void <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">initX5WebView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">/**
     * åˆå§‹åŒ–x5WebView
     */</span>
    <span class="token keyword">private</span> void <span class="token function">initX5WebView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// æœé›†æœ¬åœ°tbså†…æ ¸ä¿¡æ¯å¹¶ä¸ŠæŠ¥æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨è¿”å›ç»“æœå†³å®šä½¿ç”¨å“ªä¸ªå†…æ ¸ã€‚</span>
        QbSdk<span class="token punctuation">.</span>PreInitCallback cb <span class="token operator">=</span> new QbSdk<span class="token punctuation">.</span><span class="token function">PreInitCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation builtin">@Override</span>
            <span class="token keyword">public</span> void <span class="token function">onViewInitFinished</span><span class="token punctuation">(</span>boolean arg0<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment" spellcheck="true">// x5å…§æ ¸åˆå§‹åŒ–å®Œæˆçš„å›è°ƒï¼Œä¸ºtrueè¡¨ç¤ºx5å†…æ ¸åŠ è½½æˆåŠŸï¼Œå¦åˆ™è¡¨ç¤ºx5å†…æ ¸åŠ è½½å¤±è´¥ï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ç³»ç»Ÿå†…æ ¸ã€‚</span>
                LogUtils<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">"onViewInitFinished is "</span><span class="token operator">+</span>arg0<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token annotation builtin">@Override</span>
            <span class="token keyword">public</span> void <span class="token function">onCoreInitFinished</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">// x5å†…æ ¸åˆå§‹åŒ–æ¥å£</span>
        QbSdk<span class="token punctuation">.</span><span class="token function">initX5Environment</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// åœ¨è°ƒç”¨TBSåˆå§‹åŒ–ã€åˆ›å»ºWebViewä¹‹å‰è¿›è¡Œå¦‚ä¸‹é…ç½®</span>
        HashMap map <span class="token operator">=</span> new <span class="token function">HashMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>TbsCoreSettings<span class="token punctuation">.</span>TBS_SETTINGS_USE_SPEEDY_CLASSLOADER<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>TbsCoreSettings<span class="token punctuation">.</span>TBS_SETTINGS_USE_DEXLOADER_SERVICE<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        QbSdk<span class="token punctuation">.</span><span class="token function">initTbsSettings</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<ol start="4">
<li>åœ¨ <code>Activity</code> ä¸­ä½¿ç”¨ï¼š</li>
</ol>
<pre class=" language-kotlin"><code class="language-kotlin"><span class="token keyword">import</span> androidx<span class="token punctuation">.</span>appcompat<span class="token punctuation">.</span>app<span class="token punctuation">.</span>AppCompatActivity
<span class="token keyword">import</span> android<span class="token punctuation">.</span>os<span class="token punctuation">.</span>Bundle
<span class="token keyword">import</span> com<span class="token punctuation">.</span>tencent<span class="token punctuation">.</span>smtt<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>QbSdk
<span class="token keyword">import</span> com<span class="token punctuation">.</span>tencent<span class="token punctuation">.</span>smtt<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>WebChromeClient
<span class="token keyword">import</span> com<span class="token punctuation">.</span>tencent<span class="token punctuation">.</span>smtt<span class="token punctuation">.</span>sdk<span class="token punctuation">.</span>WebView
<span class="token keyword">import</span> com<span class="token punctuation">.</span>yanzhenjie<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>AndPermission
<span class="token keyword">import</span> com<span class="token punctuation">.</span>yanzhenjie<span class="token punctuation">.</span>permission<span class="token punctuation">.</span>runtime<span class="token punctuation">.</span>Permission
<span class="token keyword">import</span> kotlinx<span class="token punctuation">.</span>android<span class="token punctuation">.</span>synthetic<span class="token punctuation">.</span>main<span class="token punctuation">.</span>activity_main<span class="token punctuation">.</span><span class="token operator">*</span>

<span class="token keyword">class</span> MainActivity <span class="token operator">:</span> <span class="token function">AppCompatActivity</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token operator">:</span> Bundle<span class="token operator">?</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span>

        AndPermission<span class="token punctuation">.</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">permission</span><span class="token punctuation">(</span>Permission<span class="token punctuation">.</span>WRITE_EXTERNAL_STORAGE<span class="token punctuation">,</span> Permission<span class="token punctuation">.</span>READ_PHONE_STATE<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">onGranted</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
            <span class="token punctuation">.</span><span class="token function">onDenied</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
            <span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment" spellcheck="true">// åŠ è½½è¿›åº¦</span>
        forum_context<span class="token punctuation">.</span>webChromeClient <span class="token operator">=</span> <span class="token keyword">object</span> <span class="token operator">:</span> <span class="token function">WebChromeClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onProgressChanged</span><span class="token punctuation">(</span>p0<span class="token operator">:</span> WebView<span class="token operator">?</span><span class="token punctuation">,</span> p1<span class="token operator">:</span> Int<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onProgressChanged</span><span class="token punctuation">(</span>p0<span class="token punctuation">,</span> p1<span class="token punctuation">)</span>
                LogUtils<span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        forum_context<span class="token punctuation">.</span>settings<span class="token punctuation">.</span>javaScriptEnabled <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment" spellcheck="true">// å¼€å¯js</span>
        forum_context<span class="token punctuation">.</span>settingsExtension<span class="token punctuation">.</span><span class="token function">setDisplayCutoutEnable</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// åˆ˜æµ·å±é€‚é…</span>
        forum_context<span class="token punctuation">.</span><span class="token function">loadUrl</span><span class="token punctuation">(</span><span class="token string">"https://www.baidu.com"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// åŠ è½½url</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">override</span> <span class="token keyword">fun</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        QbSdk<span class="token punctuation">.</span><span class="token function">clearAllWebViewCache</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// æ¸…é™¤ç¼“å­˜</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<ol start="5">
<li><code>activity-å¸ƒå±€</code> æ–‡ä»¶ï¼š</li>
</ol>
<pre class=" language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>app</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res-auto<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">xmlns:</span>tools</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/tools<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">tools:</span>context</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>.MainActivity<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>com.tencent.smtt.sdk.WebView</span>
        <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/forum_context<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fill_parent<span class="token punctuation">"</span></span>
        <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fill_parent<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span>
</code></pre>
<hr>
<p>å¦å¤–ï¼Œä¹Ÿå¯åŠ¨æ€æ·»åŠ  WebViewï¼Œå¦‚ï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// åŠ¨æ€æ·»åŠ Webviewï¼ˆX5WebViewï¼‰</span>
LinearLayout<span class="token punctuation">.</span>LayoutParams params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinearLayout<span class="token punctuation">.</span>LayoutParams</span><span class="token punctuation">(</span>LinearLayout<span class="token punctuation">.</span>LayoutParams<span class="token punctuation">.</span>MATCH_PARENT<span class="token punctuation">,</span> LinearLayout<span class="token punctuation">.</span>LayoutParams<span class="token punctuation">.</span>MATCH_PARENT<span class="token punctuation">)</span><span class="token punctuation">;</span>
WeakReference weakReference <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakReference</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//ä½¿ç”¨å¼±å¼•ç”¨å»æŒæœ‰å½“å‰Activity</span>
X5WebView webView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">X5WebView</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Context<span class="token punctuation">)</span> weakReference<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>
webView<span class="token punctuation">.</span><span class="token function">setLayoutParams</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
mWebviewLayout<span class="token punctuation">.</span><span class="token function">addView</span><span class="token punctuation">(</span>webView<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</blockquote>
<h4 id="1-6-Handler-å¼•èµ·çš„å†…å­˜æ³„æ¼"><a href="#1-6-Handler-å¼•èµ·çš„å†…å­˜æ³„æ¼" class="headerlink" title="1.6 Handler å¼•èµ·çš„å†…å­˜æ³„æ¼"></a>1.6 Handler å¼•èµ·çš„å†…å­˜æ³„æ¼</h4><p><em>ä»£ç è®²è§£ï¼š</em></p>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoActivity</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">{</span>
      Handler mHander <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span>	
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>å¦‚ä¸Šä»£ç å°±æ˜¯ä¸€ä¸ªå†…å­˜æ³„æ¼ä»£ç ï¼Œå’±ä»¬æ¥ç»†è¯´ä¸€ä¸‹ï¼š </p>
<blockquote>
<p><strong>é¦–å…ˆï¼Œ<code>mHandler</code> æ˜¯ä¸€ä¸ª <code>non-static-åŒ¿åå†…éƒ¨ç±»__å®ä¾‹</code> ï¼Œæ‰€ä»¥å…¶ä¸€å®šæŒæœ‰å¤–éƒ¨ç±»ï¼ˆDemoActivityï¼‰çš„å¼•ç”¨ã€‚ä¸”åˆå› æ¶ˆæ¯é˜Ÿåˆ—æ˜¯åœ¨ä¸€ä¸ª <code>Looper</code> çº¿ç¨‹ä¸­ä¸æ–­è½®è¯¢å¤„ç†æ¶ˆæ¯ï¼Œé‚£å°±å­˜åœ¨ä¸€ç§æƒ…å†µï¼Œå½“è¯¥ <code>DemoActivity</code> é€€å‡ºæ—¶ï¼ˆ<em>æ­¤æ—¶ï¼Œ<code>msg</code> å¯èƒ½å»¶è¿Ÿã€æˆ–å…¶ä»–åŸå› è¿˜æœªå¤„ç†çš„æƒ…å†µ</em>ï¼‰ï¼Œ<code>MessageQueue</code> ä¸­çš„ <code>Message</code> æŒæœ‰ <code>mHandler</code> å®ä¾‹å¼•ç”¨ï¼Œè€Œ <code>mHandler</code> åˆæŒæœ‰ <code>DemoActivity</code> å¼•ç”¨ï¼Œæœ€ç»ˆå¯¼è‡´è¯¥ <code>Activity</code> çš„å†…å­˜èµ„æºæ— æ³•åŠæ—¶å›æ”¶ï¼Œä»è€Œå¼•å‘å†…å­˜æ³„æ¼ã€‚</strong></p>
</blockquote>
<p><strong>ğŸ‘‰ğŸ»<code>Handler</code>å†…å­˜æ³„æ¼çš„è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<blockquote>
<ol>
<li>åœ¨ <code>Activity</code> é”€æ¯ï¼ˆ<code>onDestroy()</code>ï¼‰æ—¶ï¼Œç§»é™¤ <code>MessageQueue</code> ä¸­çš„æ¶ˆæ¯ï¼Œä»¥é¿å… <code>Looper</code> çº¿ç¨‹çš„ <code>MessageQueue</code> ä¸­æœ‰å¾…å¤„ç†çš„ <code>Message</code>ã€‚å¦‚ï¼š<blockquote>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  mHandler<span class="token punctuation">.</span><span class="token function">removeCallbacks</span><span class="token punctuation">(</span>xxxRunnable<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ç§»é™¤æŒ‡å®šæ¶ˆæ¯</span>
  mHandler<span class="token punctuation">.</span><span class="token function">removeCallbacksAndMessages</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ç§»é™¤æ‰€æœ‰ Callbacks å’Œ Messages</span>
<span class="token punctuation">}</span>
</code></pre>
</blockquote>
</li>
<li>ä½¿ç”¨ <code>static-Handler-å†…éƒ¨ç±»</code>ï¼Œç„¶åå¯¹ <code>Handler</code> æŒæœ‰çš„å¯¹è±¡ä½¿ç”¨ <code>å¼±å¼•ç”¨</code> ã€‚å½“ GC æ—¶ï¼Œå°±å¯ä»¥å›æ”¶ Handler æŒæœ‰çš„å¯¹è±¡äº†ã€‚å¦‚ï¼š<blockquote>
<pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyActivity</span> <span class="token keyword">extends</span> <span class="token class-name">Activity</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> MyHandler mHander <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyHandler</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mHandler<span class="token punctuation">.</span><span class="token function">removeCallbacksAndMessages</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">MyHandler</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> WeakReference<span class="token operator">&lt;</span>Context<span class="token operator">></span> context <span class="token operator">=</span> null<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token function">MyHandler</span><span class="token punctuation">(</span>Context context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakReference</span><span class="token operator">&lt;</span>Context<span class="token operator">></span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</blockquote>
</li>
</ol>
</blockquote>
<h4 id="1-7-å¤šçº¿ç¨‹å¼•èµ·çš„å†…å­˜æ³„æ¼"><a href="#1-7-å¤šçº¿ç¨‹å¼•èµ·çš„å†…å­˜æ³„æ¼" class="headerlink" title="1.7 å¤šçº¿ç¨‹å¼•èµ·çš„å†…å­˜æ³„æ¼"></a>1.7 å¤šçº¿ç¨‹å¼•èµ·çš„å†…å­˜æ³„æ¼</h4><p>å¸¸è§çš„ç”±çº¿ç¨‹å¼•èµ·çš„ leak æœ‰ï¼š<code>Runnable(Thread)</code>ã€<code>AsyncTask</code> â€¦â€¦</p>
<h5 id="1-7-1-Runnable-Thread"><a href="#1-7-1-Runnable-Thread" class="headerlink" title="1.7.1 Runnable(Thread)"></a>1.7.1 Runnable(Thread)</h5><p>å½“å¼‚æ­¥çº¿ç¨‹æŒæœ‰å¤–éƒ¨ Activity çš„å¼•ç”¨ï¼Œè‹¥çº¿ç¨‹æœªæ‰§è¡Œå®Œç”¨æˆ·å°±é€€å‡º Activity äº†ï¼Œå¤„ç†ä¸å¥½çº¿ç¨‹çš„å½’å®¿å°±ä¼šå¼•å‘ leakï¼Œè¿™æ˜¯å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­æœ€å®¹æ˜“å‡ºç°çš„ï¼</p>
<blockquote>
<p><em>ğŸ‘‰ğŸ»å¤šçº¿ç¨‹å¦‚ <code>Runnable</code> çš„å†…å­˜æ³„æ¼è§£å†³æ–¹æ¡ˆï¼š<strong>ç¡®ä¿ <code>Activity</code> é”€æ¯å‰ç»ˆæ­¢çº¿ç¨‹ã€‚</strong></em></p>
<p>ä¸€èˆ¬æˆ‘ä»¬æ˜¯ä½¿ç”¨ <code>Handler+Thread</code> ï¼Œåˆ™å¯é€šè¿‡ <code>mHandler.removeCallbacks(xxxRunnable) æˆ– mHandler.removeCallbacksAndMessages(null)</code> æ¥ç§»é™¤å¼‚æ­¥çº¿ç¨‹ï¼<br>å½“ç„¶ï¼Œæ¨èä½¿ç”¨ <code>RxJava</code> æ›´å®¹æ˜“~~</p>
</blockquote>
<h5 id="1-7-2-AsyncTask"><a href="#1-7-2-AsyncTask" class="headerlink" title="1.7.2 AsyncTask"></a>1.7.2 AsyncTask</h5><p><code>AsyncTask = Handler + Thread</code>ã€‚leak åŸç†ç±»åŒ <code>Runnable</code>ï¼ŒActivity é”€æ¯å‰ <code>doInBackground()</code> æœªå¾—åˆ°åœæ­¢ã€‚</p>
<blockquote>
<p><em>ğŸ‘‰ğŸ»å¤šçº¿ç¨‹å¦‚ <code>AsyncTask</code> çš„å†…å­˜æ³„æ¼è§£å†³æ–¹æ¡ˆï¼š<strong>æ¨èä½¿ç”¨ <code>cancel() + isCancelled()</code> ï¼</strong></em></p>
<blockquote>
<ul>
<li>è‹¥ AsyncTask ä»»åŠ¡ <code>è¿˜æœªå¼€å§‹</code> ä¸” <code>cancel</code>ï¼Œåˆ™èƒ½ç«‹å³å–æ¶ˆä»»åŠ¡ä¸”ä¸ä¼šæ‰§è¡Œï¼›</li>
<li>è‹¥ AsyncTask ä»»åŠ¡ <code>å·²å¼€å§‹</code> ä¸” <code>cancel</code>ï¼Œåˆ™ä¸èƒ½ç»ˆæ­¢çº¿ç¨‹ï¼ˆç›´åˆ°<code>doInBackground()</code>å®Œæ¯•ï¼‰ï¼Œ<code>cancel</code> åªèƒ½è®© <code>onPostExecute()</code> ä¸è¢«æ‰§è¡Œï¼›<br>å› æ­¤ï¼Œ<code>cancel</code> ä¸ä¼šç»ˆæ­¢æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹ï¼Œåªä¼šç»™ AsyncTask è®¾ç½® <code>cancelled</code> çŠ¶æ€ï¼Œé€šçŸ¥è¯¥çº¿ç¨‹ <code>åº”è¯¥ä¸­æ–­</code> äº†ï¼ˆæ³¨æ„åªæ˜¯åº”è¯¥ï¼‰ã€‚<br>æ‰€ä»¥ï¼Œä½¿ç”¨ <code>cancel</code> æ˜¯è¿˜è¦æ£€æŸ¥å½“å‰ task çŠ¶æ€ï¼ˆ<code>isCancelled()</code>ï¼‰ï¼Œä¿è¯å…¶åŠæ—¶é€€å‡ºï¼š<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> Integer <span class="token function">doInBackground</span><span class="token punctuation">(</span>Void<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">// Taskè¢«å–æ¶ˆäº†ï¼Œé©¬ä¸Šé€€å‡º</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isCancelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> null<span class="token punctuation">;</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token comment" spellcheck="true">// Taskè¢«å–æ¶ˆäº†ï¼Œé©¬ä¸Šé€€å‡º</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isCancelled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> null<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
</li>
</ul>
</blockquote>
<p><em>PSï¼š<code>AsyncTask</code> å·²è¿‡æ—¶ï¼Œä¸ä½¿ç”¨é«˜çº§å°è£…å‰æä¸‹ï¼ˆå¦‚ï¼š<code>RxJava</code>ï¼‰ï¼Œè¿˜ä¸å¦‚ç›´æ¥ä½¿ç”¨ <code>Handler</code> æ›´å¥½æ§åˆ¶ã€‚</em></p>
</blockquote>
<h3 id="2-ä¼˜åŒ–å†…å­˜ç©ºé—´"><a href="#2-ä¼˜åŒ–å†…å­˜ç©ºé—´" class="headerlink" title="2. ä¼˜åŒ–å†…å­˜ç©ºé—´"></a>2. ä¼˜åŒ–å†…å­˜ç©ºé—´</h3><h4 id="2-1-åˆç†åˆ©ç”¨å¯¹è±¡å¼•ç”¨ï¼ˆå¼º-è½¯-å¼±-è™šï¼‰"><a href="#2-1-åˆç†åˆ©ç”¨å¯¹è±¡å¼•ç”¨ï¼ˆå¼º-è½¯-å¼±-è™šï¼‰" class="headerlink" title="2.1 åˆç†åˆ©ç”¨å¯¹è±¡å¼•ç”¨ï¼ˆå¼º/è½¯/å¼±/è™šï¼‰"></a>2.1 åˆç†åˆ©ç”¨å¯¹è±¡å¼•ç”¨ï¼ˆ<code>å¼º/è½¯/å¼±/è™š</code>ï¼‰</h4><ol>
<li>å†…éƒ¨ç±»ï¼ˆéé™æ€+åŒ¿åï¼‰å†…å­˜æ³„æ¼ä¼˜åŒ–æ—¶ï¼šå¯ä½¿ç”¨ <code>è½¯å¼•ç”¨</code> å¤„ç† <code>Activity</code>ã€‚</li>
<li>å›¾ç‰‡ä¼˜åŒ–æ—¶ï¼šäº¦å¯ä½¿ç”¨ <code>è½¯å¼•ç”¨</code> å¤„ç† <code>Bitmap</code>ã€‚</li>
<li>è‡ªå®šä¹‰Appçš„ <code>Activityä»»åŠ¡æ ˆ</code> æ—¶ï¼šå¯ä½¿ç”¨ <code>è½¯å¼•ç”¨</code> å­˜å‚¨ <code>Activity</code>ï¼Œå‡ºæ ˆé”€æ¯å‰å¯åˆ¤æ–­ï¼Œä¹Ÿé¿å…å†…å­˜æ³„æ¼ã€‚</li>
</ol>
<h4 id="2-2-å‡å°‘ä¸å¿…è¦å†…å­˜å¼€é”€"><a href="#2-2-å‡å°‘ä¸å¿…è¦å†…å­˜å¼€é”€" class="headerlink" title="2.2 å‡å°‘ä¸å¿…è¦å†…å­˜å¼€é”€"></a>2.2 å‡å°‘ä¸å¿…è¦å†…å­˜å¼€é”€</h4><h5 id="2-2-1-æ…ç”¨æšä¸¾ï¼ŒGoogleæ¨è-IntDef-å’Œ-StringDef-æ›¿ä»£"><a href="#2-2-1-æ…ç”¨æšä¸¾ï¼ŒGoogleæ¨è-IntDef-å’Œ-StringDef-æ›¿ä»£" class="headerlink" title="2.2.1 æ…ç”¨æšä¸¾ï¼ŒGoogleæ¨è @IntDef å’Œ @StringDef æ›¿ä»£"></a>2.2.1 æ…ç”¨æšä¸¾ï¼ŒGoogleæ¨è <code>@IntDef</code> å’Œ <code>@StringDef</code> æ›¿ä»£</h5><blockquote>
<p>Googleå®˜æ–¹æ¨èåœ¨Androidä¸­ä½¿ç”¨ <code>@IntDef</code> å’Œ <code>@StringDef</code> æ›¿ä»£æšä¸¾ç±»å‹ã€‚</p>
</blockquote>
<ul>
<li><p>ç¬¬ä¸€æ­¥ï¼Œæ·»åŠ ä¾èµ–ï¼š</p>
<pre class=" language-groovy"><code class="language-groovy">compile <span class="token string">'com.android.support:support-annotations:25.1.0'</span>
</code></pre>
</li>
<li><p>ç¬¬äºŒæ­¥ï¼Œå®šä¹‰å¸¸é‡ -&gt; å£°æ˜æ„é€ æ–¹æ³•ï¼ˆ<code>@IntDef/@StringDef</code> åŒ…è£¹æ‰€æœ‰å¸¸é‡å¹¶å£°æ˜ <code>@Rententionä¸ºSOURCEç­–ç•¥</code>ï¼‰-&gt; <code>@XXXå¼å£°æ˜</code><br>&#96;&#96;&#96;java<br>public class MainActivity extends Activity {</p>
<p>  &#x2F;&#x2F; step-1ï¼šå…ˆå®šä¹‰ å¸¸é‡<br>  public static final int Jan &#x3D; 1;<br>  public static final int Feb &#x3D; 2;<br>  public static final int Mar &#x3D; 3;<br>  public static final int Apr &#x3D; 4;<br>  public static final int May &#x3D; 5;<br>  public static final int Jun &#x3D; 6;<br>  public static final int Jul &#x3D; 7;<br>  public static final int Aug &#x3D; 8;<br>  public static final int Sep &#x3D; 9;<br>  public static final int Oct &#x3D; 10;<br>  public static final int Nov &#x3D; 11;<br>  public static final int Dec &#x3D; 12;</p>
<p>  &#x2F;&#x2F; step-2ï¼šå£°æ˜æ„é€ å™¨ï¼Œç”¨ @IntDef â€œåŒ…ä½â€ å¸¸é‡å¹¶ @Retention å®šä¹‰ç­–ç•¥<br>  @IntDef({Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec})<br>  @Retention(RetentionPolicy.SOURCE)<br>  public @interface Months {}</p>
<p>  @Months int mNowMonth &#x3D; Jan;</p>
<p>  @Override<br>  protected void onCreate(Bundle savedInstanceState) {<br>  super.onCreate(savedInstanceState);<br>  setContentView(R.layout.activity_main);<br>  setNowMonth(Jan);<br><br>  &#x2F;&#x2F;å£°æ˜å˜é‡<br>  @Months int currentMonth &#x3D; getCurrentMonth();<br><br>  switch (currentMonth){<br>      case Jan:<br>          break;<br>      case Feb:<br>          break;<br>      â€¦<br>      default:<br>          break;<br>  }<br>  }</p>
<p>  public void setCurrentMonth(@Months int currentMonth) {<br>  this.currentMonth &#x3D; currentMonth;<br>  }</p>
<p>  @Months<br>  public int getCurrentMonth() {<br>  return mCurrentMonth;<br>  }</p>
</li>
</ul>
<p>}</p>
<pre><code>
å†å¦‚ï¼Œ`Toast` æºç ï¼Œå°±æ˜¯ä½¿ç”¨ `@IntDef` æ–¹å¼ï¼š
&gt; ```java
&gt; // android.widget.Toast.java
&gt; //
&gt; public class Toast &#123;
&gt;     static final String TAG = &quot;Toast&quot;;
&gt;     static final boolean localLOGV = false;
&gt; 
&gt;     /** @hide */
&gt;     @IntDef(prefix = &#123; &quot;LENGTH_&quot; &#125;, value = &#123;
&gt;             LENGTH_SHORT,
&gt;             LENGTH_LONG
&gt;     &#125;)
&gt;     @Retention(RetentionPolicy.SOURCE)
&gt;     public @interface Duration &#123;&#125;
&gt; 
&gt;     /**
&gt;      * Show the view or text notification for a short period of time.  This time
&gt;      * could be user-definable.  This is the default.
&gt;      * @see #setDuration
&gt;      */
&gt;     public static final int LENGTH_SHORT = 0;
&gt; 
&gt;     /**
&gt;      * Show the view or text notification for a long period of time.  This time
&gt;      * could be user-definable.
&gt;      * @see #setDuration
&gt;      */
&gt;     public static final int LENGTH_LONG = 1;
&gt;     ...
&gt; ```

##### 2.2.2 å¯¹è±¡æ± ã€çº¿ç¨‹ä¼˜åŒ–ï¼ˆçº¿ç¨‹æ± ï¼‰

çº¿ç¨‹æ± ï¼Œå³æ˜¯å¯¹è±¡æ± ä¸­çš„ä¸€ç§ã€‚éƒ½æ˜¯ä¸ºäº†é¿å…é¢‘ç¹åˆ›å»ºå¯¹è±¡ä¸é”€æ¯å¯¹è±¡ï¼Œé€ æˆå†…å­˜æŠ–åŠ¨ï¼Œè¿›è€Œå¼•å‘ OOM ã€‚æ‰€ä»¥ï¼Œä½¿ç”¨çº¿ç¨‹æ± ï¼Œæ˜¯å¯¹è±¡å¯é‡å¤åˆ©ç”¨çš„è¡¨ç°ã€‚

å¸¸è§çš„å¯¹è±¡æ± æœ‰ï¼š
&gt; - æ¶ˆæ¯æ± ã€‚è¯·ç”¨ï¼š`Message msg = Message.option()`
&gt; - çº¿ç¨‹æ± ã€‚è¯·ç”¨ï¼š`ThreadPoolExecutor å’Œ ScheduledThreadPoolExecutor` è¿™ä¸¤ä¸ªJavaä¸­çš„çº¿ç¨‹æ± ã€‚

å…¶ä¸­ï¼Œæœ€éœ€è¦æ³¨æ„çš„æ˜¯ `çº¿ç¨‹æ± ` ä½¿ç”¨ã€‚å¤šçº¿ç¨‹æ“ä½œä¸æ‰§è¡Œï¼Œå…¶å®æ˜¯è¿›ç¨‹çš„æœ€å°é¢—ç²’ï¼ˆçº¿ç¨‹ï¼‰åœ¨å¯¹ CPU æ—¶é—´ç‰‡è·å–è¿›è¡ŒæŠ¢å å¼äº‰å¤ºã€‚å¦‚æœè‡ªå·±åˆ›å»º Thread ä¸å…‰æœ‰å†…å­˜æŠ–åŠ¨é£é™©ï¼Œè¿˜æœ‰ CPU èµ„æºç«äº‰æ­»é”é—®é¢˜ã€‚æ‰€ä»¥ï¼Œæ¨èå°½é‡é‡‡ç”¨çº¿ç¨‹æ± åˆ›å»º Thread å¯¹è±¡ã€‚

#### 2.3 ListView/RecycleView ä¼˜åŒ–

åˆ—è¡¨ç»„ä»¶ä¼˜åŒ–æ­¥éª¤ï¼š
&gt; 1. ä½¿ç”¨ViewHolderæ¨¡å¼æ¥æé«˜æ•ˆç‡
&gt; 2. å¼‚æ­¥åŠ è½½ï¼šè€—æ—¶çš„æ“ä½œæ”¾åœ¨å¼‚æ­¥çº¿ç¨‹ä¸­
&gt; 3. `ListView/RecycleView`æ»‘åŠ¨ä¸­è¯·åˆ†é¡µåŠ è½½å’Œåœæ­¢åŠ è½½ï¼ˆå¦‚ï¼šå›¾ç‰‡ã€ä¿¡æ¯å¡«å……ç­‰ï¼‰

`ListView` ä¼˜åŒ–å‚è€ƒï¼š[ListViewçš„ä¼˜åŒ–](https://www.jianshu.com/p/f0408a0f0610)

#### 2.4 LruCache ç¼“å­˜

&gt; LruCacheï¼Œä½äº`android-support-v4/android.uti.LrueCache`åŒ…ä¸‹ã€‚

LruCacheç®—æ³•ï¼Œåˆç§°ä¸ºè¿‘æœŸæœ€å°‘ä½¿ç”¨ç®—æ³•ã€‚

LruCache ä¸­ Lru ç®—æ³•çš„å®é™…ä¸Šæ˜¯é€šè¿‡ `LinkedHashMap `æ¥å®ç°çš„ã€‚`LinkedHashMap` ç»§æ‰¿äº `HashMap`ï¼Œå®ƒä½¿ç”¨äº†ä¸€ä¸ªåŒå‘é“¾è¡¨æ¥å­˜å‚¨ `Map` ä¸­çš„ `Entry` é¡ºåºå…³ç³»ï¼Œå¯¹äº `getã€putã€remove` ç­‰æ“ä½œï¼Œ`LinkedHashMap` é™¤äº†è¦åš `HashMap` åšçš„äº‹æƒ…ï¼Œè¿˜åšäº›è°ƒæ•´ `Entry` é¡ºåºé“¾è¡¨çš„å·¥ä½œã€‚

LruCache ä¸­å°† `LinkedHashMap` çš„é¡ºåºè®¾ç½®ä¸º `LRU` é¡ºåºæ¥å®ç° `LRU` ç¼“å­˜ï¼Œ***æ¯æ¬¡è°ƒç”¨ `get`(ä¹Ÿå°±æ˜¯ä»å†…å­˜ç¼“å­˜ä¸­å–å›¾ç‰‡)ï¼Œåˆ™å°†è¯¥å¯¹è±¡ç§»åˆ°é“¾è¡¨çš„å°¾ç«¯ã€‚è°ƒç”¨ `put` æ’å…¥æ–°çš„å¯¹è±¡ä¹Ÿæ˜¯å­˜å‚¨åœ¨é“¾è¡¨å°¾ç«¯ï¼Œè¿™æ ·å½“å†…å­˜ç¼“å­˜è¾¾åˆ°è®¾å®šçš„æœ€å¤§å€¼æ—¶ï¼Œå°†é“¾è¡¨å¤´éƒ¨çš„å¯¹è±¡ï¼ˆè¿‘æœŸæœ€å°‘ç”¨åˆ°çš„ï¼‰ç§»é™¤***ã€‚

#### 2.5 å›¾ç‰‡å†…å­˜ä¼˜åŒ–ï¼ˆ`Bitmap`ï¼‰

å¤§å›¾å ç”¨å†…å­˜ï¼Œå®¹æ˜“ `OOM`ã€‚æ•…ï¼Œ

&gt; ***ğŸ‘‰ğŸ»å›¾ç‰‡å†…å­˜ä¼˜åŒ–ä¸€èˆ¬ç­–ç•¥ï¼š***  
&gt; 
&gt; **1. ç­‰æ¯”ï¼ˆæˆ–æŒ‡å®šç¼©å°å› å­ï¼‰ç¼©å°å›¾ç‰‡ï¼š**  
&gt; ```java
&gt; BitmapFactory.Options options = new BitmapFactory.Options(); 
&gt; options.inSampleSize = 2; // å›¾ç‰‡å®½é«˜éƒ½ä¸ºåŸæ¥çš„ 1/2ï¼Œå³å›¾ç‰‡ä¸ºåŸæ¥çš„ 1/4
&gt; ```
&gt; 
&gt; **2. å¯¹å›¾ç‰‡ä½¿ç”¨è½¯å¼•ç”¨ï¼Œå¹¶åŠæ—¶ `recycle` ï¼š**  
&gt; ```java
&gt;  SoftReference&lt;Bitmap&gt; bitmap = new SoftReference&lt;Bitmap&gt;(xxxBitmap); 
&gt;  if(bitmap != null) &#123;  
&gt;        if(bitmap.get() != null &amp;&amp; !bitmap.get().isRecycled())&#123; 
&gt;            bitmap.get().recycle(); 
&gt;            bitmap = null;  
&gt;        &#125; 
&gt; &#125;
&gt; ```

##### **ï¼ˆä¸€ï¼‰Bitmap ä¼˜åŒ–â‘ â€”â€”ã€å°ºå¯¸å‹ç¼©ã€ï¼ˆ`inSampleSize é‡‡æ ·ç‡æ–¹å¼`ï¼‰ï¼Œé¿å…OOMï¼ˆâ˜…â˜…â˜…â˜…â˜…ï¼‰**

Androidå›¾ç‰‡ç¼–ç¨‹ä¸­ï¼Œç¼–ç ä¸å¥½å°±ä¼šå®¹æ˜“å‡ºç°å¦‚ä¸‹ï¼š
```text
java.lang.OutofMemoryError:bitmap size exceeds VM budget
</code></pre>
<hr>
<p>Bitmap å›¾ç‰‡çš„ä¼˜åŒ–å‹ç¼©æœ‰å¤šç§æ–¹å¼ï¼Œä¸”åº”å¯¹äºä¸åŒåœºæ™¯ï¼Œä¾‹å¦‚å¸¸ç”¨çš„æœ‰ï¼š</p>
<ol>
<li>è´¨é‡å‹ç¼©ï¼ˆ<code>ä¸ä¼šæ”¹å˜å°ºå¯¸</code>ï¼‰ã€‚<code>boolean isAlreadyCompressedToStream = bitmapObj.compress(CompressFormat format, int quality, OutputStream stream)</code></li>
<li>å°ºå¯¸å‹ç¼©ï¼ˆ<code>æ”¹å˜å°ºå¯¸å®½é«˜</code>ï¼‰ï¼šæœ‰ <code>é‡‡æ ·ç‡inSampleSize</code>ã€ç›´æ¥åˆ›å»º<code>Bitmap.createBitmap(æä¾›widthå’Œheight...)</code> ç­‰æ–¹å¼ã€‚</li>
<li>LibJpeg å‹ç¼©ã€‚</li>
</ol>
<p><em>psï¼šæœ¬ç¯‡ä¸»è¦å¯¹å›¾ç‰‡å°ºå¯¸ <code>é‡‡æ ·ç‡inSampleSize</code> å‹ç¼©åšè¯¦è§£ï¼Œå…¶å®ƒå¦å¤–ç¯‡å¹…å†åšåˆ†æã€‚</em></p>
<hr>
<p>è¿™æ˜¯ç”±äº Android ç³»ç»Ÿç»™æ¯ä¸ª App DVM åˆ†é…å†…å­˜æœ‰é™åˆ¶å¤§å°ï¼Œå¦‚æœåŠ è½½ Bitmap ï¼Œæå®¹æ˜“å‡ºç° OOMï¼ˆOut of Memoryï¼‰ã€‚</p>
<blockquote>
<p><em><strong>æ‰€ä»¥ï¼Œå¦‚ä½•é«˜æ•ˆåŠ è½½ <code>Bitmap</code> å°±æœ‰å¿…è¦äº†ï¼ŒåŸºæ ¸å¿ƒæ€æƒ³ä¸ºï¼š</strong></em>  </p>
<ul>
<li><strong>åŸå› </strong>ï¼šä½¿ç”¨ <code>ImageView</code> æ¥æ˜¾ç¤ºå›¾ç‰‡ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ <code>ImageView</code> å¹¶æ²¡æœ‰åŸå§‹å›¾ç‰‡å°ºå¯¸é‚£ä¹ˆå¤§ã€‚è‹¥è¿™æ—¶æŠŠæ•´ä¸ªåŸå§‹å›¾ç‰‡åŠ è½½å¹¶è®¾ç½®ç»™ <code>ImageView</code> çš„è¯ï¼Œæ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œå†µä¸” <code>ImageView</code> ä¹Ÿæ— æ³•æ˜¾ç¤ºå‡ºåŸå›¾ã€‚  </li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š<em><strong>å¯æŒ‰ä¸€å®š <code>é‡‡æ ·ç‡</code> å°†å›¾ç‰‡ç¼©å°å†åŠ è½½è¿› <code>å†…å­˜</code> ï¼Œæœ€åå†è®¾ç½®ç»™ <code>ImageView</code> ã€‚è¿™æ ·å›¾ç‰‡åœ¨ <code>ImageView</code> ä¸Šæ—¢èƒ½æ˜¾ç¤ºï¼Œåˆèƒ½é™ä½å†…å­˜å¹¶ä¸€å®šç¨‹åº¦é¿å… <code>OOM</code> ï¼Œè‡ªç„¶è€Œç„¶æå‡äº† <code>Bitmap</code> çš„åŠ è½½æ€§èƒ½ï¼</strong></em></li>
</ul>
<p><em><strong>ğŸ‘‰ğŸ»é¦–å…ˆï¼ŒæŠŠå¦‚ä½•é«˜æ•ˆåŠ è½½ <code>Bitmap</code> çš„æ ¸å¿ƒæµç¨‹å½’çº³ä¸€ä¸‹ï¼š</strong></em>  </p>
<ol>
<li>é¦–å…ˆï¼Œè®¾ç½®å‚æ•° <code>BitmapFactory.Options.inJustDecodeBounds = true</code>ï¼ˆ<em><strong>trueï¼šåªåŠ è½½å›¾ç‰‡ä¿¡æ¯å¹¶ä¸åŠ è½½è¿›å…¥ <code>dvm</code> å†…å­˜ï¼</strong></em>ï¼‰å¹¶åŠ è½½å›¾ç‰‡ï¼›</li>
<li>ä» <code>Options</code> ä¸­å–å‡ºå›¾ç‰‡ <strong>åŸå§‹å®½é«˜</strong>ï¼Œå³å¯¹åº” <code>options.outWidthã€options.outHeight</code> å±æ€§ï¼›</li>
<li>æ ¹æ® <code>é‡‡æ ·ç‡è§„åˆ™</code> å¹¶ç»“åˆ <code>ç›®æ ‡ImageView</code> æ‰€éœ€å¤§å°è®¡ç®—å‡º <code>é‡‡æ ·ç‡ inSampleSize</code> ï¼›</li>
<li>æœ€åï¼Œå½’ç½®å‚æ•° <code>BitmapFactory.options.inJustDecodeBounds = false</code>ï¼ˆ<em><strong>falseï¼šä¼šåŠ è½½å›¾ç‰‡ä¸”è®¡å…¥ <code>dvm</code> å†…å­˜ï¼</strong></em>ï¼‰ï¼Œç„¶å <code>BitmapFactory.decodeXXX(...)</code> å¾—åˆ°å‹ç¼©åçš„ <code>Bitmap</code>ï¼Œå¹¶ç”¨äºè®¾ç½®ç»™ <code>ImageView</code> æ˜¾ç¤ºã€‚</li>
</ol>
</blockquote>
<hr>
<h5 id="1-åŠ è½½-Bitmap-çš„æ–¹å¼ï¼ˆå…±-4-ç§ï¼šBitmapFactory-decodeXXX-ï¼‰"><a href="#1-åŠ è½½-Bitmap-çš„æ–¹å¼ï¼ˆå…±-4-ç§ï¼šBitmapFactory-decodeXXX-ï¼‰" class="headerlink" title="1. åŠ è½½ Bitmap çš„æ–¹å¼ï¼ˆå…± 4 ç§ï¼šBitmapFactory.decodeXXX(...)ï¼‰"></a>1. åŠ è½½ Bitmap çš„æ–¹å¼ï¼ˆå…± 4 ç§ï¼š<code>BitmapFactory.decodeXXX(...)</code>ï¼‰</h5><p>åŠ è½½ <code>Bitmap</code> ä¸»è¦ç”±å·¥å‚ç±» <code>BitmapFactory</code> æä¾›ï¼Œåä¸º <code>BitmapFactory.decodeXXX(...) --&gt; BitmapFactory.nativeDecodeXXX(...)</code>ï¼Œä¸»è¦æœ‰ 4 ç±»ï¼š</p>
<blockquote>
<ul>
<li><code>BitmapFactory.decodeFile(...)</code>ï¼šä» <code>æ–‡ä»¶</code> åŠ è½½å¾—åˆ° <code>Bitmap</code> å¯¹è±¡ã€‚</li>
<li><code>BitmapFactory.decodeResource(...)</code>ï¼šä» <code>èµ„æº</code> åŠ è½½å¾—åˆ° <code>Bitmap</code> å¯¹è±¡ã€‚</li>
<li><code>BitmapFactory.decodeStream(...)</code>ï¼šä» <code>è¾“å…¥æµ</code> åŠ è½½å¾—åˆ° <code>Bitmap</code> å¯¹è±¡ã€‚</li>
<li><code>BitmapFactory.decodeByteArray(...)</code>ï¼šä» <code>å­—èŠ‚æ•°ç»„</code> åŠ è½½å¾—åˆ° <code>Bitmap</code> å¯¹è±¡ã€‚<br>å…¶ä¸­ï¼Œ<code>decodeFile/decodeResource</code> é—´æ¥è°ƒç”¨äº† <code>decodeStream</code>ï¼ˆä½†æ˜¯ resource-&gt;stream è¿˜å¤šäº†ä¸ªä¸­é—´æ­¥éª¤ï¼‰ã€‚ä¸”è¿™ 4 ç±»æ–¹æ³•éƒ½åˆ†åˆ«å¯¹åº”æœ‰ native æ–¹æ³• <code>BitmapFactory.nativeDecodeXXX(...)</code>ã€‚<pre class=" language-text"><code class="language-text">decodeFile --> decodeStream
decodeResource --> decodeResourceStream..åœ¨æ­¤è®¾ç½®å¤„ç†ä¸€äº›options --> decodeStream
</code></pre>
</li>
</ul>
</blockquote>
<h5 id="2-BitmapFactory-Options-å‚æ•°"><a href="#2-BitmapFactory-Options-å‚æ•°" class="headerlink" title="2. BitmapFactory.Options å‚æ•°"></a>2. BitmapFactory.Options å‚æ•°</h5><h5 id="â‘ -inSampleSize-å‚æ•°"><a href="#â‘ -inSampleSize-å‚æ•°" class="headerlink" title="â‘  inSampleSize å‚æ•°"></a>â‘  inSampleSize å‚æ•°</h5><p>ä»¥ä¸ŠåŠ è½½çš„ 4 ç§æ–¹å¼ï¼Œéƒ½æ”¯æŒå¸¦ <code>Options</code> å‚æ•°çš„é‡è½½æ–¹æ³•ï¼Œå³ <code>BitmapFactory.decodeXXX(..., @Nullable Options opts)</code> ï¼ˆå½“ç„¶ï¼Œå¯¹åº”çš„ native è‚¯å®šæ˜¯æœ‰ <code>Options</code> å‚æ•°çš„ï¼‰ã€‚</p>
<blockquote>
<p>Bitmap ç¼©æ”¾å¤„ç†éƒ½æ˜¯é€šè¿‡ <code>Options</code> å‚æ•°å®ç°ã€‚ä¸»è¦ç”¨åˆ°äº† <code>inSampleSize</code>ï¼Œå³é‡‡æ ·ç‡ã€‚é€šè¿‡è®¾ç½® <code>é‡‡æ ·ç‡</code> ï¼Œä»¥è¾¾åˆ° <code>å¯¹**å›¾ç‰‡åƒç´ **çš„**å®½ã€é«˜**è¿›è¡Œç¼©æ”¾</code>ï¼š   </p>
<ul>
<li><strong>å½“ <code>inSampleSize â‰¤ 1</code> æ—¶ï¼Œå³é‡‡æ ·åå›¾ç‰‡å¤§å°ä»ä¸ºå›¾ç‰‡åŸå§‹å¤§å°å°ºå¯¸ã€‚<code>&lt;1</code>ï¼Œä¹ŸæŒ‰ <code>=1</code> å¤„ç†ã€‚</strong></li>
<li><strong>å½“ <code>inSampleSize &gt; 1</code> æ—¶ï¼Œå³é‡‡æ ·åçš„å›¾ç‰‡å°†ä¼šç¼©å°ï¼Œç¼©æ”¾æ¯”ä¸º <code>1/inSampleSizeçš„2æ¬¡æ–¹</code>ï¼ˆ<em>å› ï¼šå®½å’Œé«˜éƒ½åˆ†åˆ«ç¼©å°äº† <code>inSmapleSize</code>ï¼ï¼ï¼</em>ï¼‰</strong></li>
</ul>
<p><em>ä¾‹å¦‚ï¼Œä¸€å¼  1024*1024 åƒç´ çš„å›¾ç‰‡ï¼Œé‡‡ç”¨ ARGB8888 æ ¼å¼å­˜å‚¨ï¼Œé‚£ä¹ˆå†…å­˜å¤§å° 1024Ã—1024Ã—4&#x3D;4MBã€‚å¦‚æœ inSampleSize&#x3D;2ï¼Œé‚£ä¹ˆé‡‡æ ·åçš„å›¾ç‰‡å†…å­˜å¤§å°ï¼š512Ã—512Ã—4&#x3D;1MBã€‚</em></p>
</blockquote>
<blockquote>
<p><strong>æ³¨æ„ï¼Œå®˜æ–¹ API å¯¹ <code>inSampleSize</code> çš„è¯´æ˜ï¼š</strong>  </p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**
 * If set to a value > 1, requests the decoder to subsample the original
 * image, returning a smaller image to save memory. The sample size is
 * the number of pixels in either dimension that correspond to a single
 * pixel in the decoded bitmap. For example, inSampleSize == 4 returns
 * an image that is 1/4 the width/height of the original, and 1/16 the
 * number of pixels. Any value &lt;= 1 is treated the same as 1. Note: the
 * decoder uses a final value based on powers of 2, any other value will
 * be rounded down to the nearest power of 2.
 */</span>
<span class="token keyword">public</span> <span class="token keyword">int</span> inSampleSize<span class="token punctuation">;</span>
</code></pre>
<p>å¤§ä½“æ„æ€è¿™æ ·çš„ï¼Œ<code>inSampleSize</code> å–å€¼ä¸º <code>2çš„å¹‚</code>ï¼ˆå¦‚ï¼š1ï¼Œ2ï¼Œ4ï¼Œ8â€¦â€¦ï¼‰ã€‚å¦‚æœ <code>inSampleSize</code> ä¸ä¸º2çš„æŒ‡æ•°çš„è¯ï¼Œå°±ä¼š <strong>å‘ä¸‹å–æ•´ä¸º2çš„æŒ‡æ•°</strong>ï¼ˆå¦‚ï¼Œ<code>inSampleSize=3</code> ï¼Œåˆ™æœ€ç»ˆä¼šè‡ªåŠ¨å‘ä¸‹å–å€¼ï¼Œæœ€ç»ˆå€¼ä¸º <code>inSampleSize=2</code>ï¼‰ã€‚</p>
</blockquote>
<hr>
<p><strong>ä½¿ç”¨ <code>inSampleSize</code> çš„æ³¨æ„äº‹é¡¹ï¼š</strong><br><strong>1. é‡‡æ ·ç‡ <code>inSampleSize</code> æ˜¯å¯¹åƒç´  <code>å®½å’Œé«˜</code> ä¸¤ä¸ªéƒ½åšç¼©æ”¾ï¼Œæ‰€ä»¥æ˜¯æˆæŒ‡æ•°å½¢å¼ï¼ˆ<code>1/(inSampleSize*inSmpleSize)</code>ï¼‰ã€‚</strong><br><strong>2. é€šå¸¸ï¼Œ<code>inSampleSize</code> æ˜¯æ ¹æ®å¯¹å®é™…å®½é«˜&#x2F;ç›®æ ‡æ‰€éœ€å®½é«˜ï¼Œä»¥æ­¤å…¬å¼åˆ†åˆ«è®¡ç®—å¾—å‡ºå®½å’Œé«˜çš„ç¼©æ”¾æ¯”ã€‚</strong><br><strong><em>3. æ³¨æ„ï¼Œ</em>æœ€ç»ˆå–çš„ç¼©æ”¾æ¯”åº”è¯¥æ˜¯å…¶ä¸­æœ€å°çš„ï¼Œå³ <code>inSampleSize=Math.min(widthInSampleSize, heightInSampleSize)</code>ï¼Œä»¥é¿å…ç»½æ”¾å›¾ç‰‡å¤ªå°ï¼Œè®¾ç½®åˆ° <code>ImageView</code> ä¸­ä¸èƒ½é“ºæ»¡ä»è€Œæ‹‰ä¼¸å¯¼è‡´åƒç´ æ¨¡ç³Šï¼ï¼ï¼</strong></p>
<p><em>ğŸ¥µç¤ºä¾‹ï¼ŒImageView å¤§å°ä¸º 100*100 pxï¼Œè€Œå›¾ç‰‡åŸå§‹å¤§å° 200*300 pxã€‚åˆ™è®¡ç®—å¾—å‡ºï¼Œå®½ç¼©æ”¾æ¯”ä¸º2ï¼Œé«˜ç¼©æ”¾æ¯”ä¸º3ã€‚æœ€ç»ˆ <code>inSampleSize=2</code>ï¼Œé‚£ä¹ˆç¼©æ”¾åå›¾ç‰‡ä¸º 100*150ï¼Œä»ç„¶é€‚åˆ ImageViewã€‚è‹¥ <code>inSampleSize=3</code>ï¼Œç¼©æ”¾åå›¾ç‰‡ä¸º 66.7*100</em>ï¼Œæ˜¾ç¤ºå…¶ä¸­çš„å®½æ¯” ImageView æ‰€éœ€çš„ç›®æ ‡å°ºå¯¸ 100px çš„å®½è¿˜å°ï¼Œé“ºä¸æ»¡å°±ä¼šæ¨ªå‘æ‹‰ä¼¸å¡«å……ï¼Œå¯¼è‡´çœ‹èµ·æ¥åƒç´ æ¨¡ç³Šäº†ï¼</p>
<hr>
<h5 id="â‘¡-inJustDecodeBounds-å‚æ•°"><a href="#â‘¡-inJustDecodeBounds-å‚æ•°" class="headerlink" title="â‘¡ inJustDecodeBounds å‚æ•°"></a>â‘¡ inJustDecodeBounds å‚æ•°</h5><p>è¦é¿å… Bitmap å¤§å›¾åŠ è½½åˆ°å†…å­˜å¯¼è‡´ OOMï¼Œæˆ‘ä»¬å°±éœ€è¦ä¸€å®šçš„é‡‡æ ·è§„åˆ™å¾—åˆ°é‡‡æ ·å› å­ <code>inSampleSize</code>ã€‚è€Œ <code>inSampleSize</code> çš„è®¡ç®—å…¬å¼åˆæ˜¯ï¼š</p>
<blockquote>
<p><strong>è®¡ç®—å…¬å¼</strong>ï¼š<code>inSampleSize = åŸå›¾å®½(opts.outWidth)æˆ–é«˜(opts.outHeight)/ç›®æ ‡æ˜¾ç¤ºå®½/é«˜</code></p>
</blockquote>
<p>è¦æƒ³å¾—åˆ°åŸå›¾å®½å’Œé«˜ä¿¡æ¯ï¼Œä½†åˆä¸èƒ½é¢„å…ˆåŠ è½½å›¾ç‰‡ä»¥é¿å…åˆ†é…åƒç´ å†…å­˜ï¼Œæœ‰ä»€ä¹ˆæ–¹æ³•å‘¢ï¼Ÿ</p>
<blockquote>
<p>ç­”ï¼šå®˜æ–¹çš„ <code>BitmapFactory.Options.inJustDecodeBounds</code> å‚æ•°å·²ç»æä¾›ä¾¿æ·äº†ï¼Œè®¾ç½® <code>inJustDecodeBounds = false</code> å³å¯ã€‚  </p>
<blockquote>
<p>è¯¥ <code>inJustDecodeBounds</code> å‚æ•°å­—é¢è¯‘ä¸ºâ€œä»…ä»…è§£ç å°ºå¯¸ç•Œé™â€ï¼Œç„¶åå°±ä¼šå¾—åˆ° <code>outXXX</code> ç³»åˆ— Bitmap å±æ€§ XXXã€‚</p>
<p><code>options.outXXX</code> æœ‰ï¼š</p>
<ul>
<li><code>&lt;int&gt; outWidth/outHeight</code>ï¼šåŸå›¾å®½&#x2F;é«˜</li>
<li><code>&lt;ColorSpace&gt; outColorSpace</code>ï¼š</li>
<li><code>&lt;Bitmap.Config&gt; outConfig</code>ï¼š</li>
</ul>
</blockquote>
</blockquote>
<h5 id="3-é«˜æ•ˆåŠ è½½-Bitmap-çš„æ ¸å¿ƒæµç¨‹"><a href="#3-é«˜æ•ˆåŠ è½½-Bitmap-çš„æ ¸å¿ƒæµç¨‹" class="headerlink" title="3. é«˜æ•ˆåŠ è½½ Bitmap çš„æ ¸å¿ƒæµç¨‹"></a>3. é«˜æ•ˆåŠ è½½ <code>Bitmap</code> çš„æ ¸å¿ƒæµç¨‹</h5><blockquote>
<p><em><strong>ğŸ‘‰ä½•é«˜æ•ˆåŠ è½½ <code>Bitmap</code> çš„æ ¸å¿ƒæµç¨‹ï¼š</strong></em><br><strong>ä¸€ã€è´¨é‡å‹ç¼©ã€‚</strong><br>å³å¯¹å›¾ç‰‡è´¨é‡ï¼ˆ<code>å­˜å‚¨å¤§å°</code>ï¼‰ï¼Œä¸€èˆ¬åº”ç”¨äºå­˜ <code>å‚¨äºSDå¡ã€äºŒè¿›åˆ¶ç½‘ç»œä¼ è¾“ï¼ˆå¦‚èŠå¤©ä¼ è¾“å›¾ç‰‡ã€ä¸Šä¼ è‡³æœåŠ¡å™¨ï¼‰ç­‰æœ‰å¤§å°é™åˆ¶åœºæ™¯</code> ç­‰æ—¶ï¼Œå‹ç¼©ä¸€å®šè´¨é‡å›¾ç‰‡ä»¥èŠ‚çº¦ç£ç›˜ç©ºé—´ã€‚</p>
<blockquote>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/**
 * Write a compressed version of the bitmap to the specified outputstream.
 * If this returns true, the bitmap can be reconstructed by passing a
 * corresponding inputstream to BitmapFactory.decodeStream(). Note: not
 * all Formats support all bitmap configs directly, so it is possible that
 * the returned bitmap from BitmapFactory could be in a different bitdepth,
 * and/or may have lost per-pixel alpha (e.g. JPEG only supports opaque
 * pixels).
 *
 * @param format   The format of the compressed image
 * @param quality  Hint to the compressor, 0-100. The value is interpreted
 *                 differently depending on the {@link CompressFormat}.
 * @param stream   The outputstream to write the compressed data.
 * @return true if successfully compressed to the specified stream.
 */</span>
<span class="token annotation punctuation">@WorkerThread</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">compress</span><span class="token punctuation">(</span>CompressFormat format<span class="token punctuation">,</span> <span class="token keyword">int</span> quality<span class="token punctuation">,</span> OutputStream stream<span class="token punctuation">)</span>
è§£é‡Šå‚æ•°ï¼š
<span class="token operator">-</span> formatï¼šæƒ³è¦å‹ç¼©æˆçš„å›¾ç‰‡æ ¼å¼ï¼Œå¦‚ `JPEG<span class="token operator">/</span>PNG<span class="token operator">/</span>WebP<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>`
<span class="token operator">-</span> qualityï¼šä¿ç•™è´¨é‡ã€‚å‹ç¼©è´¨é‡æ¯”å–å€¼ <span class="token number">0</span><span class="token operator">~</span><span class="token number">100</span>ï¼Œè¡¨ç¤ºå°†è¦ä¿ç•™ <span class="token number">0</span><span class="token operator">~</span><span class="token number">100</span><span class="token operator">%</span>ï¼ˆå³å‹ç¼©æ‰æˆ–ç§°ä¸¢å¤±è´¨é‡ `<span class="token number">1</span><span class="token operator">-</span>quality<span class="token operator">%</span>`ï¼‰ã€‚å¦‚ï¼Œ<span class="token number">80</span>è¡¨ç¤ºä¿ç•™åŸå›¾<span class="token number">80</span><span class="token operator">%</span>çš„è´¨é‡ï¼Œå‹ç¼©ä¸¢æ‰<span class="token number">20</span><span class="token operator">%</span>è´¨é‡ã€‚
<span class="token operator">-</span> streamï¼šè¾“å‡ºæµï¼Œè¡¨ç¤ºå°†å‹ç¼©è¿‡åçš„ Bitmap ä»¥äºŒè¿›åˆ¶æµå½¢å¼å­˜å‚¨ã€‚å¯ç”¨äºå†™å…¥sdå¡ã€æˆ–è€…èŠå¤©ç½‘ç»œå›¾ç‰‡ä¼ è¾“é™åˆ¶ï¼ˆå‡å¦‚wechatèŠå¤©åªå…è®¸å‘é€25kbä»¥ä¸‹å›¾ç‰‡ï¼‰
</code></pre>
</blockquote>
<p><strong>äºŒã€å°ºå¯¸å‹ç¼©ã€‚</strong><br>å³å¯¹å›¾ç‰‡å°ºå¯¸å¤§å°è¿›è¡Œç¼©æ”¾ï¼ˆ<code>å†…å­˜å¤§å°</code>ï¼‰ï¼Œåº”ç”¨äºåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå‡å°å ç”¨å†…å­˜ï¼Œé¿å… OOMã€‚</p>
<ol>
<li>é¦–å…ˆï¼Œè®¾ç½®å‚æ•° <code>BitmapFactory.Options.inJustDecodeBounds = true</code>ï¼ˆ<em><strong>trueï¼šåªåŠ è½½å›¾ç‰‡ä¿¡æ¯å¹¶ä¸åŠ è½½è¿›å…¥ <code>dvm</code> å†…å­˜ï¼</strong></em>ï¼‰å¹¶åŠ è½½å›¾ç‰‡ä¿¡æ¯ï¼ˆæ•…ï¼Œè¿”å›çš„ Bitmap æ˜¯ nullï¼ï¼‰ï¼›</li>
<li>ä» <code>Options</code> ä¸­å–å‡ºå›¾ç‰‡ <strong>åŸå§‹å®½é«˜</strong>ï¼Œå³å¯¹åº” <code>options.outWidthã€options.outHeight</code> å±æ€§ï¼ˆæ³¨æ„ï¼Œè¿™ä¸ªè¿‡ç¨‹å°±å«é‡‡æ ·ï¼ï¼‰ï¼›</li>
<li>æ ¹æ® <code>é‡‡æ ·ç‡è§„åˆ™</code> å¹¶ç»“åˆ <code>ç›®æ ‡ImageView</code> æ‰€éœ€å¤§å°è®¡ç®—å‡º <code>é‡‡æ ·ç‡ inSampleSize</code> ï¼›</li>
<li>æœ€åï¼Œå½’ç½®å‚æ•° <code>BitmapFactory.options.inJustDecodeBounds = false</code>ï¼ˆ<em><strong>falseï¼šä¼šåŠ è½½å›¾ç‰‡ä¸”è®¡å…¥ <code>dvm</code> å†…å­˜ï¼</strong></em>ï¼‰ï¼Œç„¶å <code>BitmapFactory.decodeXXX(...)</code> å¾—åˆ°å‹ç¼©åçš„ <code>Bitmap</code>ï¼Œå¹¶ç”¨äºè®¾ç½®ç»™ <code>ImageView</code> æ˜¾ç¤ºã€‚</li>
</ol>
</blockquote>
<h5 id="4-é«˜æ•ˆåŠ è½½-Bitmap-çš„ä»£ç å®ç°"><a href="#4-é«˜æ•ˆåŠ è½½-Bitmap-çš„ä»£ç å®ç°" class="headerlink" title="4. é«˜æ•ˆåŠ è½½ Bitmap çš„ä»£ç å®ç°"></a>4. é«˜æ•ˆåŠ è½½ <code>Bitmap</code> çš„ä»£ç å®ç°</h5><pre class=" language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">static</span> Bitmap <span class="token function">decodeSampledBitmapFromResource</span><span class="token punctuation">(</span>Resources res<span class="token punctuation">,</span> <span class="token keyword">int</span> resId<span class="token punctuation">,</span> <span class="token keyword">int</span> reqWidth<span class="token punctuation">,</span> <span class="token keyword">int</span> reqHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    BitmapFactory<span class="token punctuation">.</span>Options options <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BitmapFactory<span class="token punctuation">.</span>Options</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    options<span class="token punctuation">.</span>inJustDecodeBounds <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// åŠ è½½å›¾ç‰‡</span>
    BitmapFactory<span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> resId<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// è®¡ç®—ç¼©æ”¾æ¯”</span>
    options<span class="token punctuation">.</span>inSampleSize <span class="token operator">=</span> <span class="token function">calculateInSampleSize</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> reqHeight<span class="token punctuation">,</span> reqWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    options<span class="token punctuation">.</span>inJustDecodeBounds <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// é‡æ–°åŠ è½½å›¾ç‰‡</span>
    <span class="token keyword">return</span> BitmapFactory<span class="token punctuation">.</span><span class="token function">decodeResource</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> resId<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">int</span> <span class="token function">calculateInSampleSize</span><span class="token punctuation">(</span>BitmapFactory<span class="token punctuation">.</span>Options options<span class="token punctuation">,</span>
    <span class="token keyword">int</span> reqHeight<span class="token punctuation">,</span> <span class="token keyword">int</span> reqWidth<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> height <span class="token operator">=</span> options<span class="token punctuation">.</span>outHeight<span class="token punctuation">;</span>
    <span class="token keyword">int</span> width <span class="token operator">=</span> options<span class="token punctuation">.</span>outWidth<span class="token punctuation">;</span>
    <span class="token keyword">int</span> inSampleSize <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>height <span class="token operator">></span> reqHeight<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>width <span class="token operator">></span> reqWidth<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> halfHeight <span class="token operator">=</span> height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> halfWidth <span class="token operator">=</span> width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>

        <span class="token comment" spellcheck="true">// è®¡ç®—ç¼©æ”¾æ¯”ï¼Œæ˜¯2çš„æŒ‡æ•°</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span>halfHeight <span class="token operator">/</span> inSampleSize<span class="token punctuation">)</span> <span class="token operator">>=</span> reqHeight<span class="token punctuation">)</span> 
                    <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>halfWidth <span class="token operator">/</span> inSampleSize<span class="token punctuation">)</span> <span class="token operator">>=</span> reqWidth<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            inSampleSize <span class="token operator">*=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> inSampleSize<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// è°ƒç”¨ï¼š</span>
mImageView<span class="token punctuation">.</span><span class="token function">setImageBitmap</span><span class="token punctuation">(</span><span class="token function">decodeSampledBitmapFromResource</span><span class="token punctuation">(</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> R<span class="token punctuation">.</span>mipmap<span class="token punctuation">.</span>ic_launcher<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="ã€ç¨³ã€‘å¼‚å¸¸æ‹¦æˆªä¼˜åŒ–"><a href="#ã€ç¨³ã€‘å¼‚å¸¸æ‹¦æˆªä¼˜åŒ–" class="headerlink" title="ã€ç¨³ã€‘å¼‚å¸¸æ‹¦æˆªä¼˜åŒ–"></a>ã€ç¨³ã€‘å¼‚å¸¸æ‹¦æˆªä¼˜åŒ–</h2><p>è¯·æ±‚æœåŠ¡ç«¯æ•°æ®è¿‡ç¨‹ä¸­ï¼Œè®¿é—®æ¥å£å’Œè§£æè¿”å›æ•°æ®éƒ½å¯èƒ½å‡ºé”™ï¼Œæˆ‘ä»¬å¯é€šè¿‡æ‹¦æˆªå™¨åœ¨è¿™ä¸¤å±‚æ‹¦æˆªé”™è¯¯ã€‚</p>
<ul>
<li>åœ¨è®¿é—®æ¥å£æ—¶ï¼Œæˆ‘ä»¬ä¸ç”¨è®¾ç½®æ‹¦æˆªå™¨ï¼Œå› ä¸ºä¸€æ—¦å‡ºç°é”™è¯¯ï¼ŒRetrofitä¼šè‡ªåŠ¨æŠ›å‡ºå¼‚å¸¸ã€‚æ¯”å¦‚ï¼Œå¸¸è§è¯·æ±‚å¼‚å¸¸404ï¼Œ500ï¼Œ503ç­‰ç­‰ã€‚</li>
<li>åœ¨è§£ææ•°æ®æ—¶ï¼Œæˆ‘ä»¬è®¾ç½®ä¸€ä¸ªæ‹¦æˆªå™¨ï¼Œåˆ¤æ–­Resulté‡Œé¢çš„codeæ˜¯å¦ä¸ºæˆåŠŸï¼Œå¦‚æœä¸æˆåŠŸï¼Œåˆ™è¦æ ¹æ®ä¸æœåŠ¡å™¨çº¦å®šå¥½çš„é”™è¯¯ç æ¥æŠ›å‡ºå¯¹åº”çš„å¼‚å¸¸ã€‚æ¯”å¦‚ï¼Œtokenå¤±æ•ˆï¼Œç¦ç”¨åŒè´¦å·ç™»é™†å¤šå°è®¾å¤‡ï¼Œç¼ºå°‘å‚æ•°ï¼Œå‚æ•°ä¼ é€’å¼‚å¸¸ç­‰ç­‰ã€‚</li>
</ul>
<h1 id="ï¼ˆäºŒï¼‰ä¼˜åŒ–ï¼šã€Šæµç•…åº¦ã€‹"><a href="#ï¼ˆäºŒï¼‰ä¼˜åŒ–ï¼šã€Šæµç•…åº¦ã€‹" class="headerlink" title="ï¼ˆäºŒï¼‰ä¼˜åŒ–ï¼šã€Šæµç•…åº¦ã€‹"></a>ï¼ˆäºŒï¼‰ä¼˜åŒ–ï¼šã€Šæµç•…åº¦ã€‹</h1><p>äº¤äº’ï¼Œæ˜¯é¢å‘ç”¨æˆ·æœ€ç›´æ¥çš„ä½“éªŒã€‚<strong>æµç•…åº¦ &#x3D; ä¸å¡é¡¿ã€ä¸æ»‘ã€å¿«é€Ÿã€‚</strong> å¯ä»å¦‚ä¸‹ 2 å¤§æ–¹é¢å…¥æ‰‹ï¼š</p>
<ul>
<li><strong>UIç»˜åˆ¶</strong>ï¼šâ€œå±‚çº§æ·±ã€é¡µé¢å¤æ‚ã€åˆ·æ–°ä¸åˆç†â€ï¼Œè¿™äº›å°†ä¼šå¯¼è‡´å¡é¡¿ï¼Œæ›´å¤šè¡¨ç°åœ¨UIã€å¯åŠ¨ã€è·³è½¬åˆ°é¡µé¢çš„ç»˜åˆ¶ä¸Šã€‚</li>
<li><strong>æ•°æ®å¤„ç†</strong>ï¼šâ€œæ•°æ®å¤„ç†é‡å¤§â€ï¼Œæœ‰ï¼š1. ä¸»çº¿ç¨‹å¤„ç†æ•°æ®ã€‚2. æ•°æ®å¤„ç†å ç”¨ CPU é«˜ï¼Œå¯¼è‡´ä¸»çº¿ç¨‹æ‹¿ä¸åˆ°æ—¶é—´ç‰‡ã€‚3. å†…å­˜å¢åŠ å¯¼è‡´ <code>GC</code> é¢‘ç¹ï¼Œä»è€Œå¼•èµ·å¡é¡¿ã€‚</li>
</ul>
<blockquote>
<p><em><strong>Androidç³»ç»Ÿæ¯éš” <code>16.6ms(1/60fps)</code> å°±ä¼šå‘å‡ºä¸€ä¸ª <code>VSYNCä¿¡å·</code> ï¼Œä»¥è§¦å‘å¯¹ UI æ¸²æŸ“ã€‚å¦‚æ¸²æŸ“æˆåŠŸï¼Œè¿™æ ·å°±èƒ½è¾¾åˆ°æµç•…ç”»é¢æ‰€éœ€çš„ <code>60FPSï¼ˆæ¯ç§’åˆ·æ–°60å¸§ï¼‰</code> ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ60fps ç”¨æˆ·æ„Ÿè§‰ä¸åˆ°å¡ã€‚</strong></em> ä¾‹å¦‚ï¼Œè‹¥æŸæ“ä½œè€—æ—¶ 20ms ï¼Œç³»ç»Ÿå¾—åˆ° VSYNC ä¿¡å·æ—¶å°±æ— æ³•æ­£å¸¸æ¸²æŸ“ï¼Œå°±ä¼šå‡ºç°ä¸¢å¸§ä»è€Œè¡¨ç°å¡é¡¿ã€‚  </p>
<p><strong>â˜æ€»ç»“å¡é¡¿åŸå› ï¼š</strong></p>
<ol>
<li><strong>ç»˜åˆ¶ä»»åŠ¡é‡ï¼Œç»˜åˆ¶ä¸€å¸§æ—¶é—´é•¿ã€‚</strong></li>
<li><strong>ä¸»çº¿ç¨‹å¤ªå¿™ï¼Œæ ¹æ®ç³»ç»Ÿä¼ é€’çš„ <code>VSYNCä¿¡å·</code> æ¥æ—¶å°šæœªå‡†å¤‡å¥½æ•°æ®ä»è€Œå¯¼è‡´ä¸¢å¸§ã€‚</strong></li>
</ol>
</blockquote>
<p>æ‰€ä»¥ï¼Œæµç•…åº¦åˆ™ä»å¦‚ä¸‹å‡ æ–¹é¢ä¼˜åŒ–ï¼š</p>
<h2 id="ã€æµã€‘1-å¸ƒå±€ä¼˜åŒ–"><a href="#ã€æµã€‘1-å¸ƒå±€ä¼˜åŒ–" class="headerlink" title="ã€æµã€‘1. å¸ƒå±€ä¼˜åŒ–"></a>ã€æµã€‘1. å¸ƒå±€ä¼˜åŒ–</h2><p>Google å®˜æ–¹å»ºè®® view å¸ƒå±€å±‚çº§ä¸å®œè¶…è¿‡ <code>10</code> ä¸” å»ºè®®ç”¨ <code>RelativeLayout</code> æ›¿ä»£ <code>LinearLayout</code> ä½œä¸ºæ ¹å¸ƒå±€ï¼ŒAndroidStudio 2.3 èµ·ä½¿ç”¨ <code>ConstraintLayout</code> é»˜è®¤æ ¹å¸ƒå±€ã€‚</p>
<blockquote>
<ul>
<li><strong>å¸ƒå±€å¤ç”¨</strong>ï¼Œä½¿ç”¨ <code>&lt;include&gt;æ ‡ç­¾</code> é‡ç”¨ layoutã€‚</li>
<li><strong>æé«˜æ˜¾ç¤ºé€Ÿåº¦</strong>ï¼Œä½¿ç”¨ <code>&lt;ViewStub&gt;</code> å»¶è¿Ÿ view åŠ è½½ï¼Œå°¤å…¶ç”¨åœ¨ empty-view ç©ºæ•°æ®å ä½æ˜¾ç¤ºï¼ˆä¸æ˜¾ç¤ºå‡ºæ¥ï¼Œå°±ä¸å å†…å­˜ç©ºé—´ï¼‰ã€‚</li>
<li><strong>å‡å°‘å±‚çº§</strong>ï¼Œä½¿ç”¨ <code>&lt;merge&gt;æ ‡ç­¾</code> æ›¿æ¢çˆ¶çº§å¸ƒå±€ï¼Œå°¤å…¶å¸ƒå±€åªæœ‰ä¸€ä¸ªæ§ä»¶çš„å¤§å¤šæ•°æƒ…å†µä¸‹ã€‚</li>
<li><strong>æ³¨æ„ä½¿ç”¨ <code>wrap_content</code> ï¼Œä¼šå¢åŠ  <code>measure</code> è®¡ç®—æˆæœ¬</strong>ã€‚</li>
<li><strong>åˆ é™¤æ§ä»¶ä¸­æ— ç”¨å±æ€§</strong>ã€‚</li>
</ul>
</blockquote>
<h2 id="ã€æµã€‘2-æ¸²æŸ“ä¼˜åŒ–"><a href="#ã€æµã€‘2-æ¸²æŸ“ä¼˜åŒ–" class="headerlink" title="ã€æµã€‘2. æ¸²æŸ“ä¼˜åŒ–"></a>ã€æµã€‘2. æ¸²æŸ“ä¼˜åŒ–</h2><p>ä»€ä¹ˆæ˜¯ <code>è¿‡æ¸¡ç»˜åˆ¶ï¼ˆoverdrawï¼‰</code> ï¼Ÿç­”ï¼š<em>åœ¨å±å¹•ä¸ŠæŸä¸€åƒç´ åœ¨åŒä¸€å¸§æ—¶é—´å†…è¢«ç»˜åˆ¶äº†å¤šæ¬¡</em>ã€‚å°¤å…¶æ˜¯åœ¨å¤šå±‚é‡å UIç»“æ„é‡Œï¼Œè‹¥ä¸å¯è§UIä¹Ÿåšç»˜åˆ¶æ“ä½œï¼Œå°±ä¼šå¯¼è‡´æŸäº›åƒç´ åŒºåŸŸè¢«ç»˜åˆ¶å¤šæ¬¡ï¼Œå°±ä¼šæµªè´¹ <code>CPU</code> å’Œ <code>GPU</code> èµ„æºã€‚</p>
<p><strong>å¦‚ä½•æ£€æµ‹æ˜¯å¦è¿‡æ¸¡ç»˜åˆ¶ï¼šå¼€å‘è€…é€‰é¡¹ - è°ƒè¯•GPUè¿‡æ¸¡ç»˜åˆ¶ - æ˜¾ç¤ºè¿‡æ¸¡ç»˜åˆ¶åŒºåŸŸ</strong></p>
<blockquote>
<p><strong>é¿å…è¿‡æ¸¡ç»˜åˆ¶ï¼Œä¼˜åŒ–ï¼š</strong>  </p>
<ul>
<li>å¸ƒå±€ä¼˜åŒ–ã€‚ç§»é™¤ xml ä¸­éå¿…é¡»çš„èƒŒæ™¯ã€ç§»é™¤ Window é»˜è®¤èƒŒæ™¯ã€å‡å°‘é€æ˜åº¦çš„ä½¿ç”¨ã€layoutå±‚çº§æ‰å¹³åŒ–æˆ–ä½¿ç”¨ <code>ConstraintLayout</code> ã€æŒ‰éœ€æ˜¾ç¤ºå ä½èƒŒæ™¯å›¾ç‰‡ã€‚</li>
<li>è‡ªå®šä¹‰viewä¼˜åŒ–ã€‚ä½¿ç”¨ <code>canvas.clipRect() å’Œ canvas.quickReject()</code> æ¥å¸®åŠ©ç³»ç»Ÿè¯†åˆ«é‚£äº›å¯è§çš„åŒºåŸŸï¼Œåªæœ‰åœ¨æ­¤åŒºåŸŸå†…æ‰ä¼šè¢«ç»˜åˆ¶ã€‚</li>
</ul>
</blockquote>
<h3 id="1-ç§»é™¤èƒŒæ™¯-Background"><a href="#1-ç§»é™¤èƒŒæ™¯-Background" class="headerlink" title="1. ç§»é™¤èƒŒæ™¯ Background"></a>1. ç§»é™¤èƒŒæ™¯ Background</h3><blockquote>
<ul>
<li><strong>ç§»é™¤ <code>Theme.Window.Background</code></strong><br>Activityæ˜¯ä¾é™„äº Window æ˜¾ç¤ºçš„ï¼Œé€šå¸¸ä½¿ç”¨ <code>theme</code> æ—¶éƒ½ä¼šåŒ…å«é»˜è®¤çš„ <code>background</code>ã€‚è€Œæˆ‘ä»¬çš„ <code>layout</code> å¸ƒå±€æ–‡ä»¶ä¸­å¯èƒ½åˆæœ‰è‡ªå·±çš„èƒŒæ™¯ï¼Œä»è€Œå¯¼è‡´äº†è¿‡ç»˜:<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>AppTheme<span class="token punctuation">"</span></span> <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Theme.AppCompat.Light.NoActionBar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style language-css">
   &lt;item name=<span class="token string">"android:windowBackground"</span>>@color/background_material_light&lt;/item>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
  <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
  <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
  <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@color/white<span class="token punctuation">"</span></span>
  <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>..<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LinearLayout</span><span class="token punctuation">></span></span>
</code></pre>
<blockquote>
<p><strong>è§£å†³ï¼ŒæŠŠ <code>theme</code> çš„ <code>background</code> å»é™¤</strong>ï¼š</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>AppTheme<span class="token punctuation">"</span></span> <span class="token attr-name">parent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Theme.AppCompat.Light.NoActionBar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style language-css">
   &lt;item name=<span class="token string">"android:windowBackground"</span>>@null&lt;/item>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
</code></pre>
<p>æˆ–è€…ï¼Œåœ¨ <code>Activity.onCreate</code> ä¸­å»é™¤ window èƒŒæ™¯ï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token function">getWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setBackground</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</blockquote>
</li>
<li><strong>ç§»é™¤ <code>å­æ§ä»¶.Background</code></strong><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>android</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://schemas.android.com/apk/res/android<span class="token punctuation">"</span></span>
  <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
  <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>match_parent<span class="token punctuation">"</span></span>
  <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@color/white<span class="token punctuation">"</span></span>
  <span class="token attr-name"><span class="token namespace">android:</span>orientation</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vertical<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>EditText</span>
         <span class="token attr-name">...</span>
          <span class="token attr-name"><span class="token namespace">android:</span>background</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@drawable/alert_edit_bg1<span class="token punctuation">"</span></span>
         <span class="token attr-name">...</span> <span class="token punctuation">/></span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LinearLayout</span><span class="token punctuation">/></span></span>
</code></pre>
å…¶å®ï¼Œè¿™æƒ…å†µåœ¨å®é™…å¼€å‘ä¸­å¾ˆéš¾é¿å…ã€‚æˆ‘ä»¬åªæœ‰å°½å¯èƒ½æ ¹æ®æƒ…å†µæ¥å†³å®šæ˜¯å¦å–æ¶ˆèƒŒæ™¯ã€‚<strong>å¦‚å­viewæœ‰èƒŒæ™¯ä¸”å’Œçˆ¶viewèƒŒæ™¯ä¸ä¸€æ ·ï¼Œåˆ™å¯ä»¥å–æ¶ˆçˆ¶viewèƒŒæ™¯ã€‚</strong></li>
</ul>
</blockquote>
<h3 id="2-layoutå±‚çº§æ‰å¹³åŒ–"><a href="#2-layoutå±‚çº§æ‰å¹³åŒ–" class="headerlink" title="2. layoutå±‚çº§æ‰å¹³åŒ–"></a>2. layoutå±‚çº§æ‰å¹³åŒ–</h3><h4 id="2-1-ä½¿ç”¨åµŒå¥—å°‘çš„å¸ƒå±€"><a href="#2-1-ä½¿ç”¨åµŒå¥—å°‘çš„å¸ƒå±€" class="headerlink" title="2.1 ä½¿ç”¨åµŒå¥—å°‘çš„å¸ƒå±€"></a>2.1 ä½¿ç”¨åµŒå¥—å°‘çš„å¸ƒå±€</h4><blockquote>
<ul>
<li>ç›¸åŒå±‚çº§ä¸‹ï¼Œ<code>FrameLayout</code> æ•ˆç‡æœ€é«˜ï¼Œå…¶æ¬¡æ˜¯ <code>LinearLayout</code>ã€‚</li>
<li>èƒ½ç”¨ RelativeLayout&#x2F;ConstraintLayout å°±ä¼˜å…ˆä½¿ç”¨ï¼Œè€Œä¸æ˜¯ä¸€å‘³ä½¿ç”¨ LinearLayoutã€‚</li>
</ul>
</blockquote>
<p><strong>ã€Š<code>RelativeLayout</code> å’Œ <code>LinearLayout</code> æ€§èƒ½å¯¹æ¯”ã€‹ï¼š</strong></p>
<ol>
<li><p>RelativeLayout ä¼šè®©å­Viewè°ƒç”¨ ++2æ¬¡++  <code>onMeasure</code>ï¼ŒLinearLayout åœ¨ <strong>æœ‰weight</strong> æ—¶ï¼Œä¹Ÿä¼šè°ƒç”¨å­View  ++2æ¬¡++  <code>onMeasure</code>ã€‚</p>
<blockquote>
<ul>
<li>RelativeLayout ä¼šå¯¹ å­view åš 2 æ¬¡ measureã€‚</li>
<li>å¦‚æœä¸ä½¿ç”¨ weight å±æ€§ï¼ŒLinearLayout ä¼šåœ¨å½“å‰æ–¹å‘ä¸Šè¿›è¡Œ 1 æ¬¡ measureï¼Œå®Œæˆäº†å†å¯¹è®¾ç½®è¿‡ weight å±æ€§çš„ å­view åšç¬¬ 2 æ¬¡ measureã€‚å¯è§ï¼Œweight å±æ€§å¯¹æ€§èƒ½æœ‰å½±å“ï¼Œå°å¿ƒä½¿ç”¨ã€‚</li>
</ul>
</blockquote>
</li>
<li><p>RelativeLayout çš„å­Viewå¦‚æœé«˜åº¦å’Œ RelativeLayout ä¸åŒï¼Œåˆ™ä¼šå¼•å‘æ•ˆç‡é—®é¢˜ï¼Œå½“å­Viewå¾ˆå¤æ‚æ—¶ï¼Œè¿™ä¸ªé—®é¢˜ä¼šæ›´åŠ ä¸¥é‡ã€‚å¦‚æœå¯ä»¥ï¼Œ<strong>å°½é‡ä½¿ç”¨ <code>padding</code> ä»£æ›¿ <code>margin</code></strong> ã€‚ </p>
<blockquote>
<p>ç³»ç»Ÿçš„ view çš„ measure æ–¹æ³•é‡Œå¯¹ç»˜åˆ¶è¿‡ç¨‹åšäº†ä¸€ä¸ªä¼˜åŒ–ï¼šå¦‚æœæˆ‘ä»¬æˆ–è€…æˆ‘ä»¬çš„å­viewæ²¡æœ‰è¦æ±‚å¼ºåˆ¶åˆ·æ–°ï¼Œè€Œçˆ¶viewç»™å­viewçš„ä¼ å…¥å€¼ä¹Ÿæ²¡æœ‰å˜åŒ–ï¼ˆä¹Ÿå°±æ˜¯è¯´å­viewçš„ä½ç½®æ²¡å˜åŒ–ï¼‰ï¼Œå°±ä¸ä¼šåšæ— è°“çš„measureã€‚ä½†æ˜¯ RelativeLayout ä¼šåš 2 æ¬¡ measureï¼Œè€Œåœ¨åšæ¨ªå‘çš„æµ‹é‡æ—¶ï¼Œçºµå‘çš„æµ‹é‡ç»“æœå°šæœªå®Œæˆï¼Œåªå¥½æš‚æ—¶ä½¿ç”¨ <code>myHeight</code> ä¼ å…¥å­viewç³»ç»Ÿï¼Œå‡å¦‚å­viewçš„ height ä¸ç­‰äºï¼ˆ<code>è®¾ç½®äº†margin</code>ï¼‰myHeight çš„é«˜åº¦ï¼Œé‚£ä¹ˆ measure ä¸­ä¸Šé¢ä»£ç æ‰€åšå¾—ä¼˜åŒ–å°†ä¸èµ·ä½œç”¨ï¼Œæ‰€ä»¥ ++<strong>å°½é‡ä½¿ç”¨ <code>padding</code> ä»£æ›¿ <code>margin</code></strong>++ã€‚ </p>
</blockquote>
</li>
<li><p>åœ¨ä¸å½±å“å±‚çº§æ·±åº¦çš„æƒ…å†µä¸‹,ä½¿ç”¨ LinearLayout å’Œ FrameLayout è€Œä¸æ˜¯ RelativeLayoutã€‚ é‡‡ç”¨ RelativeLayout å¹¶ä¸ä¼šé™ä½å±‚çº§æ·±åº¦ï¼Œæ‰€ä»¥æ­¤æ—¶ ++<strong>åœ¨æ ¹èŠ‚ç‚¹ä¸Šç”¨ LinearLayout æ˜¯æ•ˆç‡æœ€é«˜çš„</strong>++ã€‚è€Œä¹‹æ‰€ä»¥ç»™å¼€å‘è€…é»˜è®¤æ–°å»ºäº†ä¸ª RelativeLayout æ˜¯å¸Œæœ›å¼€å‘è€…èƒ½é‡‡ç”¨å°½é‡å°‘çš„Viewå±‚çº§æ¥è¡¨è¾¾å¸ƒå±€ä»¥å®ç°æ€§èƒ½æœ€ä¼˜ï¼Œå› ä¸ºå¤æ‚çš„ViewåµŒå¥—å¯¹æ€§èƒ½çš„å½±å“ä¼šæ›´å¤§ä¸€äº›ã€‚</p>
</li>
<li><p>èƒ½ç”¨ä¸¤å±‚ LinearLayoutï¼Œå°½é‡ç”¨ä¸€ä¸ª RelativeLayoutï¼Œåœ¨æ—¶é—´ä¸Šæ­¤æ—¶ RelativeLayout è€—æ—¶æ›´å°ã€‚å¦å¤– LinearLayout æ…ç”¨ layout_weight ï¼Œä¹Ÿå°†ä¼šå¢åŠ ä¸€å€è€—æ—¶æ“ä½œã€‚ç”±äºä½¿ç”¨ LinearLayout çš„ layout_weightï¼Œå¤§å¤šæ•°æ—¶é—´æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™ä¼šé™ä½æµ‹é‡çš„é€Ÿåº¦ã€‚è¿™åªæ˜¯ä¸€ä¸ªå¦‚ä½•åˆç†ä½¿ç”¨Layoutçš„æ¡ˆä¾‹ï¼Œå¿…è¦çš„æ—¶å€™ï¼Œä½ è¦å°å¿ƒè€ƒè™‘æ˜¯å¦ç”¨ layout_weightã€‚æ€»ä¹‹å‡å°‘å±‚çº§ç»“æ„ï¼Œæ‰æ˜¯ç‹é“ï¼Œè®© onMeasure åšå»¶è¿ŸåŠ è½½ï¼Œç”¨ <code>viewStub/include</code> ç­‰ä¸€äº›æŠ€å·§ã€‚</p>
</li>
<li><p>XMLå¸ƒå±€åµŒå¥—å½±å“æ€§èƒ½çš„åŸå› ï¼š<strong>å®é™…ä¸æ˜¯ä»€ä¹ˆ measure&#x2F;layout&#x2F;drawï¼Œè€Œæ˜¯åœ¨äº â€œLayoutInflater.from().inflate()â€ å°†xmlè½¬æ¢ä¸ºjavaä»£ç æ—¶ï¼Œå½“å±‚çº§è¶Šå¤æ‚æ—¶ï¼Œå…¶æ€§èƒ½å°±è¶Šä½ä¸‹ã€‚</strong></p>
</li>
</ol>
<h4 id="2-2-ä½¿ç”¨-lt-include-gt-ã€-lt-merge-gt-ã€-lt-ViewStub-gt-æ ‡ç­¾ä¼˜åŒ–-xml"><a href="#2-2-ä½¿ç”¨-lt-include-gt-ã€-lt-merge-gt-ã€-lt-ViewStub-gt-æ ‡ç­¾ä¼˜åŒ–-xml" class="headerlink" title="2.2 ä½¿ç”¨ &lt;include&gt;ã€&lt;merge&gt;ã€&lt;ViewStub&gt; æ ‡ç­¾ä¼˜åŒ– xml"></a>2.2 ä½¿ç”¨ <code>&lt;include&gt;ã€&lt;merge&gt;ã€&lt;ViewStub&gt;</code> æ ‡ç­¾ä¼˜åŒ– xml</h4><blockquote>
<p><code>&lt;include&gt;ã€&lt;merge&gt;ã€&lt;ViewStub&gt;</code> æ˜¯å®˜æ–¹æ¨èä¼˜åŒ– xml çš„æ ‡ç­¾ã€‚</p>
</blockquote>
<ul>
<li><p><strong><code>&lt;merge&gt;</code></strong> ï¼š</p>
<p><code>&lt;merge&gt;</code> å¤šç”¨äºæ›¿æ¢ <code>FrameLayout</code> æˆ–å½“ä¸€ä¸ªå¸ƒå±€åŒ…å«å¦ä¸€ä¸ªå¸ƒå±€æ—¶ï¼Œ<code>&lt;merge&gt;</code> ä»¥æ¶ˆé™¤è§†å›¾å±‚æ¬¡ç»“æ„ä¸­å¤šä½™çš„è§†å›¾ç»„ã€‚</p>
<blockquote>
<p>PSï¼šé€šè¿‡ AndroidStudio çš„ <code>Tools - Layout Inspector</code> æ¥æŸ¥çœ‹å¸ƒå±€å±‚çº§ã€‚</p>
<ul>
<li>è‹¥ xml æ ¹å¸ƒå±€æ˜¯ <code>FrameLayout</code>ï¼Œç›´æ¥æ›¿æ¢æˆ <code>&lt;merge&gt;</code> å°±èƒ½å‡å°‘ä¸€ä¸ªå¸ƒå±€æ·±åº¦ã€‚</li>
<li>è‹¥æ‚¨çš„ä¸»å¸ƒå±€æ–‡ä»¶æ˜¯å‚ç›´å¸ƒå±€ï¼Œå¼•å…¥ä¸€ä¸ªå‚ç›´å¸ƒå±€çš„ <code>&lt;include&gt;</code>ï¼Œè¿™æ—¶å°±å¯ä»¥å°† <code>&lt;include&gt;</code> çš„æ ¹å¸ƒå±€æ›¿æ¢æˆ <code>&lt;merge&gt;</code> ã€‚</li>
</ul>
</blockquote>
</li>
<li><p><strong><code>&lt;ViewStub&gt;</code>ï¼ˆå»¶è¿ŸåŠ è½½ï¼‰</strong>ï¼š</p>
<p><code>&lt;ViewStub&gt;</code> æ˜¯ä¸€ä¸ª <strong>ä¸å¯è§ã€å¤§å°ä¸º0(å³ä¸å å¸ƒå±€ä½ç½®)ã€å ç”¨èµ„æºæå°</strong> çš„ viewï¼Œèƒ½ä¸º xml åŠ è½½æ—¶å‡å°å‹åŠ›ã€‚</p>
<blockquote>
<p><code>&lt;ViewStub&gt;</code> å¸¸ç”¨äº <em><strong>è¿›åº¦æ¡ã€ç©º&#x2F;é”™è¯¯å ä½æ¶ˆæ¯</strong></em> ç­‰æ— éœ€ç¬¬ä¸€æ—¶é—´æ˜¾ç¤ºçš„viewï¼Œå½“ <code>inflate()</code> æˆ– <code>setVisiblity</code> åæ‰ä¼šè¢«å¯¹åº”çš„ layout æ›¿æ¢å¹¶æ˜¾ç¤ºã€‚  </p>
<p><strong>æ³¨ï¼š<code>&lt;ViewStub&gt;</code> æš‚ä¸æ”¯æŒ <code>&lt;merge&gt;</code> æ ‡ç­¾ï¼Ÿï¼Ÿ</strong></p>
<p><em>æ¥è‡ªå®˜æ–¹ä»‹ç»ï¼š</em><br><img src="/../../../images/illustration/android/ViewStub-Introduce.png" alt="ViewStub-Introduce.png"></p>
<ul>
<li><strong>æ³¨ï¼š<em>ViewStub è°ƒç”¨ <code>inflate()</code> æ–¹æ³•åï¼ŒViewStubè¢«æ›¿æ¢ä¸ºä»¥ <code>inflateId</code> ä¸º Id çš„è§†å›¾ã€‚</em></strong></li>
</ul>
</blockquote>
</li>
</ul>
<p><em>ä½¿ç”¨ç¤ºä¾‹ï¼š</em></p>
<pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- main layout.xml --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RelativeLayout</span><span class="token punctuation">></span></span>
  ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ViewStub</span>
    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/viewStub<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>inflateId</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/NoDataLayoutReplacedId_afterInflate<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_width</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>120dp<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout_height</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>60dp<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>layout</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@layout/layout_no_data<span class="token punctuation">"</span></span>
  <span class="token punctuation">/></span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>RelativeLayout</span><span class="token punctuation">></span></span>

<span class="token comment" spellcheck="true">&lt;!-- view stub layout --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>FrameLayout</span><span class="token punctuation">></span></span>
  ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Textview</span>
    <span class="token attr-name">...</span>
    <span class="token attr-name"><span class="token namespace">android:</span>id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@+id/noData_tv<span class="token punctuation">"</span></span>
    <span class="token attr-name"><span class="token namespace">android:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>No Data Found<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>FrameLayout</span><span class="token punctuation">></span></span>
</code></pre>
<p><em>è°ƒç”¨å¹¶æ˜¾ç¤º ViewStubï¼š</em></p>
<pre class=" language-java"><code class="language-java">ViewStub mViewStub <span class="token operator">=</span> <span class="token punctuation">(</span>ViewStub<span class="token punctuation">)</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>viewStub<span class="token punctuation">)</span><span class="token punctuation">;</span>
mViewStub<span class="token punctuation">.</span><span class="token function">inflate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æˆ– mViewStub.setVisible(View.VISIBLE) ï¼Œè°ƒç”¨åï¼ŒViewStub ä»å½“å‰çˆ¶å¸ƒå±€ç§»é™¤ä½†å…¶ @layout çš„å¸ƒå±€æ²¿ç”¨å…¶ layout_params å‚æ•°ï¼ˆå¦‚ç¤ºä¾‹ä¸­ï¼šwidth/height/...åˆ†åˆ«ä¸º120dp/60dp/...ï¼‰ã€‚ç”¨ @layout çš„å¸ƒå±€æ›¿æ¢äº† ViewStub</span>
<span class="token comment" spellcheck="true">//View mNoDataFoundLayout = mViewStub.inflate(); //æŠ¥é”™ï¼å› ä¸º mViewStub åœ¨ inflate() å®Œåè¢«ç§»é™¤å¹¶æ›¿æ¢ï¼Œä¸å­˜åœ¨äº†ã€‚</span>

<span class="token comment" spellcheck="true">// æ³¨ï¼šViewStub.inflate() åªèƒ½è°ƒç”¨ä¸€æ¬¡ï¼Œå¦åˆ™æŠ›æ‰¾ä¸åˆ°å¼‚å¸¸ï¼å¦‚æœè¦ç”¨ï¼Œåˆ™ç”¨ inflateId æ¥ä½œä¸ºå¯¹åº” @layout å¼•ç”¨çš„å¸ƒå±€ã€‚</span>
<span class="token comment" spellcheck="true">// TextView mTvNoDataFound = mViewStub.findViewById(R.id.noData_tv); //é”™è¯¯ï¼</span>

ViewGroup mNoDataFoundLayout <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>NoDataLayoutReplacedId_afterInflate<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// inflate() è°ƒç”¨åï¼Œåˆ™å¸ƒå±€å®Œå…¨è¢«æ›¿æ¢ï¼Œåˆ™å¯ç”¨ @androi:inflateId æ¥ä½œä¸ºæ›¿æ¢å¸ƒå±€å¼•ç”¨id~~~</span>
ViewGroup mNoDataFoundLayout2 <span class="token operator">=</span> <span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>NoDataLayoutReplacedId_afterInflate<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æ­¤æ—¶ï¼Œå¤šæ¬¡è°ƒç”¨ä¹Ÿä¸ä¼šé”™ã€‚å› ä¸ºç›¸å½“äº main-layout ä¸­å·²ç»æŠŠ ViewStub ç”¨è¯¥å¸ƒå±€æ›¿æ¢äº†ï¼Œå’Œå¹³å¸¸ä½¿ç”¨ä¸€æ ·ã€‚</span>
TextView mTvNoDataFound <span class="token operator">=</span> mNoDataFoundLayout<span class="token punctuation">.</span><span class="token function">findViewById</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span>id<span class="token punctuation">.</span>noData_tv<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="2-3-å‡å°‘è‡ªå®šä¹‰-view-è¿‡æ¸¡ç»˜åˆ¶ï¼ˆä½¿ç”¨clipRect-ã€quickReject-ï¼‰"><a href="#2-3-å‡å°‘è‡ªå®šä¹‰-view-è¿‡æ¸¡ç»˜åˆ¶ï¼ˆä½¿ç”¨clipRect-ã€quickReject-ï¼‰" class="headerlink" title="2.3 å‡å°‘è‡ªå®šä¹‰ view è¿‡æ¸¡ç»˜åˆ¶ï¼ˆä½¿ç”¨clipRect()ã€quickReject()ï¼‰"></a>2.3 å‡å°‘è‡ªå®šä¹‰ view è¿‡æ¸¡ç»˜åˆ¶ï¼ˆä½¿ç”¨<code>clipRect()</code>ã€<code>quickReject()</code>ï¼‰</h4><blockquote>
<ul>
<li><code>canvas.clipRect()</code>ï¼šæŒ‡å®šçŸ©å½¢åŒºåŸŸï¼Œåªæœ‰åœ¨æ­¤åŒºåŸŸå†…æ‰ä¼šè¢«ç»˜åˆ¶ï¼Œä»¥æ­¤èŠ‚çº¦ CPUåŠGPU èµ„æºã€‚<pre class=" language-java"><code class="language-java">canvas<span class="token punctuation">.</span><span class="token function">clipRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//æŒ‡å®š(0,0)åˆ°(200,200)çŸ©å½¢åŒºåŸŸä¸ºç»˜åˆ¶åŒºåŸŸ</span>
</code></pre>
</li>
<li><code>canvas.quickReject()</code>ï¼šåˆ¤æ–­ç”»å¸ƒæ˜¯å¦ä¸æŒ‡å®šçŸ©å½¢ç›¸äº¤ï¼Œä»¥æ­¤å†³å®šæ˜¯å¦éœ€è¦ç»˜åˆ¶è¯¥ç”»å¸ƒã€‚<pre class=" language-java"><code class="language-java"><span class="token keyword">boolean</span> isNeedSkipDraw <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">quickReject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RectF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Canvas<span class="token punctuation">.</span>EdgeType<span class="token punctuation">.</span>AA<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</li>
<li>å¦å¤–ï¼Œ<code>onDraw()</code> ä¸­ä¸è¦åšè€—æ—¶æ“ä½œä¸”åˆ›å»ºå±€éƒ¨å¯¹è±¡ï¼Œå¦‚ï¼šnew Paint()ç­‰ï¼Œåº”æ”¾åˆ°æ„é€ æ–¹æ³•åˆå§‹åŒ–ã€‚</li>
</ul>
</blockquote>
<h1 id="ï¼ˆä¸‰ï¼‰ä¼˜åŒ–ï¼šã€Šè€—æŸã€‹"><a href="#ï¼ˆä¸‰ï¼‰ä¼˜åŒ–ï¼šã€Šè€—æŸã€‹" class="headerlink" title="ï¼ˆä¸‰ï¼‰ä¼˜åŒ–ï¼šã€Šè€—æŸã€‹"></a>ï¼ˆä¸‰ï¼‰ä¼˜åŒ–ï¼šã€Šè€—æŸã€‹</h1><p>ç½‘ç»œé—®é¢˜ï¼Œå½’ç»“å¦‚ä¸‹å‡ æ–¹é¢ï¼š</p>
<blockquote>
<p><strong>1. æµé‡è€—è´¹ã€‚</strong> è¿‡å¤šæœªç»å¤„ç†çš„ç½‘ç»œè¯·æ±‚ï¼Œä¼šæ¶ˆè€—ç”¨æˆ·æ›´å¤šçš„æµé‡ã€‚<em><strong>é«˜æµé‡æ¶ˆè€—ä¼šå¯¼è‡´ç»å¸¸å¤„äºéwifiåœºæ™¯ä¸‹ç”¨æˆ·å¸è½½Appã€‚</strong></em><br><strong>2. ç”µé‡æ¶ˆè€—ã€‚</strong> ç”µé‡æ¶ˆè€—å¿«ä¸”å¤šï¼Œä¹Ÿä¼šå¢åŠ åº”ç”¨å¸è½½ç‡ã€‚<br><strong>3. ç”¨æˆ·ä½“éªŒå·®ã€‚</strong> é•¿æœŸçš„ç½‘ç»œè¯·æ±‚è¶…æ—¶ï¼Œå°½ç®¡ä½¿ç”¨â€˜åŠ è½½è¿›åº¦æç¤ºâ€™æ¥ä»è§†è§‰ä¸Šæå‡ç”¨æˆ·ä½“éªŒï¼Œä½†å¯¹äºç©æœºçˆ±å¥½è€…å’Œä¸“ä¸šç”¨æˆ·è€Œè¨€ï¼Œæ˜¯è‡ªæ¬ºæ¬ºäººã€æ²»æ ‡ä¸æ²»æœ¬çš„ã€‚äºæˆ‘æœ¬äººè€Œè¨€ï¼Œé™¤äº†ä¸‘é™‹çš„UIå’Œå¡é¡¿ï¼Œç½‘ç»œè¯·æ±‚è¶…æ—¶æ˜¯æˆ‘æœ€è®¨åŒçš„ï¼Œä¸”ä¼šç«‹é©¬å¸è½½æ‰ã€‚</p>
</blockquote>
<h2 id="ã€è€—ã€‘ç½‘ç»œä¼˜åŒ–ï¼ˆâ˜…â˜…â˜…â˜…â˜…ï¼‰"><a href="#ã€è€—ã€‘ç½‘ç»œä¼˜åŒ–ï¼ˆâ˜…â˜…â˜…â˜…â˜…ï¼‰" class="headerlink" title="ã€è€—ã€‘ç½‘ç»œä¼˜åŒ–ï¼ˆâ˜…â˜…â˜…â˜…â˜…ï¼‰"></a>ã€è€—ã€‘ç½‘ç»œä¼˜åŒ–ï¼ˆâ˜…â˜…â˜…â˜…â˜…ï¼‰</h2><blockquote>
<p>ç½‘ç»œä¼˜åŒ–ï¼Œä¸»è¦ä»è¿™å‡ æ–¹é¢è¿›è¡Œï¼š<strong>1.é€Ÿåº¦ 2.æˆåŠŸç‡ 3.æµé‡</strong></p>
<p><strong>1. DNS ä¼˜åŒ–ï¼ˆIPç›´è¿å’ŒHttpDnsï¼‰</strong><br><strong>2. è¿æ¥ä¼˜åŒ–ï¼ˆåè®®å±‚ä¼˜åŒ–ï¼‰</strong><br><strong>3. æ•°æ®ä¼ è¾“ä¼˜åŒ–</strong>  </p>
</blockquote>
<h3 id="1-DNS-ä¼˜åŒ–ï¼ˆIPç›´è¿å’ŒHttpDnsï¼‰"><a href="#1-DNS-ä¼˜åŒ–ï¼ˆIPç›´è¿å’ŒHttpDnsï¼‰" class="headerlink" title="1. DNS ä¼˜åŒ–ï¼ˆIPç›´è¿å’ŒHttpDnsï¼‰"></a>1. DNS ä¼˜åŒ–ï¼ˆIPç›´è¿å’ŒHttpDnsï¼‰</h3><p>ç½‘ç»œè®¿é—®æ—¶ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯ DNS è§£æï¼Œé»˜è®¤ä½¿ç”¨ <code>è¿è¥å•†çš„LocalDNS</code> æœåŠ¡ã€‚DNS å®Œæ•´çš„è§£ææµç¨‹å¾ˆé•¿ï¼Œ<code>å…ˆä»æœ¬åœ°ç³»ç»Ÿç¼“å­˜å–ï¼Œè‹¥æ²¡æœ‰å°±åˆ°â€œæœ€è¿‘çš„ DNS æœåŠ¡å™¨â€å–ï¼›è‹¥æ²¡æœ‰å†åˆ°â€œä¸»åŸŸåæœåŠ¡å™¨â€å–ã€‚</code> æ¯ä¸€å±‚éƒ½æœ‰ç¼“å­˜ï¼Œä½†ä¸ºäº†åŸŸåè§£æçš„å®æ—¶æ€§ï¼Œæ¯ä¸€å±‚ç¼“å­˜éƒ½æœ‰è¿‡æœŸæ—¶é—´ã€‚</p>
<blockquote>
<p><strong>ä¼ ç»Ÿçš„ DNS è§£ææœºåˆ¶æœ‰å‡ ä¸ªç¼ºç‚¹</strong>ï¼š</p>
<ul>
<li>è‹¥ç¼“å­˜æ—¶é—´è®¾ç½®å¤ªé•¿ï¼Œåˆ™åŸŸåæ›´æ–°ä¸åŠæ—¶ï¼›è‹¥ç¼“å­˜æ—¶é—´è®¾ç½®å¤ªçŸ­ï¼Œåˆ™å¤§é‡ DNS è§£æè¯·æ±‚å½±å“è¯·æ±‚é€Ÿåº¦ï¼›</li>
<li>åŸŸååŠ«æŒã€‚æ˜“è¢«æ”»å‡»åŠ«æŒï¼Œæˆ–è¢«è¿è¥å•†åŠ«æŒã€‚æŠŠåŸŸåè§£æåˆ°ç¬¬ä¸‰æ–¹ IP åœ°å€ï¼Œæ®ç»Ÿè®¡åŠ«æŒç‡è¾¾7%ï¼›</li>
<li>DNS è§£æè¿‡ç¨‹ä¸å—æ§åˆ¶ï¼Œæ— æ³•ä¿è¯è§£æåˆ°æœ€å¿«çš„IPï¼›</li>
<li>ä¸€æ¬¡è¯·æ±‚åªèƒ½è§£æä¸€ä¸ªåŸŸåã€‚</li>
<li>DNS è§£æå¤±è´¥ç‡å äº’è”ç½‘å¤±è´¥ä¸­å¾ˆå¤§ä¸€ç§ï¼Œè€Œä¸”é¦–æ¬¡è§£æä¸€èˆ¬éœ€è¦å‡ ç™¾æ¯«ç§’ã€‚</li>
</ul>
</blockquote>
<p><strong>â˜ä¼˜åŒ–æ–¹æ¡ˆï¼š</strong></p>
<blockquote>
<ol>
<li>DNS è§£ææ˜“å¤±è´¥ä¸”é¦–æ¬¡è€—æ—¶ï¼Œåˆ™å¯ä»¥ï¼š<strong>ä½¿ç”¨ IP ç›´è¿ï¼Œçœå» DNS è§£æè¿‡ç¨‹ï¼ŒèŠ‚çœè¿™äº›æ—¶é—´ã€‚</strong></li>
<li>ä½¿ç”¨ <code>HttpDns</code>ã€‚HttpDns æ˜¯åŸºäº HTTP åè®®çš„åŸŸåè§£æï¼Œåˆ©ç”¨ HTTP åè®®ä¸ DNS æœåŠ¡å™¨çš„ 80 ç«¯å£è¿›è¡Œäº¤äº’ã€‚æ›¿ä»£äº†åŸºäº DNS åè®®å‘ <code>è¿è¥å•† Local DNS</code> å‘èµ·è§£æè¯·æ±‚çš„ä¼ ç»Ÿæ–¹å¼ï¼Œæœ‰æ•ˆé¿å… <code>Local DNS</code> è¢«åŸŸååŠ«æŒå’Œè·¨ç½‘è®¿é—®ç­‰é—®é¢˜ï¼Œæé«˜åŸŸååŸŸåè§£ææ•ˆç‡ã€‚<blockquote>
<p><code>HttpDns</code>ï¼šå³å¼€å‘è€…åŸºäº HTTP åè®®ï¼Œè‡ªå·±å®ç°ä¸€å¥— HttpDns æœåŠ¡ï¼Œä¸”ç”±è‡ªå·±å»ç»´æŠ¤ä¸€ä»½åŸŸåä¸ IP çš„åœ°å€ç°¿ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ç»Ÿä¸€çš„ DNS æœåŠ¡å™¨ã€‚<br>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;ç›®å‰å„å¤§äº‘æœåŠ¡å•†ï¼Œé˜¿é‡Œäº‘å’Œè…¾è®¯äº‘ç­‰éƒ½æä¾›è‡ªå·±çš„ HttpDns æœåŠ¡ï¼Œäºæ™®é€šå¼€å‘è€…ï¼Œåªéœ€ä»˜å‡ºå°‘é‡è´¹ç”¨ï¼Œå»é›†æ”¯æŒ HttpDns çš„ SDKï¼Œå³å¯ä½¿ç”¨ã€‚<br>&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;å¦å¤–ï¼Œåœ¨ä½¿ç”¨ <code>OkHttp</code> æ—¶é»˜è®¤ä½¿ç”¨çš„æ˜¯ç³»ç»Ÿçš„ DNS æœåŠ¡ï¼Œå¯é€šè¿‡è¿™ <code>OkHttp</code> ä¸­çš„ <code>.dns()</code> æ¥å£ï¼Œè‡ªå®šä¹‰é…ç½® HttpDnsã€‚</p>
</blockquote>
</li>
</ol>
</blockquote>
<h3 id="2-è¿æ¥ä¼˜åŒ–ï¼ˆåè®®å±‚ä¼˜åŒ–ï¼‰"><a href="#2-è¿æ¥ä¼˜åŒ–ï¼ˆåè®®å±‚ä¼˜åŒ–ï¼‰" class="headerlink" title="2. è¿æ¥ä¼˜åŒ–ï¼ˆåè®®å±‚ä¼˜åŒ–ï¼‰"></a>2. è¿æ¥ä¼˜åŒ–ï¼ˆåè®®å±‚ä¼˜åŒ–ï¼‰</h3><blockquote>
<ol>
<li>å¯ç”¨ <code>keep-alive</code> æ¥ç¼“å­˜ï¼ˆèŠ‚çœå»ºç«‹æ—¶é—´ï¼‰ï¼Œ<code>OkHttp</code> å·²é»˜è®¤æ‰“å¼€ï¼Œä½†éœ€è¦æœåŠ¡å™¨æ”¯æŒã€‚</li>
<li>ä½¿ç”¨ <code>Http2</code> æ¥å¤ç”¨è¯·æ±‚è¿æ¥ï¼ˆå¼•å…¥äº†â€œå¤šå·¥â€ã€å¤´ä¿¡æ¯å‹ç¼©ã€æœåŠ¡å™¨æ¨é€ç­‰ç‰¹æ€§ï¼‰ã€‚</li>
</ol>
</blockquote>
<p>éšç€ HTTP åè®®æŠ€æœ¯ä¸æ–­è¿­ä»£å‡çº§ï¼ˆ0.9ã€1.0ã€1.1ã€2ç­‰ï¼‰ï¼Œéƒ½ç»è¿‡äº†ä¸€æ¬¡åˆä¸€æ¬¡çš„ä¼˜åŒ–ã€‚ä¾‹å¦‚ï¼š<br><strong>HTTP 1.1 å¼•å…¥â€œæŒä¹…è¿æ¥â€ï¼Œå¤šä¸ªè¯·æ±‚è¢«å¤ç”¨ï¼Œæ— éœ€é‡å»º TCP è¿æ¥ï¼Œè€Œ TCP è¿æ¥åœ¨ç§»åŠ¨äº’è”ç½‘åœºæ™¯ä¸‹æˆæœ¬å¾ˆé«˜ï¼ŒèŠ‚çœäº†æ—¶é—´ä¸èµ„æºã€æµé‡ã€‚</strong></p>
<h3 id="3-æ•°æ®ä¼ è¾“ä¼˜åŒ–"><a href="#3-æ•°æ®ä¼ è¾“ä¼˜åŒ–" class="headerlink" title="3. æ•°æ®ä¼ è¾“ä¼˜åŒ–"></a>3. æ•°æ®ä¼ è¾“ä¼˜åŒ–</h3><blockquote>
<ul>
<li><strong><code>gzip</code>å‹ç¼©ï¼Œ<code>okhttp</code> é»˜è®¤æ”¯æŒæ¥æ”¶ gzip å‹ç¼©ã€‚</strong></li>
<li>ä½¿ç”¨ <code>protoful buffer</code> æ ¼å¼ä»£æ›¿ <code>jsonï¼Œxml</code></li>
<li>å›¾ç‰‡å¤„ç†ã€‚ä½¿ç”¨ <code>webp</code> ä»£æ›¿ <code>png/jpg</code></li>
<li>åˆ¤æ–­ç½‘ç»œç¯å¢ƒï¼ˆWiFi&#x2F;2G&#x2F;3G&#x2F;4G&#x2F;5G&#x2F;6G&#x2F;â€¦ï¼‰ï¼Œä¸‹å‘ä¸åŒå›¾ç‰‡ã€‚</li>
<li>HTTP å¼€å¯ç¼“å­˜&#x2F;æœ¬åœ°ç¼“å­˜</li>
<li>è¯·æ±‚åˆå¹¶</li>
</ul>
</blockquote>
<h4 id="3-1-gzip-å‹ç¼©"><a href="#3-1-gzip-å‹ç¼©" class="headerlink" title="3.1 gzip å‹ç¼©"></a>3.1 <code>gzip</code> å‹ç¼©</h4><p>HTTP åè®®ä¸Šçš„ gzip ç¼–ç æ˜¯ä¸€ç§ç”¨æ¥æ”¹è¿› web åº”ç”¨æ€§èƒ½çš„æŠ€æœ¯ï¼Œç”¨æ¥å‡å°‘ä¼ è¾“æ•°æ®é‡å¤§å°ã€‚å› æ­¤ï¼Œå‡å°‘ä¼ è¾“æ•°æ®é‡æœ‰ä¸¤ä¸ªå¥½å¤„ï¼š</p>
<ul>
<li>å‡å°‘æµé‡æ¶ˆè€—ã€‚</li>
<li>å‡å°ä¼ è¾“æ—¶é—´ã€‚</li>
</ul>
<p>å¯¹äº post è¯·æ±‚ï¼Œbody å¯ä»¥åš gzip å‹ç¼©çš„ï¼Œheader ä¹Ÿå¯ä»¥åšæ•°æ®å‹ç¼©ã€‚è¿”å›æ•°æ®çš„ body ä¹Ÿå¯ä»¥åš gzip å‹ç¼©ï¼Œbody æ•°æ®ä½“ç§¯å¯ä»¥ç¼©å°åˆ°åŸæ¥çš„ 30% å·¦å³ã€‚</p>
<h4 id="3-2-protoful-buffer-æ•°æ®æ ¼å¼"><a href="#3-2-protoful-buffer-æ•°æ®æ ¼å¼" class="headerlink" title="3.2 protoful buffer æ•°æ®æ ¼å¼"></a>3.2 <code>protoful buffer</code> æ•°æ®æ ¼å¼</h4><p>ç›¸æ¯” json&#x2F;xml ï¼Œ<strong>protoful æ˜¯åˆ—åºåŒ–åçš„äºŒè¿›åˆ¶æ•°æ®ï¼Œgoogleæ¨å‡ºæ–°çš„æ•°æ®äº¤æ¢æ ¼å¼ã€‚ä¼˜ç‚¹æ˜¯â€œä½“ç§¯æ›´å°ã€ä¼ è¾“æ•ˆç‡æ›´å¿«ï¼Œä¸”æ”¯æŒå¤šè¯­è¨€â€ï¼Œç¼ºç‚¹æ˜¯â€œä¸ç›´è§‚ï¼Œä½¿ç”¨ä¸å¦‚ json&#x2F;xml æ–¹ä¾¿â€ã€‚</strong>ã€‚</p>
<h4 id="3-3-å›¾ç‰‡å¤„ç†ï¼Œwebp-å›¾ç‰‡æ ¼å¼"><a href="#3-3-å›¾ç‰‡å¤„ç†ï¼Œwebp-å›¾ç‰‡æ ¼å¼" class="headerlink" title="3.3 å›¾ç‰‡å¤„ç†ï¼Œwebp å›¾ç‰‡æ ¼å¼"></a>3.3 å›¾ç‰‡å¤„ç†ï¼Œ<code>webp</code> å›¾ç‰‡æ ¼å¼</h4><p>webp åœ¨ç§»åŠ¨æ•°æ®ä¼ è¾“ä¸­ï¼Œå›¾ç‰‡å æ¯”ä»å¾ˆå¤§ï¼Œwebpå…·æœ‰æ›´ä¼˜çš„å›¾åƒæ•°æ®å‹ç¼©ç®—æ³•ï¼Œåœ¨æ‹¥æœ‰è‚‰çœ¼æ— æ³•è¯†åˆ«çš„å›¾åƒè´¨é‡å‰æä¸‹ã€‚ä¼˜ç‚¹æ˜¯ <strong>â€œæ›´å°å›¾ç‰‡ä½“ç§¯ï¼ŒåŒæ—¶å…·å¤‡æ— æŸå’Œæœ‰æŸçš„å‹ç¼©æ¨¡å¼ã€Alpha é€æ˜åŠåŠ¨ç”»ç‰¹æ€§ï¼Œåœ¨ JPEG å’Œ PNG ä¸Šçš„è½¬åŒ–æ•ˆæœéƒ½å¾ˆæ£’ã€ç¨³å®šå’Œç»Ÿä¸€ã€‚â€</strong> </p>
<blockquote>
<p><strong>ä¸€ã€å›¾ç‰‡ä¸‹è½½</strong>   </p>
<ul>
<li><strong>ä½¿ç”¨ <code>WebP</code> æ ¼å¼ï¼š</strong> åŒæ ·çš„ç…§ç‰‡ï¼ŒWebP æ ¼å¼å¤§å¹…åº¦èŠ‚çœæµé‡ã€‚ç›¸å¯¹ JPEGï¼Œæµé‡èƒ½èŠ‚çœè¿‘ 25%~30%ï¼›ç›¸å¯¹ PNGï¼Œæµé‡èƒ½èŠ‚çœè¿‘ 80%ã€‚å…³é”®æ˜¯ä½¿ç”¨ WebP æ ¼å¼å›¾ç‰‡è´¨é‡æ²¡æœ‰æ”¹å˜ã€‚</li>
<li><strong>ä½¿ç”¨ç¼©ç•¥å›¾ï¼š</strong> Appä¸­éœ€è¦åŠ è½½çš„å›¾ç‰‡æŒ‰éœ€åŠ è½½ï¼Œåˆ—è¡¨ä¸­çš„å›¾ç‰‡æ ¹æ®éœ€è¦çš„å°ºå¯¸åŠ è½½åˆé€‚çš„ç¼©ç•¥å›¾å³å¯ï¼Œåªæœ‰ç”¨æˆ·çœ‹å¤§å›¾æ—¶å†åŠ è½½åŸå›¾ã€‚æ—¢èŠ‚çœæµé‡ï¼Œä¹ŸèŠ‚çœå†…å­˜ã€‚å¦‚ï¼ŒæŸäº›æŸå…¬å¸çš„å›¾ç‰‡å­˜å‚¨æœåŠ¡åœ¨åŸå›¾é“¾æ¥ä¹‹åæ‹¼æ¥å®½é«˜å‚æ•°ï¼Œæ ¹æ®å‚æ•°çš„ä¸åŒè¿”å›ç›¸åº”çš„å›¾ç‰‡ã€‚</li>
</ul>
<p><em><strong>ä¾‹å¦‚</strong></em>ï¼Œé’ˆå¯¹ç½‘ç»œæƒ…å†µï¼Œè¿”å›ä¸åŒçš„å›¾ç‰‡æ•°æ®ï¼Œä¸€ç§æ˜¯é«˜æ¸…å¤§å›¾ï¼Œä¸€ç§æ˜¯æ­£å¸¸å›¾ç‰‡ï¼Œä¸€ç§æ˜¯ç¼©ç•¥å°å›¾ã€‚å½“ç”¨æˆ·å¤„äºwifiä¸‹ç»™æ§ä»¶è®¾ç½®é«˜æ¸…å¤§å›¾ï¼Œå½“4gæˆ–è€…3gæ¨¡å¼ä¸‹åŠ è½½æ­£å¸¸å›¾ç‰‡ï¼Œå½“å¼±ç½‘æ¡ä»¶ä¸‹åŠ è½½ç¼©ç•¥å›¾ã€‚</p>
<p><strong>äºŒã€å›¾ç‰‡ä¸Šä¼ </strong><br>å›¾ç‰‡ï¼ˆæ–‡ä»¶ï¼‰çš„ä¸Šä¼ å¤±è´¥ç‡æ¯”è¾ƒé«˜ï¼Œä¸ä»…ä»…å› ä¸ºå¤§æ–‡ä»¶ï¼ŒåŒæ—¶ <strong>å¸¦å®½ã€æ—¶å»¶ã€ç¨³å®šæ€§</strong> ç­‰å› ç´ åœ¨æ­¤åœºæ™¯ä¸‹çš„å½±å“ä¹Ÿæ›´åŠ æ˜æ˜¾ï¼›</p>
<ul>
<li>é¿å…æ•´æ–‡ä»¶ä¼ è¾“ï¼Œé‡‡ç”¨åˆ†ç‰‡ä¼ è¾“ï¼›</li>
<li>æ ¹æ®ç½‘ç»œç±»å‹ä»¥åŠä¼ è¾“è¿‡ç¨‹ä¸­çš„å˜åŒ–åŠ¨æ€çš„ä¿®æ”¹åˆ†ç‰‡å¤§å°ï¼›</li>
<li>æ¯ä¸ªåˆ†ç‰‡å¤±è´¥é‡ä¼ çš„æœºä¼šã€‚</li>
</ul>
</blockquote>
<p>å¤‡æ³¨ï¼šå›¾ç‰‡ä¸Šä¼ æ˜¯ä¸€é¡¹çœ‹ä¼¼ç®€å•ã€å…±æ€§å¾ˆå¤šä½†å®é™…ä¸Šå¤æ‚ã€éœ€è¦ç»†åˆ†çš„å·¥ä½œã€‚ç§»åŠ¨äº’è”ç½‘çš„åœºæ™¯å’Œæœ‰çº¿çš„åœºæ™¯æ˜¯æœ‰å¾ˆå¤šåŒºåˆ«çš„ï¼Œä¾‹å¦‚ç§»åŠ¨ç½‘ç»œçš„è´¨é‡&#x2F;å¸¦å®½ç»å¸¸ä¼šå‘ç”Ÿâ€œè·³å˜â€ï¼Œä½†æœ‰çº¿ç½‘ç»œå´æ˜¯â€œæ¸å˜â€ã€‚</p>
<h4 id="3-4-åˆ¤æ–­ç½‘ç»œç¯å¢ƒï¼ˆWiFi-x2F-2G-x2F-3G-x2F-4G-x2F-5G-x2F-6G-x2F-â€¦ï¼‰"><a href="#3-4-åˆ¤æ–­ç½‘ç»œç¯å¢ƒï¼ˆWiFi-x2F-2G-x2F-3G-x2F-4G-x2F-5G-x2F-6G-x2F-â€¦ï¼‰" class="headerlink" title="3.4 åˆ¤æ–­ç½‘ç»œç¯å¢ƒï¼ˆWiFi&#x2F;2G&#x2F;3G&#x2F;4G&#x2F;5G&#x2F;6G&#x2F;â€¦ï¼‰"></a>3.4 åˆ¤æ–­ç½‘ç»œç¯å¢ƒï¼ˆWiFi&#x2F;2G&#x2F;3G&#x2F;4G&#x2F;5G&#x2F;6G&#x2F;â€¦ï¼‰</h4><p>åˆ¤æ–­ç½‘ç»œç¯å¢ƒï¼Œå°±æ˜¯æŒ‡è¯·æ±‚å¤§é‡æ•°æ®å‰å¯å…ˆå‘æœåŠ¡å™¨ä¸ŠæŠ¥è®¾å¤‡å½“å‰çš„ç½‘ç»œç¯å¢ƒï¼ŒæœåŠ¡å™¨æ ¹æ®è®¾å¤‡çš„ç½‘ç»œç¯å¢ƒï¼Œä¸‹å‘ä¸åŒè´¨é‡çš„å›¾ç‰‡ï¼Œæˆ–å±è”½ä¸€äº›éå…³é”®æ•°æ®ï¼Œä»¥ä¿è¯åœ¨ç½‘ç»œä¸ä½³çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æœ‰è¾ƒæµç•…çš„ä½“éªŒã€‚</p>
<h4 id="3-5-è¯·æ±‚åˆå¹¶"><a href="#3-5-è¯·æ±‚åˆå¹¶" class="headerlink" title="3.5 è¯·æ±‚åˆå¹¶"></a>3.5 è¯·æ±‚åˆå¹¶</h4><p>å³å°†å¤šä¸ªè¯·æ±‚åˆå¹¶ä¸ºä¸€ä¸ªè¿›è¡Œè¯·æ±‚ï¼Œå¦‚æœæŸä¸ªé¡µé¢å†…è¯·æ±‚è¿‡å¤šï¼Œä¹Ÿå¯ä»¥è€ƒè™‘åšä¸€å®šçš„è¯·æ±‚åˆå¹¶ã€‚</p>
<p><strong>æ€»ä¹‹ï¼ŒèŠ‚çœç½‘ç»œå’Œæµé‡è¿˜å¯ä»å…¶å®ƒï¼š</strong></p>
<blockquote>
<ol>
<li>æ–­ç‚¹ç»­ä¼ ï¼Œæ–‡ä»¶ã€å›¾ç‰‡ç­‰çš„ä¸‹è½½ï¼Œé‡‡ç”¨æ–­ç‚¹ç»­ä¼ ï¼Œä¸æµªè´¹ç”¨æˆ·ä¹‹å‰æ¶ˆè€—è¿‡çš„æµé‡ï¼›</li>
<li>é‡è¯•ç­–ç•¥ï¼Œä¸€æ¬¡ç½‘ç»œè¯·æ±‚çš„å¤±è´¥ï¼Œéœ€è¦å¤šæ¬¡çš„é‡è¯•æ¥æ–­å®šæœ€ç»ˆçš„å¤±è´¥ï¼Œå¯ä»¥å‚è€ƒVolleyçš„é‡è¯•æœºåˆ¶å®ç°ã€‚</li>
<li>Protocol Bufferï¼Œæ˜¯Googleçš„ä¸€ç§æ•°æ®äº¤æ¢çš„æ ¼å¼ï¼Œå®ƒç‹¬ç«‹äºè¯­è¨€ï¼Œç‹¬ç«‹äºå¹³å°ã€‚ç›¸è¾ƒäºç›®å‰å¸¸ç”¨çš„Jsonï¼Œæ•°æ®é‡æ›´å°ï¼Œæ„å‘³ç€ä¼ è¾“é€Ÿåº¦ä¹Ÿæ›´å¿«ã€‚</li>
<li><strong>å°½é‡é¿å…å®¢æˆ·ç«¯çš„è½®è¯¢ï¼Œè€Œä½¿ç”¨æœåŠ¡å™¨æ¨é€çš„æ–¹å¼ï¼›</strong>ï¼ˆPSï¼šæ­¤ç§æ–¹å¼ï¼Œæˆ‘ä»¥å‰å…¬å¸ç”¨åˆ°è¿‡ï¼Œæ‰‹åŠ¨è½®è¯¢ç¡®å®ä¸æ˜¯å¥½æ–¹æ³•ï¼‰</li>
<li>æ•°æ®æ›´æ–°é‡‡ç”¨å¢é‡ï¼Œè€Œä¸æ˜¯å…¨é‡ï¼Œä»…å°†å˜åŒ–çš„æ•°æ®è¿”å›ï¼Œå®¢æˆ·ç«¯è¿›è¡Œåˆå¹¶ï¼Œå‡å°‘æµé‡æ¶ˆè€—ï¼›</li>
</ol>
</blockquote>
<h1 id="ï¼ˆå››ï¼‰ä¼˜åŒ–ï¼šã€ŠåŒ…ä½“ç§¯ã€‹"><a href="#ï¼ˆå››ï¼‰ä¼˜åŒ–ï¼šã€ŠåŒ…ä½“ç§¯ã€‹" class="headerlink" title="ï¼ˆå››ï¼‰ä¼˜åŒ–ï¼šã€ŠåŒ…ä½“ç§¯ã€‹"></a>ï¼ˆå››ï¼‰ä¼˜åŒ–ï¼šã€ŠåŒ…ä½“ç§¯ã€‹</h1><h2 id="ã€åŒ…ã€‘APKç˜¦èº«"><a href="#ã€åŒ…ã€‘APKç˜¦èº«" class="headerlink" title="ã€åŒ…ã€‘APKç˜¦èº«"></a>ã€åŒ…ã€‘APKç˜¦èº«</h2><p>åŸåˆ™ä¸Šï¼Œå®‰è£…åŒ…å¤§å°å¯¹ä½¿ç”¨æ— å½±å“ï¼Œä½†æ˜¯ä»ç”¨æˆ·è§’åº¦æ¥è¯´å°±æœ‰å½±å“äº†ã€‚è‹¥å®‰è£…åŒ…è¶Šå¤§ï¼Œåˆ™ç”¨æˆ·ä¸‹è½½é—¨æ§›å°±è¶Šé«˜ã€‚ç‰¹åˆ«æ˜¯åœ¨ç§»åŠ¨ç½‘ç»œæƒ…å†µä¸‹ï¼Œå¦‚æœåŒ…è¶Šå¤§ï¼Œè€—æµé‡è¶Šå¤šï¼Œç”¨æˆ·å¯èƒ½å°±ä¼šä»çŠ¹è±«åˆ°æ”¾å¼ƒï¼ˆ <em>PSï¼šæˆ‘ä¸ªäººåŸºæœ¬æ˜¯è¿™ç§æƒ…å†µï¼Œé™¤ééå¸¸å¤§ä¼—ä½¿ç”¨çš„Appä¼šåšæŒä¸€ä¸‹~</em> ï¼‰ã€‚æ‰€ä»¥ï¼Œ<strong>å‡å°åŒ…ä½“ç§¯ï¼Œå¯æé«˜ç”¨æˆ·ä¸‹è½½é‡å’Œä½“éªŒã€‚</strong></p>
<p><strong>åˆ†æä¸€ä¸ªapkåŒ…çš„ä¸»è¦ä¿¡æ¯æ„æˆï¼š</strong></p>
<blockquote>
<p>ä¸€ã€AndroidStudioï¼Œ<code>Build - Analyze APK...</code> æ¥åˆ†æä¸€ä¸ªapkä¿¡æ¯ï¼Œç¤ºä¾‹ï¼ˆå¦‚ï¼šé…·å®‰ï¼‰ï¼š<br><img src="/../../../images/illustration/android/Analyze-APK(CoolMarket.apk).png" alt="Analyze-APK(CoolMarket.apk).png"></p>
<ul>
<li><strong>libæ–‡ä»¶å¤¹</strong>ï¼šå­˜æ”¾çš„ç¬¬ä¸‰æ–¹åº“ï¼Œå¦‚ï¼š*.soï¼Œ*.aarï¼Œ*.jarç­‰ã€‚</li>
<li><strong>resæ–‡ä»¶å¤¹</strong>ï¼šresourceç¼©å†™ï¼Œå­˜æ”¾èµ„æºæ–‡ä»¶ï¼ˆxml&#x2F;strings&#x2F;colors&#x2F;pic&#x2F;â€¦ï¼‰ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº” ID å¹¶æ˜ å°„åˆ° <code>.R</code> æ–‡ä»¶ï¼Œè®¿é—®èµ„æºç›´æ¥ä½¿ç”¨IDã€‚</li>
<li><strong>classes.dex</strong>ã€‚ Dalvik å­—èŠ‚ç ç¨‹åºï¼Œè®© DVM å¯æ‰§è¡Œã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒAndroidåº”ç”¨åœ¨æ‰“åŒ…æ—¶é€šè¿‡ AndroidSDK ä¸­çš„ <code>dx</code> å·¥å…·å°† <code>Javaå­—èŠ‚ç class</code> è½¬æ¢ä¸º <code>Dalvikå­—èŠ‚ç </code>ã€‚</li>
<li><strong>assetsæ–‡ä»¶å¤¹</strong>ï¼šå­˜æ”¾ä¸€æ¬¡é…ç½®æ–‡ä»¶ã€èµ„æºæ–‡ä»¶ã€fontsæ–‡ä»¶ç­‰ã€‚assetsä¸ä¼šè‡ªåŠ¨ç”Ÿæˆå¯¹åº”IDï¼Œè€Œæ˜¯é€šè¿‡ <code>AssetManager</code> ç±»çš„æ¥å£è·å–ã€‚</li>
<li><strong>META-INF</strong>ï¼šä¿å­˜åº”ç”¨çš„ç­¾åä¿¡æ¯ï¼Œæ­¤ç­¾åä¿¡æ¯å¯éªŒè¯ APK æ–‡ä»¶å®Œæ•´æ€§ã€‚</li>
<li><strong>resources.arsc</strong>ï¼šè®°å½•èµ„æºæ–‡ä»¶å’Œå…¶IDä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œç”¨æ¥æ ¹æ®èµ„æºIDæ‰¾èµ„æºã€‚</li>
<li><strong>AndroidManifest.xml</strong>ï¼šAndroidåº”ç”¨çš„é…ç½®æ¸…å•æ–‡ä»¶ï¼Œä¸€äº›ç»„ä»¶çš„æ³¨å†Œä¿¡æ¯ã€æƒé™ç­‰ã€‚</li>
</ul>
</blockquote>
<p><strong>ä¼˜åŒ–ä¸€ä¸ªapkåŒ…çš„ä½“ç§¯å¤§å°ï¼š</strong></p>
<blockquote>
<p>ä¸€ä¸ªapkåŒ…çš„ä¸»è¦å æ¯”æƒ…å†µå¦‚ä¸Šç»„æˆï¼Œåˆ™å¯æ ¹æ®ä»å¦‚ä¸‹å‡ æ–¹é¢ä¼˜åŒ–ï¼š</p>
<ul>
<li><strong>ä»£ç æ··æ·†</strong>ã€‚ä½¿ç”¨ <code>proGuard</code> ä»£ç æ··æ·†å·¥å…·ï¼Œå®ƒåŒ…æ‹¬ <em><strong>å‹ç¼©ã€ä¼˜åŒ–ã€æ··æ·†</strong></em> ç­‰åŠŸèƒ½ã€‚</li>
<li><strong>èµ„æºä¼˜åŒ–</strong>ã€‚ä¾‹å¦‚ä½¿ç”¨ <code>Android Link</code> åˆ é™¤å†—ä½™èµ„æºï¼Œä½¿ç”¨å¾®ä¿¡ä¸€æ¬¾å·¥å…·å«å•¥ï¼ˆ?ï¼‰æ¥å¯¹è¯¸å¦‚ <code>stringå‘½åé•¿åº¦</code> ç­‰æ–¹é¢ä¼˜åŒ–ã€‚</li>
<li><strong>å›¾ç‰‡ä¼˜åŒ–</strong>ã€‚ä¾‹å¦‚ä½¿ç”¨ <code>AAPT</code> å¯¹ PNG æ ¼å¼å›¾ç‰‡åšå‹ç¼©ï¼Œé™ä½å›¾ç‰‡è‰²å½©ä½æ•°ç­‰ï¼Œä½¿ç”¨ <code>WebP</code> å›¾ç‰‡æ ¼å¼ã€‚</li>
<li><strong>é¿å…é‡å¤åŠŸèƒ½çš„åº“</strong>ã€‚</li>
<li><strong>æ’ä»¶åŒ–</strong>ã€‚ä¾‹å¦‚ï¼ŒæŸäº›åŠŸèƒ½æ¨¡å—æ”¾åœ¨æœåŠ¡å™¨ä¸Šï¼ŒæŒ‰éœ€åŠ¨æ€ä¸‹è½½å®‰è£…ï¼Œå¯ä»¥å‡å°‘ç”¨æˆ·åˆå§‹å®‰è£…åŒ…å¤§å°ï¼Œä»¥å¢åŠ ä¸‹è½½é‡å’Œç”¨æˆ·ä½“éªŒã€‚</li>
</ul>
</blockquote>
<h1 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h1><ul>
<li><a href="https://blog.csdn.net/haha223545/category_7889161.html">CSDN-Android-æ€§èƒ½ä¼˜åŒ–</a></li>
<li><a href="https://www.jianshu.com/p/4d6c38e1f5b8">ç®€ä¹¦-å…³äºAndroidæ€§èƒ½ä¼˜åŒ–ï¼Œè¯¥ä»å“ªäº›æ–¹é¢å…¥æ‰‹ï¼Ÿ</a></li>
</ul>
]]></content>
      <categories>
        <category>é¢è¯•</category>
        <category>Androidé¢è¯•</category>
      </categories>
      <tags>
        <tag>é¢è¯•</tag>
        <tag>Androidé¢è¯•</tag>
        <tag>Androidæ€§èƒ½ä¼˜åŒ–</tag>
      </tags>
  </entry>
  <entry>
    <title>Spring Boot å…¥é—¨åŸºç¡€ï¼ˆæ¦‚è§ˆï¼‰</title>
    <url>/tech-articles/backend-tech/SpringBoot/level-basic/SB-Learn-1/</url>
    <content><![CDATA[<p>ä»€ä¹ˆå«å¾®æœåŠ¡ï¼ŸSpring Boot åˆæ˜¯ä»€ä¹ˆï¼Ÿå®ƒä»¬èƒ½å¹²ä»€ä¹ˆï¼Œå¦‚ä½•å¼€å‘ï¼ŸSpring Boot ä¸ä¼ ç»Ÿçš„ Spring MVCã€SSH è¿™äº›æœ‰å•¥å¼‚åŒï¼Ÿ</p>
<span id="more"></span>

<h1 id="ä¸€ã€å¾®æœåŠ¡ä¸-Spring-Boot-ç®€ä»‹"><a href="#ä¸€ã€å¾®æœåŠ¡ä¸-Spring-Boot-ç®€ä»‹" class="headerlink" title="ä¸€ã€å¾®æœåŠ¡ä¸ Spring Boot ç®€ä»‹"></a>ä¸€ã€å¾®æœåŠ¡ä¸ Spring Boot ç®€ä»‹</h1><ol>
<li>å¾®æœåŠ¡ï¼šä¸€ä¸ªé¡¹ç›®ï¼Œå¯ä»¥ç”±å¤šä¸ª å°å‹æœåŠ¡æ„æˆï¼ˆå¾®æœåŠ¡ï¼‰ã€‚</li>
<li>Spring Bootå¯ä»¥å¿«é€Ÿå¼€å‘â€œå¾®æœåŠ¡æ¨¡å—â€ã€‚<ul>
<li>ç®€åŒ–J2EEå¼€å‘ï¼ˆå³ç®€åŒ–ç”¨javaå¼€å‘å¤§å‹é¡¹ç›®ï¼‰</li>
<li>æ•´ä¸ªSpringæŠ€æœ¯æ ˆçš„æ•´åˆï¼ˆä¾‹å¦‚ï¼šæ•´åˆSpringMVCã€Springâ€¦â€¦ï¼‰</li>
<li>æ•´ä¸ªJ2EEæŠ€æœ¯çš„æ•´åˆï¼ˆä¾‹å¦‚ï¼šæ•´åˆMybatisã€redisã€Struts2[ç›®å‰ç”¨çš„å°‘äº†ï¼Œå¸¸ç”¨redis]â€¦â€¦ï¼‰</li>
</ul>
</li>
</ol>
<h1 id="äºŒã€å‡†å¤‡å·¥ä½œ"><a href="#äºŒã€å‡†å¤‡å·¥ä½œ" class="headerlink" title="äºŒã€å‡†å¤‡å·¥ä½œ"></a>äºŒã€å‡†å¤‡å·¥ä½œ</h1><pre class=" language-text"><code class="language-text">1. jdkï¼ˆJAVA_HOME[jdkæ ¹ç›®å½•]ã€path[JAVA_HOME/bin]ã€classpath[å½“å‰ç›®å½•.åŠJAVA_HOME/lib]ï¼‰
2. mavenï¼š
    - ä¸‹è½½ï¼Œå¦‚ï¼šapache-maven-3.6.3-bin.tar.gz
    - è§£å‹ç¼©ï¼Œå¦‚ï¼šapache-maven-3.6.3
    - ç¯å¢ƒå˜é‡ï¼Œå¦‚ï¼šMAVEN_HOMEï¼Œå³mavenæ ¹ç›®å½•
    - æ·»åŠ binç›®å½•ï¼Œå¦‚ï¼špath[MAVEN_HOME/bin]
    - mavenæœ¬åœ°ä»“åº“ï¼ŒMAVEN_HOME/conf/settings.xmlï¼Œå¦‚ï¼š<localRepository>æœ¬åœ°åˆ›å»ºçš„mavenä»“åº“ï¼Œå¦‚ï¼šD:/mvnrepo</localRepository>
    - åœ¨IDEä¸­é…ç½®mvnï¼š
      - STSï¼š
      	1. Preferences->Installations->å–æ¶ˆé»˜è®¤å†…ç½®mavenï¼Œæ–°å»ºå‹¾é€‰è§£å‹ç¼©çš„MAVEN_HOMEã€‚
      	2. Preferences->User Settings->å‹¾é€‰MAVEN_HOME/conf/settings.xmlã€‚
3. Spring Bootå¼€å‘å·¥å…·ï¼š
    1. eclipseï¼ˆSTSæ’ä»¶ï¼‰
    2. STSè½¯ä»¶ï¼ˆå®˜æ–¹æ¨èï¼Œå³ç›¸å½“äºæ•´åˆeclipse+STSï¼‰
    3. IntelliJ IDEA
</code></pre>
<h2 id="Macå®‰è£…é…ç½®Maven"><a href="#Macå®‰è£…é…ç½®Maven" class="headerlink" title="Macå®‰è£…é…ç½®Maven"></a>Macå®‰è£…é…ç½®Maven</h2><ol>
<li><p><strong><a href="http://maven.apache.org/download.cgi">ä¸‹è½½</a>ã€‚</strong> ä¾‹å¦‚ï¼Œé€‰æ‹© <code>apache-maven-3.6.3-bin.tar.gz</code></p>
</li>
<li><p><strong>å®‰è£…ã€‚</strong> </p>
<ul>
<li><p>è§£å‹åˆ° <code>/usr/local</code> ä¸‹ï¼ˆéšæ„ï¼Œæ²¡æœ‰é™å®šæ”¾åœ¨å“ªï¼‰ã€‚å¦‚ï¼Œ <code>/usr/local/apache-maven-3.6.3</code></p>
</li>
<li><p>é…ç½® <code>.bash_profile</code> ï¼Œè¿½åŠ å¦‚ä¸‹ï¼š</p>
<pre class=" language-bash"><code class="language-bash"><span class="token function">export</span> MAVEN_HOME<span class="token operator">=</span>/usr/local/apache-maven-3.6.3
<span class="token function">export</span> PATH<span class="token operator">=</span><span class="token variable">${PATH}</span><span class="token keyword">:</span><span class="token variable">$MAVEN_HOME</span>/bin
</code></pre>
<blockquote>
<p>å¦‚æœæ˜¯ bash shellï¼Œåˆ™åœ¨ç»ˆç«¯è¾“å…¥ open .bash_profileã€‚<br>å¦‚æœæ˜¯ zsh shellï¼Œåˆ™åœ¨ç»ˆç«¯è¾“å…¥ open .zshrcã€‚<br>ä¸ºäº†é¿å…åœ¨åˆ é™¤äº† iTerm è¿™æ ·çš„ç»ˆç«¯åï¼Œåœ¨ç³»ç»Ÿè‡ªå¸¦ç»ˆç«¯ä¸­æ— æ³•æ­£å¸¸ä½¿ç”¨ Maven æˆ–å…¶å®ƒçš„è½¯ä»¶ï¼Œå¯ä»¥<strong>åœ¨è¿™ä¸¤ä¸ªé…ç½®æ–‡ä»¶ä¸­éƒ½é…ç½®ä¸€ä¸‹</strong>ã€‚   </p>
</blockquote>
</li>
<li><p><code>source .bash_profile</code> ä½¿é…ç½®ç”Ÿæ•ˆã€‚</p>
</li>
<li><p>éªŒè¯ã€‚è¾“å…¥ <code>mvn -v/-version</code> ï¼Œå¦‚å‡ºç°mavenç‰ˆæœ¬ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼‰ï¼Œåˆ™å®‰è£…mavenæˆåŠŸã€‚</p>
<pre class=" language-bash"><code class="language-bash">âœ ~ mvn -v
Apache Maven 3.6.3 <span class="token punctuation">(</span>cecedd343002696d0abb50b32b541b8a6ba2883f<span class="token punctuation">)</span>
Maven home: /usr/local/apache-maven-3.6.3
Java version: 1.8.0_121, vendor: Oracle Corporation, runtime: /Library/Java/JavaVirtualMachines/jdk1.8.0_121.jdk/Contents/Home/jre
Default locale: zh_CN, platform encoding: UTF-8
OS name: <span class="token string">"mac os x"</span>, version: <span class="token string">"10.15.4"</span>, arch: <span class="token string">"x86_64"</span>, family: <span class="token string">"mac"</span>
</code></pre>
<blockquote>
<p>å¦‚æœå®‰è£…äº† Oh My Zshï¼Œä¸€å®šè¦è®°å¾—åœ¨å…¶é…ç½®æ–‡ä»¶ <code>~/.zshrc</code> ä¸­ä¹Ÿè¦é…ç½®ä¸€ä¸‹ï¼Œå¦åˆ™åœ¨ç»ˆç«¯ä¸­è¿è¡Œçš„ä¸€äº›å‘½ä»¤å¯èƒ½ä¼šæ— æ•ˆï¼Œåœ¨å®‰è£…å…¶å®ƒè½¯ä»¶æ—¶ä¹Ÿæ˜¯ï¼Œè¯¦è§<a href="https://blog.csdn.net/WinstonLau/article/details/81323340">è¿™é‡Œ</a><br><code>~</code>ä»£è¡¨<code>/Users/ä½ çš„ç”¨æˆ·å</code>ï¼Œ<code>~/.zshrc</code>å°±ç›¸å½“äº<code>/Users/ä½ çš„ç”¨æˆ·å/.zshrc</code></p>
</blockquote>
</li>
</ul>
</li>
<li><p><strong>é…ç½®ã€‚</strong> </p>
<ul>
<li><p><strong>æ›´æ”¹Mavenæœ¬åœ°ä»“åº“ä½ç½®</strong> </p>
<ul>
<li><p>maven çš„æœ¬åœ°ä»“åº“çš„é»˜è®¤ä½ç½®ä¸ºï¼š<code>$&#123;user.home&#125;/.m2/repository</code>ï¼Œä¹Ÿå³ <code>/Users/ä½ çš„ç”¨æˆ·å/.m2/repository</code> ã€‚</p>
</li>
<li><p>maven åˆšå®‰è£…å¥½æ—¶ï¼Œæ˜¯æ‰¾ä¸åˆ°è¿™ä¸ªåä¸º <code>.m2</code> çš„éšè—æ–‡ä»¶å¤¹çš„ï¼Œå› ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰ä¸‹è½½ä»»ä½• jar åŒ…ï¼Œå› æ­¤è¿˜æ²¡æœ‰ç”Ÿæˆè¿™ä¸ªæ–‡ä»¶å¤¹ã€‚</p>
</li>
<li><p>æ›´æ”¹æœ¬åœ°ä»“åº“çš„ä½ç½®ï¼Œéœ€è¦æ‰“å¼€ <code>/usr/local/apache-maven-3.6.3/conf/settings.xml</code> è¿™ä¸ªæ–‡ä»¶ï¼Œè¿›è¡Œå¦‚ä¸‹é…ç½® <code>&lt;localRepository&gt;/usr/local/apache-maven-3.6.3/repository&lt;/localRepository&gt;</code> ã€‚</p>
<pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- localRepository
   | The path to the local repository maven will use to store artifacts.
   |
   | Default: ${user.home}/.m2/repository
  &lt;localRepository>/path/to/local/repo&lt;/localRepository>
  --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>localRepository</span><span class="token punctuation">></span></span>/usr/local/apache-maven-3.6.3/repository<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>localRepository</span><span class="token punctuation">></span></span>
</code></pre>
<blockquote>
<p>è¯´æ˜ï¼š</p>
<ul>
<li><p><strong>æœ¬åœ°ä»“åº“</strong>ï¼šç”¨æ¥å­˜å‚¨ä»è¿œç¨‹ä»“åº“æˆ–ä¸­å¤®ä»“åº“ä¸‹è½½çš„æ’ä»¶å’Œ jar åŒ…ï¼Œé¡¹ç›®éœ€è¦çš„ä¸€äº›æ’ä»¶æˆ– jar åŒ…ï¼Œä¼šä¼˜å…ˆä»æœ¬åœ°ä»“åº“æŸ¥æ‰¾ã€‚</p>
</li>
<li><p><strong>è¿œç¨‹ä»“åº“ï¼ˆç§æœï¼‰</strong>ï¼šå½“å»ºç«‹ä¸€ä¸ª maven é¡¹ç›®çš„æ—¶å€™ï¼Œmaven ä¼šæ£€æŸ¥ä½ çš„ pom.xml æ–‡ä»¶ï¼Œå¦‚æœå‘ç°é¡¹ç›®éœ€è¦çš„æ’ä»¶æˆ–è€… jar åŒ…ï¼Œæœ¬åœ°ä»“åº“æ²¡æœ‰ï¼Œå°±ä¼šé»˜è®¤å»è¿œç¨‹ä»“åº“ä¸‹è½½ã€‚è¿œç¨‹ä»“åº“å¯ä»¥åœ¨äº’è”ç½‘å†…ä¹Ÿå¯ä»¥åœ¨å±€åŸŸç½‘å†…ã€‚</p>
</li>
<li><p><strong>ä¸­å¤®ä»“åº“</strong> ï¼šmaven è½¯ä»¶å†…ç½®çš„ï¼Œå®ƒæ˜¯ä¸­å¤®ä»“åº“ï¼ŒæœåŠ¡äºæ•´ä¸ªäº’è”ç½‘ï¼Œç”± Maven å›¢é˜Ÿè‡ªå·±ç»´æŠ¤ï¼Œé‡Œé¢å­˜å‚¨äº†éå¸¸å…¨çš„ jar åŒ…ï¼ŒåŒ…å«äº†ä¸–ç•Œä¸Šå¤§éƒ¨åˆ†æµè¡Œçš„å¼€æºé¡¹ç›®æ„ä»¶ï¼Œå…·ä½“åœ°å€å°±æ˜¯ä¸‹é¢çš„ä¸­å¤®ä»“åº“1å’Œ2ã€‚</p>
</li>
</ul>
</blockquote>
</li>
</ul>
</li>
<li><p><strong>é…ç½®ä½¿ç”¨é˜¿é‡Œäº‘çš„æœåŠ¡å™¨ä¸‹è½½jaråŒ…ï¼ˆæ¨èï¼šé˜¿é‡Œäº‘é•œåƒæºï¼‰</strong></p>
<ul>
<li><p>æ‰“å¼€ <code>/usr/local/apache-maven-3.6.2/conf/settings.xml</code> è¿™ä¸ªæ–‡ä»¶ï¼Œè¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrors</span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!-- mirror
     | Specifies a repository mirror site to use instead of a given repository. The repository that
     | this mirror serves has an ID that matches the mirrorOf element of this mirror. IDs are used
     | for inheritance and direct lookup purposes, and must be unique across the set of mirrors.
     |
    &lt;mirror>
      &lt;id>mirrorId&lt;/id>
      &lt;mirrorOf>repositoryId&lt;/mirrorOf>
      &lt;name>Human Readable Name for this Mirror.&lt;/name>
      &lt;url>http://my.repository.com/repo/path&lt;/url>
    &lt;/mirror>
     --></span>
      <span class="token comment" spellcheck="true">&lt;!--é˜¿é‡Œäº‘ä»“åº“ï¼ˆä¸­å¤®ï¼‰--></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>alimaven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">></span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>aliyun maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>http://maven.aliyun.com/nexus/content/repositories/central/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">></span></span>
      <span class="token comment" spellcheck="true">&lt;!--é˜¿é‡Œäº‘ä»“åº“--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>alimaven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">></span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>aliyun maven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>http://maven.aliyun.com/nexus/content/groups/public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">></span></span>
      <span class="token comment" spellcheck="true">&lt;!--ä¸­å¤®ä»“åº“1--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">></span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Maven Repository Switchboard<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>http://repo1.maven.org/maven2/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">></span></span>
      <span class="token comment" spellcheck="true">&lt;!--ä¸­å¤®ä»“åº“2--></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>repo2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">></span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Human Readable Name for this Mirror.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>http://repo2.maven.org/maven2/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>ibiblio<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">></span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Human Readable Name for this Mirror.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>http://mirrors.ibiblio.org/pub/mirrors/maven2/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>jboss-public-repository-group<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">></span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>JBoss Public Repository Group<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>http://repository.jboss.org/nexus/content/groups/public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>google-maven-central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">></span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>Google Maven Central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>https://maven-central.storage.googleapis.com
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">></span></span>
    <span class="token comment" spellcheck="true">&lt;!-- ä¸­å¤®ä»“åº“åœ¨ä¸­å›½çš„é•œåƒ --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>maven.net.cn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">></span></span>central<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>oneof the central mirrors in china<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>http://maven.net.cn/content/groups/public/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrors</span><span class="token punctuation">></span></span>
</code></pre>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<ul>
<li><p><strong>å‘Šè¯‰ Maven ä½¿ç”¨ jdk1.8</strong>  ï¼š </p>
<ul>
<li><p>æ‰“å¼€ <code>/usr/local/apache-maven-3.6.2/conf/settings.xml</code> è¿™ä¸ªæ–‡ä»¶ï¼Œåœ¨ <code>&lt;profiles&gt;&lt;/profiles&gt;</code> æ ‡ç­¾å†…æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!-- å‘Šè¯‰ Maven ç”¨ jdk1.8 æ¥ç¼–è¯‘å’Œè¿è¡Œé¡¹ç›® --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>jdk-1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activation</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeByDefault</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeByDefault</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jdk</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>jdk</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activation</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.compilerVersion</span><span class="token punctuation">></span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.compilerVersion</span><span class="token punctuation">></span></span> 
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">></span></span>
</code></pre>
<blockquote>
<p>è¿™é‡Œé…ç½®çš„jdkçš„ç‰ˆæœ¬è¦å’Œè‡ªå·±ç”µè„‘ä¸Šå®‰è£…çš„jdkçš„ç‰ˆæœ¬ä¸€è‡´ï¼Œå› ä¸ºè¿™é‡ŒæŒ‡å®šäº†ç¼–è¯‘æ—¶jdkçš„ç‰ˆæœ¬ï¼Œä¹Ÿå°±æ˜¯è¯´ä¼šä½¿ç”¨æˆ‘ä»¬è¿™é‡ŒæŒ‡å®šçš„jdkçš„ç‰ˆæœ¬ç”Ÿæˆ.classæ–‡ä»¶ï¼Œä½†ç”±äºè¿è¡Œæ—¶æ˜¯ä½¿ç”¨çš„æˆ‘ä»¬é…ç½®åœ¨ç¯å¢ƒå˜é‡ä¸­çš„jdkï¼Œæ‰€ä»¥å¦‚æœä¸¤è€…ä¸ä¸€è‡´ï¼Œå¯èƒ½å°±ä¼šå‡ºé—®é¢˜ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè¦ä½¿ç”¨jdk11ï¼Œåªéœ€å°†1.8å…¨éƒ¨æ”¹ä¸º11å³å¯ã€‚</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h2 id="åœ¨IDEä¸­é…ç½®Maven"><a href="#åœ¨IDEä¸­é…ç½®Maven" class="headerlink" title="åœ¨IDEä¸­é…ç½®Maven"></a>åœ¨IDEä¸­é…ç½®Maven</h2><ul>
<li><p><strong>Eclipse</strong> ï¼š</p>
<pre class=" language-bash"><code class="language-bash">å¦‚æœä¸é…ç½®ï¼Œåˆ™ eclipse é»˜è®¤ä½¿ç”¨å†…ç½®çš„ mavenã€‚ä¿®æ”¹ä½ç½®ï¼š
Preferences -<span class="token operator">></span> Maven -<span class="token operator">></span> Installations å’Œ User Settingsã€‚
---Installations: Add -<span class="token operator">></span> Installation home å‹¾é€‰å·²å®‰è£…çš„ maven è·¯å¾„ <span class="token string">"/usr/local/apache-maven-3.6.3"</span>ï¼Œç„¶å Installation name é»˜è®¤å¡«å……ä¸º <span class="token string">"apache-maven-3.6.3"</span> --<span class="token operator">></span> å–æ¶ˆé»˜è®¤å†…ç½®EMBEDDEDï¼Œå‹¾é€‰ <span class="token string">"apache-maven-3.6.3"</span>
---User Settings: é…ç½® User Settings<span class="token punctuation">(</span>open file<span class="token punctuation">)</span> -<span class="token operator">></span> å‹¾é€‰å·²å®‰è£… maven ä¸‹çš„ conf é…ç½® <span class="token string">"/usr/local/apache-maven-3.6.3/conf/settings.xml"</span> -<span class="token operator">></span> Local Repository<span class="token punctuation">(</span>From merged user and global settings<span class="token punctuation">)</span> è‡ªåŠ¨å¡«å……ä¸º maven ä¸‹çš„ repository <span class="token string">"/usr/local/apache-maven-3.6.3/repository"</span>

å³ä¿®æ”¹å‰é»˜è®¤çš„ä¸ºæˆ‘ä»¬å®‰è£…æŒ‡å®šçš„mavenç›®å½•é…ç½®ï¼š
/Users/hsong/.m2/settings.xml --<span class="token operator">></span> /usr/local/apache-maven-3.6.3/conf/settings.xml
/Users/hsong/.m2/repository --<span class="token operator">></span> /usr/local/apache-maven-3.6.3/repository
</code></pre>
</li>
<li><p><strong>IDEA</strong>ï¼š</p>
<pre class=" language-bash"><code class="language-bash">å¦‚æœä¸é…ç½®ï¼Œåˆ™ idea é»˜è®¤ä¼šä½¿ç”¨å…¶è‡ªå¸¦çš„ mavenã€‚ä¿®æ”¹ä½ç½®ï¼š
Preferences -<span class="token operator">></span> Build,Execution,Deployment -<span class="token operator">></span> Build Tools -<span class="token operator">></span> Maven -<span class="token operator">></span> Maven home directory
</code></pre>
</li>
</ul>
<h2 id="å®‰è£…å‚è€ƒ"><a href="#å®‰è£…å‚è€ƒ" class="headerlink" title="å®‰è£…å‚è€ƒ"></a>å®‰è£…å‚è€ƒ</h2><ul>
<li><a href="https://www.cnblogs.com/bubbleStar/p/6217284.html">Mac ä¸‹ java ç¯å¢ƒ maven ç¯å¢ƒé…ç½®</a></li>
<li><a href="https://blog.csdn.net/WinstonLau/article/details/95605557">Macç³»ç»Ÿä¸‹è½½ã€å®‰è£…å’Œé…ç½®Mavenç¯å¢ƒ</a></li>
</ul>
<hr>
<h1 id="ä¸‰ã€ç›®å½•ç»“æ„"><a href="#ä¸‰ã€ç›®å½•ç»“æ„" class="headerlink" title="ä¸‰ã€ç›®å½•ç»“æ„"></a>ä¸‰ã€ç›®å½•ç»“æ„</h1><pre class=" language-text"><code class="language-text">Spring_Boot_Project:
    â”œâ”€â”€â”€â”€â”€â”€ resouces
    â”‚				â”œâ”€â”€ staticï¼šé™æ€èµ„æºï¼ˆjsã€cssã€å›¾ç‰‡ã€éŸ³é¢‘ã€è§†é¢‘ç­‰ï¼‰
    â”‚				â”œâ”€â”€ templatesï¼šæ¨¡æ¿æ–‡ä»¶ï¼ˆæ¨¡ç‰ˆå¼•æ“freemakerã€thymeleaf;æ³¨ï¼šè¯¥æ¨¡æ¿å¼•æ“é»˜è®¤ä¸æ”¯æŒjspï¼Œè‹¥éœ€è¦åˆ™å•ç‹¬é…ç½®ã€‚
    â”‚				â””â”€â”€ application.propertiesï¼šé…ç½®æ–‡ä»¶ï¼ˆä¾‹å¦‚ï¼šä¿®æ”¹portï¼‰
    â”‚
    â””â”€â”€ ...
</code></pre>
<h1 id="å››ã€Spring-Boot-å¥½å¤„"><a href="#å››ã€Spring-Boot-å¥½å¤„" class="headerlink" title="å››ã€Spring Boot å¥½å¤„"></a>å››ã€Spring Boot å¥½å¤„</h1><ul>
<li>å†…ç½®äº†tomcatï¼Œä¸”ä¸éœ€è¦æ‰“æˆwarå†æ‰§è¡Œã€‚</li>
<li>pop.xmlï¼šæŠŠä¸€ä¸ªwebé¡¹ç›®ï¼Œæ‰“æˆjaråŒ…ï¼Œä¸ä»¥å‰çš„ä¸ä¸€æ ·ã€‚</li>
<li>å°†å„ä¸ªåº”ç”¨&#x2F;ä¸‰æ–¹æ¡†æ¶è®¾ç½®æˆä¸€ä¸ªä¸ªâ€œåœºæ™¯â€ï¼ˆstaterï¼‰ï¼Œä»¥åéœ€è¦ç”¨å“ªä¸ªï¼Œåªéœ€å¼•å…¥ç›¸å¯¹åº”åœºæ™¯å³å¯ã€‚é€‰å®Œåï¼ŒSpring Bootå°±ä¼šå°†è¯¥åœºæ™¯æ‰€éœ€çš„æ‰€æœ‰ä¾èµ–è‡ªåŠ¨æ³¨å…¥ï¼ˆå³ï¼šä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨è€ƒè™‘ä¾èµ–ç‰ˆæœ¬ç­‰ï¼‰ã€‚ä¾‹å¦‚ï¼šâ€œwebâ€ï¼ŒSpring Bootå°±ä¼šå°†webç›¸å…³çš„ä¾èµ–ï¼ˆtomcat&#x2F;json&#x2F;jdbc&#x2F;â€¦ï¼‰</li>
</ul>
<h1 id="äº”ã€-EnableAutoConfigurationæºç åˆ†æ"><a href="#äº”ã€-EnableAutoConfigurationæºç åˆ†æ" class="headerlink" title="äº”ã€@EnableAutoConfigurationæºç åˆ†æ"></a>äº”ã€<code>@EnableAutoConfiguration</code>æºç åˆ†æ</h1><p><code>@SpringBootApplication</code> ï¼šä¸»é…ç½®ç±»ï¼Œå³mainå…¥å£ã€‚ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token annotation punctuation">@SpringBootApplication</span>æ³¨è§£åŒ…å«ï¼š
    â”œâ”€â”€â”€â”€â”€â”€ <span class="token annotation punctuation">@SpringBootConfiguration</span>
    â”‚               â””â”€â”€ <span class="token annotation punctuation">@Configuration</span> <span class="token comment" spellcheck="true">//è¡¨ç¤ºâ€œé…ç½®ç±»(yml)â€</span>
    â””â”€â”€â”€â”€â”€â”€ <span class="token annotation punctuation">@EnableAutoConfiguration</span>
                      â”œâ”€â”€ <span class="token annotation punctuation">@AutoConfigurationPackage</span> <span class="token comment" spellcheck="true">//ç›¸å½“äºåŒ…æ‰«æå™¨</span>
                      â””â”€â”€ <span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span>AutoConfigurationImportSelector<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//é€‰æ‹©æ€§å¼•å…¥</span>
</code></pre>
<p><strong>å…·ä½“æ³¨è§£è¯´æ˜ï¼š</strong></p>
<ul>
<li>@Configurationï¼š<ol>
<li>ç”¨æ­¤æ³¨è§£ï¼Œåˆ™è¡¨ç¤ºè¯¥ç±»å˜æˆä¸€ä¸ªé…ç½®ç±»ã€‚å¦‚ï¼š@Configuration public class A {}  &#x2F;&#x2F;è¡¨ç¤ºAç±»ç”¨äºé…ç½®ä½œç”¨ã€‚</li>
<li>åŠ  <code>@Configuration</code> æ³¨è§£çš„ç±»ï¼Œä¼šè‡ªåŠ¨çº³å…¥Springå®¹å™¨ï¼ˆ@Componentï¼‰ã€‚å³å°†æ­¤ç±»åŠ å…¥ Spring IOC é‡Œé¢ï¼Œä¾›åç»­Springæ‰«æåˆ°ã€‚</li>
</ol>
</li>
<li>@EnableAutoConfiguration ï¼šä½¿ Spring Boot å¯ä»¥è‡ªåŠ¨é…ç½®åŠŸèƒ½ã€‚<ol>
<li>è¯¥æ³¨è§£å¯ä»¥æ‰¾åˆ° <code>@SpringBootApplication</code> æ‰€åœ¨ç±»çš„åŒ…ï¼Œä½œç”¨ï¼šå°±ä¼šå°†è¯¥åŒ…åŠæ‰€æœ‰å­åŒ…å…¨éƒ¨çº³å…¥springå®¹å™¨ï¼ˆå³è‡ªå·±å†™çš„ï¼‰ã€‚</li>
<li>sbå¯åŠ¨æ—¶ï¼Œä¼šæ ¹æ® <code>spring-boot-autoconfigure-2.0.3.RELEASE.jar/META-INF/spring.factories</code> æ‰¾åˆ°ç›¸åº”ç¬¬ä¸‰æ–¹ä¾èµ–å¹¶å°†ä¾èµ–å¼•å…¥ï¼ˆå³ç¬¬ä¸‰æ–¹ä¾èµ–[jar&#x2F;config&#x2F;â€¦]ç­‰ï¼‰ã€‚</li>
</ol>
</li>
<li>@Import(AutoConfigurationImportSelector.class)ï¼šé€‰æ‹©æ€§å¼•å…¥ã€‚ï¼ˆå¦‚ï¼šç”¨ <code>AutoConfigurationImportSelecto$selectImports(xxx)</code> å¼•å…¥ä¸‰æ–¹ä¾èµ–[jar&#x2F;é…ç½®&#x2F;â€¦]ç­‰ï¼‰</li>
</ul>
<p><strong>æ€»ç»“ï¼š</strong><br>ç¼–å†™é¡¹ç›®æ—¶ï¼Œä¸€èˆ¬ä¼šå¯¹ â€œè‡ªå·±å†™çš„ä»£ç â€ ä»¥åŠ â€œä¸‰æ–¹ä¾èµ–â€ è¿›è¡Œé…ç½®ã€‚ä½† <code>Spring Boot</code> å¯ä»¥è‡ªåŠ¨è¿›è¡Œé…ç½®ï¼š</p>
<ol>
<li>è‡ªå·±å†™çš„ä»£ç ï¼Œsbé€šè¿‡ <code>SpringBootConfigruation</code> è‡ªåŠ¨å¸®æˆ‘ä»¬é…ç½®ã€‚</li>
<li>ä¸‰æ–¹ä¾èµ–ï¼Œsbé€šè¿‡ <code>spring-boot-autoconfigure-2.0.3.RELEASE.jar/META-INF/spring.factories</code> è¿›è¡Œå£°æ˜ï¼Œç„¶åé€šè¿‡ <code>@EnableAutoConfiguration</code> å¼€å¯å³å¯ã€‚<code>spring-boot-autoconfigure-2.0.3.RELEASE.jar</code> ä¸­åŒ…å«äº† <strong>J2EEæ•´åˆä½“ç³»ä¸­</strong> éœ€è¦çš„ä¾èµ–ã€‚</li>
</ol>
<h1 id="å…­ã€è‡ªåŠ¨è£…é…åŸç†"><a href="#å…­ã€è‡ªåŠ¨è£…é…åŸç†" class="headerlink" title="å…­ã€è‡ªåŠ¨è£…é…åŸç†"></a>å…­ã€è‡ªåŠ¨è£…é…åŸç†</h1><p><u><em><strong>é—®é¢˜ï¼šå¦‚ä½•è‡ªåŠ¨è£…é…å‘¢ï¼Ÿ</strong></em></u></p>
<p>ä»¥ <code>spring.factories$org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration</code> ä¸ºä¾‹ï¼Œæºç å¤§æ¦‚ä¸ºï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">/************************************************************************
 * org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration
 ************************************************************************/</span>
<span class="token annotation punctuation">@Configuration</span> <span class="token comment" spellcheck="true">//é…ç½®</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span>HttpEncodingProperties<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//å…è®¸æ”¹é…ç½®å±æ€§ï¼ˆæ­¤ç±»å¯ä¿®æ”¹ç¼–ç ï¼‰</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token punctuation">(</span>type <span class="token operator">=</span> ConditionalOnWebApplication<span class="token punctuation">.</span>Type<span class="token punctuation">.</span>SERVLET<span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span>CharacterEncodingFilter<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//ç³»ç»Ÿä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„ç±»ï¼ˆæ­¤ç±»éœ€è¦CharacterEncodingFilterï¼‰</span>
<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefx <span class="token operator">=</span> <span class="token string">"spring.http.encoding"</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token string">"enabled"</span><span class="token punctuation">,</span> matchIfMissing <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//ç³»ç»Ÿä¸­æŒ‡å®šçš„å±æ€§æ˜¯å¦æœ‰æŒ‡å®šçš„å€¼</span>
<span class="token comment" spellcheck="true">// è¯´æ˜ï¼šå½“ @ConditionalOn{å…·ä½“å±æ€§æ»¡è¶³è¦æ±‚} åˆ™æ¡ä»¶æˆç«‹æ—¶ï¼Œæ‰æ‰§è¡Œå½“å‰ç±»ï¼Œå³å½“å‰é…ç½®æ‰ç”Ÿæ•ˆï¼</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpEncodingAutoConfiguration</span> <span class="token punctuation">{</span>
      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token annotation punctuation">@Bean</span> <span class="token comment" spellcheck="true">//å½“å‰æ¡ä»¶æˆç«‹åï¼Œå°†æ­¤bodyä»£ç ä¼ å…¥SpringIOCå®¹å™¨çš„@Beanï¼Œå³å°†è¯¥æ®µä»£ç åŠŸèƒ½åŠ å…¥åˆ°é¡¹ç›®ä¸­å»ã€‚</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
    <span class="token keyword">public</span> CharacterEncodingFilter <span class="token function">characterEncodingFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          CharacterEncodingFilter filter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CharacterEncodingFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          filter<span class="token punctuation">.</span><span class="token function">setEncoding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">getCharset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          filter<span class="token punctuation">.</span><span class="token function">setForceRequestEncoding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">shouldForce</span><span class="token punctuation">(</span>Type<span class="token punctuation">.</span>REQUEST<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          filter<span class="token punctuation">.</span><span class="token function">setForceResponseEncoding</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token function">shouldForce</span><span class="token punctuation">(</span>Type<span class="token punctuation">.</span>RESPONSE<span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token keyword">return</span> filter<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">/************************************************************************
 * org.springframework.boot.autoconfigure.http.HttpEncodingProperties
 ************************************************************************/</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefx <span class="token operator">=</span> <span class="token string">"spring.http.encoding"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//æ³¨æ­¤prefixå¯aliasä¸ºå½“å‰ç±»ï¼Œåœ¨application.properties/ymlä¸­å¯è‡ªç”±é…ç½®ã€‚</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HttpEncodingProperties</span> <span class="token punctuation">{</span>
      <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Charset DEFAULT_CHARSET <span class="token operator">=</span> StandardCharsets<span class="token punctuation">.</span>UTF_8<span class="token punctuation">;</span>
      <span class="token keyword">private</span> Charset charset <span class="token operator">=</span> DEFAULT_CHARSET<span class="token punctuation">;</span>
      <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre>
<p>é€šè¿‡æºç ç ”ç©¶ï¼Œ<strong>å¾—çŸ¥</strong>ï¼š</p>
<ul>
<li><p><code>@Configuration</code> ï¼šæ ‡è¯†æ­¤ä¸ºé…ç½®ç±»ï¼Œå¹¶å°†æ­¤ç±»çº³å…¥ <code>Spring IOCå®¹å™¨</code> ã€‚</p>
</li>
<li><p><code>@EnableConfigurationProperties(HttpEncodingProperties.class)</code> ï¼šé€šè¿‡ <code>HttpEncodingProperties.class</code> å°†ç¼–ç è®¾ç½®ä¸ºäº† UTF_8 ï¼ˆæ³¨ï¼šç ”ç©¶å¦‚ä½•è‡ªåŠ¨è£…é…ä¸ºUTF_8ï¼Œå¦‚ä½•ä¿®æ”¹ç¼–ç ä¸ºGBKå‘¢ï¼Ÿï¼‰</p>
</li>
<li><p><code>@ConditionalOnProperty(prefx = &quot;spring.http.encoding&quot;, value = &quot;enabled&quot;, matchIfMissing = true)</code> ï¼šå½“å±æ€§æ»¡è¶³è¦æ±‚æ—¶ï¼Œåˆ™æ¡ä»¶æˆç«‹ã€‚è§£é‡Šä¸ºï¼šè¦æ±‚ <code>spring.http.encoding.enabled=true</code>æˆ–æœªæ˜¾å¼é…ç½®(<code>matchIfMissing = trueï¼Œå³enabledé»˜è®¤true</code>)ï¼Œè¯¥æ¡ä»¶å°±æˆç«‹äº†ã€‚</p>
</li>
<li><p>å¦‚ä½•ä¿®æ”¹ç¼–ç ï¼ˆä¾‹ISO-8859-1ï¼‰ï¼Ÿè§£å†³ï¼šé€šè¿‡æ”¹ <code>HttpEncodingPropertiesçš„</code>prefix+å±æ€§å ï¼Œåœ¨ <code>é…ç½®æ–‡ä»¶.properties/yml</code> ä¸­ä¿®æ”¹å¦‚ï¼š</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æ–¹å¼ä¸€ï¼šapplication.properties</span>
spring.http.encoding.charset<span class="token operator">=</span>ISO-8859-1

<span class="token comment" spellcheck="true"># æ–¹å¼ä¸€ï¼šapplication.yml</span>
spring:
    http:
        encoding:
            charset: ISO-8859-1
</code></pre>
</li>
<li><p>å¦‚ä½•çŸ¥é“ <code>spring boot</code> å¼€å¯äº†å“ªäº›è‡ªåŠ¨è£…é…ã€ç¦æ­¢äº†å“ªäº›è‡ªåŠ¨è£…é…ï¼Ÿè§£å†³ï¼šåœ¨ <code>é…ç½®application.properties/yml</code> ä¸­åŠ  <code>debug=true</code> ã€‚ï¼ˆPositive matchesï¼šè‡ªåŠ¨å¼€å¯çš„è£…é… Negative matchesï¼šæœªè‡ªåŠ¨å¼€å¯çš„è£…é…ï¼‰</p>
</li>
</ul>
<p><strong>è‡ªåŠ¨è£…é…æ€»ç»“ï¼š</strong></p>
<ul>
<li>æ¯ä¸€ä¸ª <code>XxxAutoConfiguration</code> éƒ½æœ‰å¾ˆå¤š <code>@ConditionalOnXxx</code> ï¼Œå½“è¿™æ­¤æ¡ä»¶éƒ½æ»¡è¶³æ—¶ï¼Œåˆ™æ­¤é…ç½®è‡ªåŠ¨è£…é…ç”Ÿæ•ˆï¼ˆå¦‚UTF_8ï¼‰ã€‚æ€»ä¹‹ï¼Œ<code>Spring Boot</code> å°±æ˜¯é€šè¿‡ <code>XxxAutoConfiguration</code> å®ç°è‡ªåŠ¨è£…é…ï¼ˆç›¸æ¯”ä¼ ç»ŸSpringMVC: éœ€è¦é…ç½®web.xmlå’Œspringmvc.xmlç­‰ï¼Œæ¯”è¾ƒå¤æ‚ï¼‰ã€‚è€Œä¸”æˆ‘ä»¬å¯ä»¥çµæ´»åœ°æ‰‹å·¥ä¿®æ”¹é»˜è®¤çš„è‡ªåŠ¨è£…é…ï¼ˆå³ä¿®æ”¹è‡ªåŠ¨è£…é…é»˜è®¤å€¼ï¼‰ï¼š<code>XxxProperties.java æ–‡ä»¶ä¸­çš„ prefix.å±æ€§å=value</code>ã€‚</li>
<li>å…¨å±€é…ç½®æ–‡ä»¶ä¸­çš„keyï¼Œæ¥è‡ªäº <code>XxxProperties.java$prefix.å±æ€§å=value</code>ã€‚</li>
</ul>
<p><strong>@Conditionalæ‰©å±•æ³¨è§£ï¼š</strong></p>
<table>
<thead>
<tr>
<th>@Conditionalæ‰©å±•æ³¨è§£</th>
<th>ä½œç”¨ï¼ˆåˆ¤æ–­æ˜¯å¦æ»¡è¶³å½“å‰æŒ‡å®šçš„æ¡ä»¶ï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td>@ConditionalOnJava</td>
<td>ç³»ç»Ÿçš„javaç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚</td>
</tr>
<tr>
<td>@ConditionalOnOnBean</td>
<td>å®¹å™¨ä¸­å­˜åœ¨æŒ‡å®šçš„Bean</td>
</tr>
<tr>
<td>@ConditionalOnOnMissingBean</td>
<td>å®¹å™¨ä¸­ä¸å­˜åœ¨æŒ‡å®šçš„Bean</td>
</tr>
<tr>
<td>@ConditionalOnExpression</td>
<td>æ»¡è¶³SpELè¡¨è¾¾å¼æŒ‡å®š</td>
</tr>
<tr>
<td>@ConditionalOnClass</td>
<td>ç³»ç»Ÿä¸­æœ‰æŒ‡å®šçš„ç±»</td>
</tr>
<tr>
<td>@ConditionalOnMissingClass</td>
<td>ç³»ç»Ÿä¸­æ²¡æœ‰æŒ‡å®šçš„ç±»</td>
</tr>
<tr>
<td>@ConditionalOnSingleCandidate</td>
<td>å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªæŒ‡å®šçš„Beanï¼Œæˆ–è€…æ­¤Beanæ˜¯é¦–å…ˆBean</td>
</tr>
<tr>
<td>@ConditionalOnProperty</td>
<td>ç³»ç»Ÿä¸­æŒ‡å®šçš„å±æ€§æ˜¯å¦æœ‰æŒ‡å®šçš„å€¼</td>
</tr>
<tr>
<td>@ConditionalOnResource</td>
<td>ç±»è·¯å¾„ä¸‹æ˜¯å¦å­˜åœ¨æŒ‡å®šèµ„æºæ–‡ä»¶</td>
</tr>
<tr>
<td>@ConditionalOnWebApplication</td>
<td>å½“å‰æ˜¯webç¯å¢ƒ</td>
</tr>
<tr>
<td>@ConditionalOnNotWebAppliation</td>
<td>å½“å‰ä¸æ˜¯webç¯å¢ƒ</td>
</tr>
<tr>
<td>@ConditionalOnJndi</td>
<td>JNDIå­˜åœ¨æŒ‡å®šé¡¹</td>
</tr>
</tbody></table>
<h1 id="ä¸ƒã€é…ç½®æ–‡ä»¶åŠymlï¼ˆä»£ç ç¤ºä¾‹ï¼‰"><a href="#ä¸ƒã€é…ç½®æ–‡ä»¶åŠymlï¼ˆä»£ç ç¤ºä¾‹ï¼‰" class="headerlink" title="ä¸ƒã€é…ç½®æ–‡ä»¶åŠymlï¼ˆä»£ç ç¤ºä¾‹ï¼‰"></a>ä¸ƒã€é…ç½®æ–‡ä»¶åŠymlï¼ˆä»£ç ç¤ºä¾‹ï¼‰</h1><p>ä½œç”¨ï¼š<code>Spring Boot</code> å¯ä»¥ä½¿ç”¨é…ç½®æ–‡ä»¶ä¿®æ”¹é»˜è®¤çš„é…ç½®ã€‚</p>
<p>yml: YAML Ainâ€™t a Markup Languageï¼Œä¸æ˜¯ä¸€ä¸ªæ ‡è®°æ–‡æ¡£ã€‚</p>
<p><strong><code>Spring Boot</code> é»˜è®¤(è¯†åˆ«)ä¸‰ç§æ ¼å¼å…¨å±€é…ç½®æ–‡ä»¶</strong>ï¼š</p>
<pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--è¯¦è§ï¼šspring-boot-starter-parent$build/resouce--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">></span></span>${basedir}/src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filtering</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filtering</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/application*.yml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/application*.yaml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">></span></span>**/application*.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">></span></span>${basedir}/src/main/resources<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludes</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">></span></span>**/application*.yml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">></span></span>**/application*.yaml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">></span></span>**/application*.properties<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludes</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">></span></span>
</code></pre>
<p>application.propertiesï¼šk&#x3D;vã€‚</p>
<p>&#x3D;&#x3D;ç”±ä¸Šå¯çŸ¥ï¼Œ<code>Spring Boot</code> è¯»å–é…ç½®çš„é¡ºåºä¸º <code>yml &gt; yaml &gt; properties</code> ï¼Œæ‰€ä»¥ <code>.properties</code> çš„é…ç½®ä¼šè¦†ç›–å‰é¢æ‰€æœ‰çš„ã€‚&#x3D;&#x3D;</p>
<p><strong>ymlæ³¨æ„ï¼š</strong></p>
<ul>
<li>k:ç©ºæ ¼v æˆ–è¡Œå†…å†™æ³•ï¼ˆå¯¹è±¡&#x2F;mapï¼š{k: v,â€¦}ã€æ•°ç»„ï¼š[e1, e2, â€¦]ï¼‰</li>
<li>é€šè¿‡å‚ç›´å·¦å¯¹é½ï¼ŒæŒ‡å®šå±‚çº§å…³ç³»ï¼ˆç¼©è¿›ä»…å…è®¸ç©ºæ ¼ï¼Œå…·ä½“æ•°ç›®ä¸é‡è¦ï¼Œåªè¦åŒå±‚çº§å·¦å¯¹é½å³å¯ï¼‰</li>
<li>é»˜è®¤å¯ä¸å†™å¼•å·ï¼šåŒå¼•å·â€â€ä¼šå°†å†…å®¹ä¸­è½¬ä¹‰å­—ç¬¦è½¬ä¹‰ï¼Œå…¶ä»–ï¼ˆå•â€™â€™æˆ–æ— å¼•å·ï¼‰ä¸ä¼šã€‚</li>
</ul>
<p>ymlç¤ºä¾‹ï¼š</p>
<pre class=" language-yml"><code class="language-yml"># ä¸€ã€å¯¹è±¡/mapï¼ˆè¡Œå†…+å±‚çº§ï¼‰
obj:
    obj_prop1: obj_v1
    obj_prop2: obj_v2
    map_k1: map_v1
    map_k2: map_v2
obj: {obj_prop1: obj_v1, obj_prop2: obj_v2, map_k1: map_v1, map_k2: map_v2}

# äºŒã€æ•°ç»„/é›†åˆï¼ˆè¡Œå†…+å±‚çº§ï¼‰
age:
    - 21
    - 22
    - 23
age: [21,22,23]

province:
    - name: è´µå·çœ
      id: 0851
      region: è¥¿å—åœ°åŒº
    - name: åŒ—äº¬å¸‚
      id: 110
      region: ååŒ—åœ°åŒº
provice: [{name: è´µå·çœ, id: 0851, region: è¥¿å—åœ°åŒº}, {name: åŒ—äº¬å¸‚, id: 110, region: ååŒ—åœ°åŒº}]
</code></pre>
<p><strong>JavaBean&lt;â€”&gt;é…ç½®.ymlï¼š</strong></p>
<p>å¯ä»¥æŠŠä¸€ä¸ªJavaBean é€šè¿‡é…ç½®ç±»å½¢å¼æ¥ä½œä¸ºé…ç½®ï¼Œå…·ä½“æ­¥éª¤ï¼š</p>
<blockquote>
<ol>
<li>ç»‘å®šã€‚åˆ›å»ºJavaBean(å¿…é¡»setter&#x2F;getter)ï¼Œå¹¶ç”¨ <code>@ConfigurationProperties(prefix = &quot;å‰ç¼€å&quot;)</code> å’Œ <code>@Component</code> æ³¨è§£ç»‘å®šï¼ˆå°†æ­¤ç±»æ”¾å…¥Springå®¹å™¨ï¼‰ã€‚ä¹Ÿå¯ä»¥ç”¨ <code>@Value(&quot;æ³¨å…¥æ•°æ®&quot;)</code> ï¼Œæˆ–è€…äºŒè€…æ··åˆä½¿ç”¨ï¼Œäº’è¡¥ã€‚</li>
<li>ä½†æ˜¯ä¼˜å…ˆçº§ä¸ºï¼š<code>@ConfigurationProperties(prefix = &quot;xxx&quot;)--&gt;.yml/.properties &gt; @Value(&quot;xxx&quot;)</code> ã€‚å¹¶ä¸”å‰è€…æ‰¹é‡æ³¨å…¥ï¼Œåè€…å•ä¸ªä¾æ¬¡æ³¨å…¥ã€‚</li>
<li>æ³¨å…¥ã€‚application.yml&#x2F;propertiesä¸­è¿›è¡Œé…ç½®ï¼ˆæˆ–åŒæ—¶ä½¿ç”¨.yml&#x2F;.propertiesäº’è¡¥ï¼‰ã€‚</li>
<li>ä½¿ç”¨ï¼šåœ¨å…·ä½“å¼•å…¥JavaBeançš„å£°æ˜ä¸Šï¼Œæ³¨è§£ <code>@Autowired</code> ã€‚</li>
</ol>
</blockquote>
<p>å®ä¾‹ï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 1. ç¬¬1æ­¥ï¼Œåˆ›å»ºJavaBean(å¯å¤åˆå¯¹è±¡)ï¼Œå¹¶å£°æ˜ç±»æ³¨è§£ã€‚</span>
<span class="token annotation punctuation">@Component</span> <span class="token comment" spellcheck="true">//å°†æ­¤JavaBeanæ”¾å…¥Springå®¹å™¨</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"province"</span><span class="token punctuation">)</span>
<span class="token comment" spellcheck="true">//@PropertySource(value = {"classpath:applicationb.properties"}) //è‡ªå®šä¹‰åå­—çš„é…ç½®ï¼Œåªèƒ½ä¸º*.propertiesæˆ–*.xml</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Province</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"ä¼˜å…ˆçº§æœ€ä½ï¼Œè‹¥yml/propertieséƒ½æœªé…ç½®ï¼Œåˆ™ä½¿ç”¨è¯¥æ³¨è§£çš„å€¼ï¼šè´µå·çœ"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> String name<span class="token punctuation">;</span>
  
  <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${random.value}"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//ä¾‹å¦‚ï¼šé»˜è®¤ä½¿ç”¨éšæœºå ä½ç¬¦ã€‚äº¦å¯åœ¨yml/propertiesä¸­ä½¿ç”¨ä¾‹å¦‚ ${random.value} çš„å ä½ç¬¦è¡¨è¾¾å¼ã€‚</span>
    <span class="token keyword">private</span> String id<span class="token punctuation">;</span>
  
  <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${global.region}"</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//ä¾‹å¦‚ï¼š$å³ç”¨SpELå¼•ç”¨yml/propertiesä¸­çš„global.region</span>
    <span class="token keyword">private</span> String region<span class="token punctuation">;</span>
    <span class="token keyword">private</span> Date date<span class="token punctuation">;</span>
    <span class="token keyword">private</span> List<span class="token operator">&lt;</span>City<span class="token operator">></span> cities<span class="token punctuation">;</span>
  
  <span class="token annotation punctuation">@Email</span><span class="token punctuation">(</span>message <span class="token operator">=</span> <span class="token string">"é”™è¯¯æç¤ºï¼šé‚®ç®±æ ¼å¼é”™è¯¯"</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> String email<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> String <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> name<span class="token punctuation">;</span>	<span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span>String name<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>	<span class="token punctuation">}</span>

    <span class="token keyword">public</span> String <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>	<span class="token keyword">return</span> id<span class="token punctuation">;</span>	<span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span> <span class="token punctuation">{</span>	<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>	<span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> String <span class="token function">getRegion</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> region<span class="token punctuation">;</span>	<span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRegion</span><span class="token punctuation">(</span>String region<span class="token punctuation">)</span> <span class="token punctuation">{</span>	<span class="token keyword">this</span><span class="token punctuation">.</span>region <span class="token operator">=</span> region<span class="token punctuation">;</span>	<span class="token punctuation">}</span>

    <span class="token keyword">public</span> Date <span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>	<span class="token keyword">return</span> date<span class="token punctuation">;</span>	<span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDate</span><span class="token punctuation">(</span>Date date<span class="token punctuation">)</span> <span class="token punctuation">{</span>	<span class="token keyword">this</span><span class="token punctuation">.</span>date <span class="token operator">=</span> date<span class="token punctuation">;</span>	<span class="token punctuation">}</span>

    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>City<span class="token operator">></span> <span class="token function">getCities</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>	<span class="token keyword">return</span> cities<span class="token punctuation">;</span>	<span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCities</span><span class="token punctuation">(</span>List<span class="token operator">&lt;</span>City<span class="token operator">></span> cities<span class="token punctuation">)</span> <span class="token punctuation">{</span>	<span class="token keyword">this</span><span class="token punctuation">.</span>cities <span class="token operator">=</span> cities<span class="token punctuation">;</span>	<span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"Province [name="</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">", id="</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">", region="</span> <span class="token operator">+</span> region <span class="token operator">+</span> <span class="token string">", date="</span> <span class="token operator">+</span> date <span class="token operator">+</span> <span class="token string">", cities="</span> <span class="token operator">+</span> cities <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"city"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">City</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> String cName<span class="token punctuation">;</span>
    <span class="token keyword">private</span> String id<span class="token punctuation">;</span>

    <span class="token keyword">public</span> String <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>	<span class="token keyword">return</span> id<span class="token punctuation">;</span>	<span class="token punctuation">}</span>
    <span class="token keyword">public</span> String <span class="token function">getcName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>	<span class="token keyword">return</span> cName<span class="token punctuation">;</span>	<span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setcName</span><span class="token punctuation">(</span>String cName<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cName <span class="token operator">=</span> cName<span class="token punctuation">;</span>	<span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span>String id<span class="token punctuation">)</span> <span class="token punctuation">{</span>	<span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>	<span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> String <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"City [cName="</span> <span class="token operator">+</span> cName <span class="token operator">+</span> <span class="token string">", id="</span> <span class="token operator">+</span> id <span class="token operator">+</span> <span class="token string">"]"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class=" language-yml"><code class="language-yml"># ç¬¬2æ­¥ï¼Œé…ç½® {Your_SpringBoot_Project}/src/main/resources/application.yml
# è‡ªå®šä¹‰æ³¨è§£ç±»
province:
  #name: åŒ—äº¬å¸‚
  id: 110
  #region: ååŒ—åœ°åŒº
  date: 2020/05/22 20:44:32
  email: testa@123.com #è‹¥ç”¨å¦‚â€œxxxâ€ï¼Œåˆ™è¿è¡Œæ—¶é”™è¯¯æŠ¥æ³¨è§£æ—¶çš„messageé”™è¯¯ï¼Œå¦‚ï¼š"é”™è¯¯æç¤ºï¼šé‚®ç®±æ ¼å¼é”™è¯¯"
  #cities: [{name: æµ·æ·€åŒº, id: 1}, {name: æœé˜³, id: 2}, {name: æ›´å¤š, id: 3}]
  cities:
    - {cName: æµ·æ·€åŒº, id: 1}
    - {cname: æœé˜³åŒº, id: 2}
    - {c-Name: ä¸œåŸåŒº, id: 3}
    - {c-name: è¥¿åŸåŒº, id: 4}

# {Your_SpringBoot_Project}/src/main/resources/application.properties
## ä¾‹å¦‚ï¼Œè®¾ç½®ä¸€ä¸ªå…¨å±€çš„regionå±æ€§ï¼Œä¾›æµ‹è¯•@Value+SpELå¼•ç”¨
global.region=Chinese South-West Area
</code></pre>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// 3. æµ‹è¯•éªŒè¯ã€‚ä¾‹å¦‚ï¼š</span>
<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">SpringTestApplicationTests</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    Province mProvince<span class="token punctuation">;</span>
    
    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æµ‹è¯•Provinceï¼š"</span> <span class="token operator">+</span> mProvince<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// runè¾“å‡ºï¼š</span>
<span class="token comment" spellcheck="true">// æµ‹è¯•Provinceï¼šProvince [name=åŒ—äº¬å¸‚, id=110, region=ååŒ—åœ°åŒº, date=Fri May 22 20:44:32 CST 2020, cities=[City [name=æµ·æ·€åŒº, id=1], City [name=æœé˜³, id=2], City [name=æ›´å¤š, id=3]]]</span>
</code></pre>
<hr>
<h1 id="å…«ã€-ImportResource-ã€é…ç½®ç±»ã€å ä½ç¬¦è¡¨è¾¾å¼"><a href="#å…«ã€-ImportResource-ã€é…ç½®ç±»ã€å ä½ç¬¦è¡¨è¾¾å¼" class="headerlink" title="å…«ã€@ImportResource ã€é…ç½®ç±»ã€å ä½ç¬¦è¡¨è¾¾å¼"></a>å…«ã€<code>@ImportResource</code> ã€é…ç½®ç±»ã€å ä½ç¬¦è¡¨è¾¾å¼</h1><p><u><em><strong>é—®é¢˜ï¼šè‹¥è‡ªå·±å†™ spring ç­‰é…ç½®æ–‡ä»¶ï¼Œ<code>Spring Boot</code> èƒ½å¦è¯†åˆ«ï¼Ÿ</strong></em></u><br>ç­”æ¡ˆï¼šé»˜è®¤ä¸èƒ½è‡ªåŠ¨è¯†åˆ«ã€‚è‹¥å¼ºåˆ¶éœ€è¦ï¼Œéœ€è¦ <code>Spring Boot</code> ä¸»é…ç½®ç±»ä¸Šï¼Œç”¨ <code>@ImportResource</code> æŒ‡å®šé…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼ˆä½†æ˜¯ï¼Œä¸æ¨èæ‰‹å†™ spring é…ç½®æ–‡ä»¶ç”¨æ­¤æ–¹å¼ï¼‰ã€‚</p>
<blockquote>
<p>ä¸€èˆ¬é…ç½®æ–¹å¼ï¼š</p>
<ol>
<li>xmlé…ç½®æ–‡ä»¶ (<code>bean_config.xml</code> ä¸æ¨è)</li>
<li>é€šè¿‡æ³¨è§£é…ç½®ï¼ˆ<code>Spring Boot</code> é¦–å…ˆæ¨èï¼ï¼‰</li>
</ol>
</blockquote>
<ol>
<li><p><code>@ImportResource</code> xmlé…ç½®ï¼ˆä¸æ¨èï¼‰ï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// ä¸»é…ç½®ç±»</span>
<span class="token annotation punctuation">@ImportResource</span><span class="token punctuation">(</span>locations <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"classpath:custom_spring.xml"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringTestApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        SpringApplication<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>SpringTestApplication<span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// æ‰‹å†™é…ç½®ï¼Œå¦‚ï¼šcustom_spring.xml</span>
<span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">"1.0"</span> encoding<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">?</span><span class="token operator">></span>
<span class="token operator">&lt;</span>beans <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"beanId_testService"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.hsong.test.service.TestService"</span><span class="token operator">></span>
         <span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">"beanProp_testDao"</span> ref<span class="token operator">=</span><span class="token string">"testDao"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>property<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span>
    <span class="token operator">&lt;</span>bean id<span class="token operator">=</span><span class="token string">"testDao"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"com.hsong.test.service.TestDao"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>bean<span class="token operator">></span>
   <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>beans<span class="token operator">></span>
     
<span class="token comment" spellcheck="true">// ç¤ºä¾‹bean: TestService</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestService</span> <span class="token punctuation">{</span>
     TestDao beanPro_testDao<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// éªŒè¯æµ‹è¯•</span>
<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">SpringTestApplicationTests</span> <span class="token punctuation">{</span>
   
     <span class="token annotation punctuation">@Autowired</span>
     ApplicationContext mContext<span class="token punctuation">;</span>

   <span class="token annotation punctuation">@Test</span>
   <span class="token keyword">void</span> <span class="token function">testBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         TestService testService <span class="token operator">=</span> <span class="token punctuation">(</span>TestService<span class="token punctuation">)</span> mContext<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">"beanId_testService"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æµ‹è¯•Beané…ç½®ï¼š"</span> <span class="token operator">+</span> testService<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</li>
<li><p>æ³¨è§£é…ç½®æ–¹å¼ï¼ˆ<code>Spring Boot</code> æ¨èï¼‰ï¼š</p>
<blockquote>
<p>æ­¥éª¤ï¼šå†™ç±» â€”&gt; @Configurationã€@Bean</p>
</blockquote>
<pre class=" language-java"><code class="language-java"><span class="token keyword">package</span> com<span class="token punctuation">.</span>hsong<span class="token punctuation">.</span>test<span class="token punctuation">.</span>config<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//ä¾‹å¦‚ï¼Œå»ºç«‹ä¸€ä¸ªåŒ…ä¸ºconfig</span>
<span class="token annotation punctuation">@Configuration</span> <span class="token comment" spellcheck="true">//æ³¨è§£ä¸ºé…ç½®ç±»è€Œéæ™®é€šjavaç±»ï¼ˆå³ï¼šç­‰ä»·äºcustom_spring.xmlï¼‰</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppConfig</span> <span class="token punctuation">{</span>
      <span class="token annotation punctuation">@Bean</span> <span class="token comment" spellcheck="true">//å¯¹åº”:xmlä¸­&lt;beans>ä¸­çš„å…¶ä¸­ä¸€ä¸ª&lt;bean></span>
      <span class="token keyword">public</span> TestService beanId_testService<span class="token comment" spellcheck="true">/*å¯¹åº”BeanID:&lt;bean id="beanId_testService" ..>*/</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          TestService service <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TestService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          TestDao testDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TestDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          service<span class="token punctuation">.</span><span class="token function">setTestDao</span><span class="token punctuation">(</span>testDao<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¯¹åº”:&lt;property name="beanProp_testDao" ref="testDao"></span>
          <span class="token keyword">return</span> service<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//å¯¹åº”BeanClass:&lt;bean class="com.hsong.test.service.TestService" ..></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
</li>
<li><p><code>Spring Boot</code> å…¨å±€é…ç½®ä¸­çš„â€œå ä½ç¬¦è¡¨è¾¾å¼â€</p>
<table>
<thead>
<tr>
<th>éšæœºå ä½ç¬¦è¡¨è¾¾å¼</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>${random.uuid}</td>
<td>UUID</td>
</tr>
<tr>
<td>${random.value}</td>
<td>éšæœºå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>${random.int}</td>
<td>éšæœºæ•´å‹æ•°</td>
</tr>
<tr>
<td>${random.long}</td>
<td>éšæœºé•¿æ•´å‹æ•°</td>
</tr>
<tr>
<td>${random.int(10)}</td>
<td>10ä»¥å†…éšæœºæ•´å‹æ•°</td>
</tr>
<tr>
<td>${random.int(1,100)}</td>
<td>æŒ‡å®šèŒƒå›´å†…éšæœºæ•´å‹æ•°</td>
</tr>
</tbody></table>
<p>å½“ç„¶ï¼Œè¿˜å¯ä»¥åœ¨ .yml ä¸­å®šä¹‰å˜é‡ï¼Œåœ¨ .properties ä¸­å¼•ç”¨å˜é‡ã€‚å¦‚ï¼š</p>
<pre class=" language-yml"><code class="language-yml"># .yml
province:
    name: åŒ—äº¬å¸‚
    GDP: 100W

# .properties
beijing_GDP=${province.GDP}
</code></pre>
</li>
</ol>
<h1 id="ä¹ã€å¤šç¯å¢ƒè®¾ç½®ä¸åˆ‡æ¢-profile"><a href="#ä¹ã€å¤šç¯å¢ƒè®¾ç½®ä¸åˆ‡æ¢-profile" class="headerlink" title="ä¹ã€å¤šç¯å¢ƒè®¾ç½®ä¸åˆ‡æ¢(profile)"></a>ä¹ã€å¤šç¯å¢ƒè®¾ç½®ä¸åˆ‡æ¢(profile)</h1><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>Spring Boot</code> ä¼šè¯»å–ä¸» <code>application.properties/yml</code> ç¯å¢ƒé…ç½®ã€‚è‹¥æœ‰å¤šä¸ªç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰ï¼Œéœ€è¦å¦‚ä½•è®¾ç½®åˆ‡æ¢å‘¢ï¼Ÿ</p>
<p><em><strong>ä¸€ã€å¤šç¯å¢ƒåˆ‡æ¢æ­¥éª¤ï¼š</strong></em></p>
<ol>
<li><p>è®¾ç½®ï¼šåŠ¡å¿…ä¸¥æ ¼éµå¾ªå‘½å <code>application-ç¯å¢ƒå.properties/yml</code> ã€‚ä¾‹å¦‚ï¼Œapplication-dev.propertiesã€ application-test.propertiesâ€¦â€¦</p>
</li>
<li><p>åˆ‡æ¢ï¼šåœ¨ä¸»é…ç½® <code>application.properties/yml</code> ä¸­é…ç½® <code>profile</code> æŒ‡å®š ï¼š</p>
<ul>
<li>.properties æ–¹å¼</li>
</ul>
<pre class=" language-properties"><code class="language-properties"><span class="token comment" spellcheck="true"># application.properties ä¸»é…ç½®æ–‡ä»¶</span>
<span class="token attr-name">spring.profiles.active</span><span class="token punctuation">=</span><span class="token attr-value">ç¯å¢ƒå	#ä¾‹å¦‚"application-dev.properties"ï¼Œå°±å†™ dev ã€‚</span>
</code></pre>
<ul>
<li>.yml æ–¹å¼</li>
</ul>
<pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># application.yml ä¸»é…ç½®æ–‡ä»¶</span>
<span class="token comment" spellcheck="true">##è¯´æ˜ï¼šç”¨ "---" åˆ†éš”ä¸åŒçš„ç¯å¢ƒåŒºåŸŸ --> å…·ä½“ç¯å¢ƒé…ç½® spring.profiles: ç¯å¢ƒå --> ä¸»é…ç½®åŒºåŸŸ spring.profiles.active: ç¯å¢ƒå</span>
<span class="token comment" spellcheck="true">###ç¬¬1ç¯å¢ƒï¼ˆä¸»ç¯å¢ƒï¼‰</span>
<span class="token key atrule">server</span><span class="token punctuation">:</span>
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8080</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
        <span class="token key atrule">active</span><span class="token punctuation">:</span> dev <span class="token comment" spellcheck="true">#ä¾‹å¦‚ï¼šåˆ‡æ¢å¼€å‘devç¯å¢ƒ</span>
<span class="token punctuation">---</span>
<span class="token comment" spellcheck="true">###ç¬¬2ç¯å¢ƒï¼ˆdevï¼‰</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">profiles</span><span class="token punctuation">:</span> dev
<span class="token punctuation">---</span>
<span class="token comment" spellcheck="true">###ç¬¬3ç¯å¢ƒï¼ˆtestï¼‰</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">profiles</span><span class="token punctuation">:</span> test
</code></pre>
</li>
</ol>
<p> <em><strong>äºŒã€åŠ¨æ€åˆ‡æ¢ç¯å¢ƒï¼š</strong></em></p>
<ol>
<li>é€šè¿‡ <em><strong>è¿è¡Œ</strong></em> å‚æ•°æŒ‡å®šï¼š</li>
</ol>
<ul>
<li><p>[STS&#x2F;Eclipse] ï¼šé€šè¿‡IDEå¡«å……è¿è¡Œå‚æ•°ã€‚</p>
<pre class=" language-bash"><code class="language-bash">Spring Boot é¡¹ç›® --<span class="token operator">></span> å³é”® Run As --<span class="token operator">></span> Run Configurations --<span class="token operator">></span> <span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token punctuation">)</span>Arguments --<span class="token operator">></span> Program arguments åŒºåŸŸåŠ å…¥: --spring.profiles.active<span class="token operator">=</span>ç¯å¢ƒå
//æ³¨æ„ï¼š--springæœ‰2ä¸ª<span class="token string">"-"</span>ã€‚
</code></pre>
</li>
<li><p>å‘½ä»¤è¡Œï¼šæ‰“æˆjaråŒ…ï¼ˆmavenä¸€èˆ¬æ‰“æˆjaråŒ…ï¼Œå“ªæ€•æ˜¯webé¡¹ç›®ï¼Œä¸æ€ä¹ˆç”¨waråŒ…äº†ï¼‰</p>
<pre class=" language-bash"><code class="language-bash">Spring Boot é¡¹ç›® --<span class="token operator">></span> å³é”® Run As --<span class="token operator">></span> Maven build<span class="token punctuation">..</span>. --<span class="token operator">></span> Main Goals<span class="token punctuation">(</span>è¾“å…¥-è¡¨ç¤º<span class="token punctuation">[</span>å…ˆcleanï¼Œå¯é€‰æ‹©<span class="token punctuation">]</span>æ‰“åŒ…:<span class="token punctuation">[</span>clean<span class="token punctuation">]</span> package<span class="token punctuation">)</span> --<span class="token operator">></span> <span class="token punctuation">{</span>SpringBootProject<span class="token punctuation">}</span>/target/æ‰“åŒ…é¡¹ç›®å.jar --<span class="token operator">></span> ç»ˆç«¯: java -jar æ‰“åŒ…é¡¹ç›®å.jar --spring-profiles.active<span class="token operator">=</span>ç¯å¢ƒå
</code></pre>
</li>
</ul>
<ol start="2">
<li><p>é€šè¿‡ <em><strong>JVM</strong></em> å‚æ•°æŒ‡å®šï¼š</p>
<ul>
<li><p>[STS&#x2F;Eclipse] ï¼šé€šè¿‡IDEå¡«å……è¿è¡Œå‚æ•°ã€‚</p>
<pre class=" language-bash"><code class="language-bash">Spring Boot é¡¹ç›® --<span class="token operator">></span> å³é”® Run As --<span class="token operator">></span>  Run Configurations --<span class="token operator">></span> <span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token punctuation">)</span>Arguments --<span class="token operator">></span> VM arguments åŒºåŸŸåŠ å…¥: -Dspring.profiles.active<span class="token operator">=</span>ç¯å¢ƒå
//æ³¨æ„ï¼š-Dspringæœ‰1ä¸ª<span class="token string">"-"</span>ä¸”åŠ ä¸Š<span class="token string">"D"</span>
</code></pre>
</li>
</ul>
</li>
</ol>
<h1 id="åã€é…ç½®æ–‡ä»¶ä½ç½®"><a href="#åã€é…ç½®æ–‡ä»¶ä½ç½®" class="headerlink" title="åã€é…ç½®æ–‡ä»¶ä½ç½®"></a>åã€é…ç½®æ–‡ä»¶ä½ç½®</h1><p><strong>1. é¡»çŸ¥ï¼š</strong></p>
<ul>
<li><code>.yml/properties</code> ä¸­çš„é…ç½®ï¼Œç›¸äº’è¡¥å……ï¼›å¦‚æœå†²çªï¼Œåˆ™ <code>.properties</code> ä¼˜å…ˆçº§é«˜ã€‚</li>
<li><code>Spring Boot</code> é»˜è®¤èƒ½è¯»å– <code>application.yml/properties</code> ã€‚</li>
<li>ç±»è·¯å¾„ï¼šEclipseä¸­æ–‡ä»¶å¤¹å›¾æ ‡å³ä¸Šè§’å¸¦â€œç”°å­—å‹â€çš„æ–‡ä»¶å¤¹è¡¨ç¤ºè·¯å¾„ï¼Œ<strong>å³ç¨‹åºèƒ½ç›´æ¥è¯†åˆ«çš„è·¯å¾„</strong>ï¼Œåˆå³æ„å»ºè·¯å¾„ã€‚å¦‚ï¼š<code>./src/main/java, ./src/main/resources</code></li>
</ul>
<p><strong>2. æœ€ç»ˆæ€»ç»“</strong>ï¼š <code>application.yml/properties</code> è¿™2ä¸ªæ–‡ä»¶å¯å­˜åœ¨äºå¦‚ä¸‹4ä¸ªåœ°æ–¹ï¼š</p>
<table>
<thead>
<tr>
<th align="left">å­˜æ”¾è·¯å¾„ç±»å‹</th>
<th align="left">å…·ä½“å¯å­˜æ”¾è·¯å¾„</th>
<th>å¤‡æ³¨è¯´æ˜ï¼ˆapplication.yml&#x2F;propertieså¯å…è®¸äºå“ªé‡Œï¼‰</th>
<th>ä¼˜å…ˆçº§</th>
</tr>
</thead>
<tbody><tr>
<td align="left">file</td>
<td align="left">é¡¹ç›®æ ¹ç›®å½•&#x2F;config</td>
<td>å³ï¼Œé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„configç›®å½•</td>
<td>æœ€é«˜</td>
</tr>
<tr>
<td align="left">file</td>
<td align="left">é¡¹ç›®æ ¹ç›®å½•</td>
<td>å³ï¼Œé¡¹ç›®æ ¹ç›®å½•ä¸‹å¯</td>
<td>å…¶æ¬¡</td>
</tr>
<tr>
<td align="left">classpath</td>
<td align="left">é¡¹ç›®æ ¹ç›®å½•&#x2F;classpath&#x2F;config</td>
<td>å³ï¼Œé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ç±»è·¯å¾„(æ„å»ºè·¯å¾„)çš„æ ¹ç›®å½•ä¸‹çš„configç›®å½•</td>
<td>å†å…¶æ¬¡</td>
</tr>
<tr>
<td align="left">classpath</td>
<td align="left">é¡¹ç›®æ ¹ç›®å½•&#x2F;classpath&#x2F;</td>
<td>å³ï¼Œé¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ç±»è·¯å¾„(æ„å»ºè·¯å¾„)çš„æ ¹ç›®å½•ä¸‹ã€‚</td>
<td>æœ€å</td>
</tr>
</tbody></table>
<blockquote>
<p><em><strong>â˜ æ³¨æ„ï¼š</strong></em> â€˜.&#x2F;â€˜ æš‚æ—¶ä»£è¡¨ã€Œé¡¹ç›®æ ¹ç›®å½•ã€ã€‚ä¾‹å¦‚ï¼š<code>application.properties</code> åŒæ—¶å­˜æ”¾äºè¿™4ä¸ªç›®å½•ä¸‹ï¼Œåˆ™ï¼š</p>
<ol>
<li>è‹¥æŸé¡¹é…ç½®æ–‡ä»¶å†²çªï¼ˆå³ï¼Œéƒ½åŒåå­˜åœ¨ï¼‰ï¼Œåˆ™ä¼˜å…ˆçº§ä»ä¸Šåˆ°ä¸‹ï¼ˆå³æŒ‰é¡ºåºä¸Šé¢çš„è¦†ç›–ä¸‹é¢çš„ï¼‰ã€‚</li>
<li>è‹¥ä¸å†²çªï¼Œåˆ™äº’è¡¥ç»“åˆä½¿ç”¨ï¼ˆå³ï¼Œå¯å…¨å­˜åœ¨ï¼Œç”±ä¸Šåˆ°ä¸‹äº’è¡¥æ‰€ç¼¼ï¼‰ã€‚</li>
</ol>
<pre class=" language-bash"><code class="language-bash">ç®€å•ç»“æ„é¢„è§ˆå›¾å¦‚ï¼ˆä»¥ EclipseIDE ä¸ºä¾‹ï¼‰ï¼š
â””â”€â”€ SpringBootProject
    â”œâ”€â”€ application.properties						<span class="token comment" spellcheck="true">#é¡¹ç›®æ ¹ç›®å½•</span>
    â”œâ”€â”€ config
    â”‚   â””â”€â”€ application.properties				    <span class="token comment" spellcheck="true">#é¡¹ç›®æ ¹ç›®å½•/config</span>
    â””â”€â”€ src
        â””â”€â”€ main
            â””â”€â”€ resources	<span class="token comment" spellcheck="true">#src.main.resourceä¸ºclasspath</span>
                â”œâ”€â”€ application.properties			<span class="token comment" spellcheck="true">#é¡¹ç›®æ ¹ç›®å½•/classpath</span>
                â””â”€â”€ config
                    â””â”€â”€ application.properties		<span class="token comment" spellcheck="true">#é¡¹ç›®æ ¹ç›®å½•/classpath/config</span>
</code></pre>
</blockquote>
<h1 id="åä¸€ã€é¡¹ç›®å¤–éƒ¨é…ç½®æ–‡ä»¶åŠåŠ è½½é¡ºåº"><a href="#åä¸€ã€é¡¹ç›®å¤–éƒ¨é…ç½®æ–‡ä»¶åŠåŠ è½½é¡ºåº" class="headerlink" title="åä¸€ã€é¡¹ç›®å¤–éƒ¨é…ç½®æ–‡ä»¶åŠåŠ è½½é¡ºåº"></a>åä¸€ã€é¡¹ç›®å¤–éƒ¨é…ç½®æ–‡ä»¶åŠåŠ è½½é¡ºåº</h1><blockquote>
<p>é…ç½®é¡¹ç›®åï¼š<code>.properties: server.servlet.context-path=/è‡ªå®šä¹‰é¡¹ç›®å</code></p>
</blockquote>
<p>å¤–éƒ¨é…ç½®æ–‡ä»¶ï¼Œå³ï¼šå®šä¹‰åœ¨é¡¹ç›®å·¥ç¨‹ä¹‹å¤–çš„å…¶å®ƒåœ°æ–¹çš„é…ç½®æ–‡ä»¶ã€‚</p>
<p>ä½œç”¨ï¼šå¯ç”¨äºè¡¥æ•‘ï¼Œæ–°å¢&#x2F;æ›´æ”¹å¤–éƒ¨é…ç½®å¹¶åº”ç”¨ä»¥é«˜ä¼˜å…ˆçº§è¦†ç›–é¡¹ç›®å†…é…ç½®ï¼Œæ— éœ€é‡æ–°æ‰“jaråŒ…ã€‚ä¾‹å¦‚ï¼šæ‰“åŒ…å¥½çš„é¡¹ç›®.jar â€“&gt; æŠŠç«¯å£ 8080 æ”¹ä¸º 8099</p>
<p><em><strong>å¦‚ä½•åº”ç”¨ã€Œé¡¹ç›®å¤–éƒ¨é…ç½®æ–‡ä»¶ã€ï¼Ÿ</strong></em></p>
<ol>
<li><p>é€šè¿‡ <em><strong>è¿è¡Œ</strong></em> å‚æ•°æŒ‡å®šï¼ˆè‹¥ã€Œå¤§é‡ã€é…ç½®ä¿®æ”¹ï¼Œåˆ™æ¨èæ–°å¢å•ç‹¬å¤–éƒ¨é…ç½®æ–‡ä»¶æ–¹å¼ï¼ï¼‰ï¼š</p>
<ul>
<li>[STS&#x2F;Eclipse] ï¼šé€šè¿‡IDEå¡«å……è¿è¡Œå‚æ•°ã€‚</li>
</ul>
<pre class=" language-bash"><code class="language-bash">Spring Boot é¡¹ç›® --<span class="token operator">></span> å³é”® Run As --<span class="token operator">></span> Run Configurations --<span class="token operator">></span> <span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token punctuation">)</span>Arguments --<span class="token operator">></span> Program arguments åŒºåŸŸåŠ å…¥: --spring.config.location<span class="token operator">=</span>å¤–éƒ¨é…ç½®æ–‡ä»¶è·¯å¾„ <span class="token punctuation">..</span>.
æ³¨ï¼šè‹¥â€œåŒä¸€é…ç½®â€åŒæ—¶å­˜åœ¨äºã€Œé¡¹ç›®å†…éƒ¨é…ç½®æ–‡ä»¶ã€å’Œã€Œé¡¹ç›®å¤–éƒ¨é…ç½®æ–‡ä»¶ã€ï¼Œåˆ™ä¼˜å…ˆçº§ä¸ºï¼šå¤–éƒ¨ <span class="token operator">></span> å†…éƒ¨ã€‚
</code></pre>
<ul>
<li>å‘½ä»¤è¡Œï¼šæ‰“æˆjaråŒ…</li>
</ul>
<pre class=" language-bash"><code class="language-bash">Spring Boot é¡¹ç›® --<span class="token operator">></span> å³é”® Run As --<span class="token operator">></span> Maven build<span class="token punctuation">..</span>. --<span class="token operator">></span> Main Goals<span class="token punctuation">(</span>è¾“å…¥-è¡¨ç¤º<span class="token punctuation">[</span>å…ˆcleanï¼Œå¯é€‰æ‹©<span class="token punctuation">]</span>æ‰“åŒ…:<span class="token punctuation">[</span>clean<span class="token punctuation">]</span> package<span class="token punctuation">)</span> --<span class="token operator">></span> <span class="token punctuation">{</span>SpringBootProject<span class="token punctuation">}</span>/target/æ‰“åŒ…é¡¹ç›®å.jar --<span class="token operator">></span> ç»ˆç«¯: java -jar æ‰“åŒ…é¡¹ç›®å.jar --spring-config.location<span class="token operator">=</span>å¤–éƒ¨é…ç½®æ–‡ä»¶è·¯å¾„ <span class="token punctuation">..</span>.
</code></pre>
</li>
<li><p>é€šè¿‡ <em><strong>è¿è¡Œ</strong></em> å‚æ•°æŒ‡å®šï¼ˆè‹¥ã€Œå°‘é‡ã€é…ç½®ä¿®æ”¹ï¼Œåˆ™ä¸å¿…è¦å•ç‹¬å¢åŠ å¤–éƒ¨é…ç½®çš„æƒ…å†µï¼ï¼‰ï¼š</p>
<ul>
<li><p>[STS&#x2F;Eclipse] ï¼šé€šè¿‡IDEå¡«å……è¿è¡Œå‚æ•°ã€‚</p>
<pre class=" language-bash"><code class="language-bash">Spring Boot é¡¹ç›® --<span class="token operator">></span> å³é”® Run As --<span class="token operator">></span> Run Configurations --<span class="token operator">></span> <span class="token punctuation">(</span>x<span class="token operator">=</span><span class="token punctuation">)</span>Arguments --<span class="token operator">></span> Program arguments åŒºåŸŸåŠ å…¥: --server.port<span class="token operator">=</span>8099 --server.servlet.context-path<span class="token operator">=</span>/XXX <span class="token punctuation">..</span>.
 æ³¨ï¼šå¤šä¸ªé…ç½®é¡¹ï¼Œä»¥ã€Œç©ºæ ¼ã€å¹¶è¡Œè¿æ¥ã€‚
</code></pre>
</li>
</ul>
</li>
</ol>
<p><strong>æ€»ä¹‹ï¼Œ</strong> å¤šä¸ªåœ°æ–¹é…ç½®æœ‰å†²çªï¼ˆå³å‡åŒæ—¶å­˜åœ¨ï¼‰ï¼Œåˆ™ä¼˜å…ˆçº§ä¸ºï¼š</p>
<blockquote>
<p>å‘½ä»¤è¡Œå‚æ•°ï¼ˆè°ƒç”¨å¤–éƒ¨é…ç½®æ–‡ä»¶ &gt; è¿è¡Œå‚æ•°ï¼‰ &gt; å†…éƒ¨æ–‡ä»¶ï¼ˆproperties &gt; yamlï¼‰</p>
</blockquote>
<h1 id="åäºŒã€Spring-Boot-æ—¥å¿—å¤„ç†"><a href="#åäºŒã€Spring-Boot-æ—¥å¿—å¤„ç†" class="headerlink" title="åäºŒã€Spring Boot æ—¥å¿—å¤„ç†"></a>åäºŒã€<code>Spring Boot</code> æ—¥å¿—å¤„ç†</h1><p>å¸¸è§æ—¥å¿—æ¡†æ¶ï¼šUCï¼ŒJUL jboss-loggingï¼Œlogbackï¼Œlog4jï¼Œslf4jâ€¦</p>
<p>å®˜ç½‘æ—¥å¿—ï¼š<a href="https://docs.spring.io/spring-boot/docs/2.3.0.RELEASE/reference/html/spring-boot-features.html#boot-features-logging">https://docs.spring.io/spring-boot/docs/2.3.0.RELEASE/reference/html/spring-boot-features.html#boot-features-logging</a></p>
<p><em><strong>ä¸€ã€åŸºæœ¬æ—¥å¿—æ“ä½œï¼š</strong></em></p>
<pre class=" language-bash"><code class="language-bash">1. Spring Boot é»˜è®¤é€‰ç”¨ï¼šslf4jï¼Œlogbackã€‚
2. Spring Boot é»˜è®¤é…ç½®å¥½äº†æ—¥å¿—ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨å³å¯ã€‚è‹¥è¦ä½¿ç”¨å…¶å®ƒæ—¥å¿—æ¡†æ¶ï¼Œé‚£å°±å¾—å¦è¡Œé…ç½®äº†ã€‚

3. Spring Boot é»˜è®¤æ—¥å¿—levelä¸ºinfoï¼ˆå³æ‰“å°INFO+ï¼‰ï¼Œå¯è‡ªå®šä¹‰ï¼š
è¯­æ³•ï¼šloging.level.ä¸»é…ç½®ç±»æ‰€åœ¨åŒ…<span class="token operator">=</span>trace/info/debug/info/warn/error/fatal/off 
<span class="token comment" spellcheck="true">#ä¾‹å¦‚ï¼šlogging.level.com.hsong.test.SpringTestApplicationTests = warn</span>

4. è‡ªå®šä¹‰å­˜å‚¨æ—¥å¿—åˆ°æ–‡ä»¶ï¼š
---<span class="token operator">></span> logging.file.name<span class="token operator">=</span>æ—¥å¿—æ–‡ä»¶.åç¼€å	<span class="token comment" spellcheck="true">#ç›¸å¯¹è·¯å¾„ï¼šé»˜è®¤ä¸ºâ€œé¡¹ç›®æ ¹ç›®å½•â€</span>
---<span class="token operator">></span> logging.file.name<span class="token operator">=</span>./log/1/æ—¥å¿—æ–‡ä»¶.åç¼€å	<span class="token comment" spellcheck="true">#ç›¸å¯¹è·¯å¾„ï¼šå­˜å‚¨åˆ°â€œé¡¹ç›®æ ¹ç›®å½•/log/1/â€ç›®å½•ä¸‹</span>
---<span class="token operator">></span> logging.file.name<span class="token operator">=</span>/Users/<span class="token punctuation">{</span>uname<span class="token punctuation">}</span>/Downloads/æ—¥å¿—æ–‡ä»¶.åç¼€å <span class="token comment" spellcheck="true">#ç»å¯¹è·¯å¾„ï¼šå­˜å‚¨åˆ°â€œï½/Downloads/â€ç›®å½•ä¸‹</span>
---<span class="token operator">></span> logging.file.path<span class="token operator">=</span><span class="token punctuation">[</span>./<span class="token punctuation">]</span>dir<span class="token punctuation">[</span>/dir1/dir2/<span class="token punctuation">..</span>.<span class="token punctuation">]</span>	<span class="token comment" spellcheck="true">#ç›¸å¯¹è·¯å¾„ï¼šé»˜è®¤åˆ›å»ºspring.logå¹¶å­˜å‚¨åˆ°â€œé¡¹ç›®æ ¹ç›®å½•/dir[/dir1/dir2/...]â€ç›®å½•ä¸‹ã€‚å…¶ä¸­ï¼š"[./]"å¯é€‰ï¼Œå‡è¡¨ç¤ºç›¸å¯¹å½“å‰é¡¹ç›®ã€‚</span>

5. é»˜è®¤æ—¥å¿—æ ¼å¼ï¼Œåœ¨spring-boot-2.3.0.RELEASE.jar åŒ…ä¸­ org.springframework.boot.logging.logback é‡Œxmlé…ç½®ã€‚
</code></pre>
<p><em><strong>ä¸€ã€ä¿®æ”¹æ—¥å¿—æ ¼å¼åœ¨console&#x2F;fileï¼š</strong></em></p>
<pre class=" language-properties"><code class="language-properties"><span class="token comment" spellcheck="true"># ä¾‹å¦‚ï¼Œè‡ªå®šä¹‰ä¿®æ”¹æ—¥å¿—æ˜¾ç¤ºæ ¼å¼</span>
<span class="token attr-name">custom-output-format</span> <span class="token punctuation">=</span> <span class="token attr-value">%d{yyyy-MM-dd HH:mm:ss:SSS} [%+5level][%thread] &lt;%logger{50}> : %msg%n</span>
<span class="token attr-name">logging.pattern.console</span> <span class="token punctuation">=</span> <span class="token attr-value">${custom-output-format}</span>
<span class="token attr-name">logging.pattern.file</span> <span class="token punctuation">=</span> <span class="token attr-value">${custom-output-format}</span>
<span class="token comment" spellcheck="true">## %d: æ—¥æœŸæ—¶é—´</span>
<span class="token comment" spellcheck="true">## %thread: çº¿ç¨‹å</span>
<span class="token comment" spellcheck="true">## %-5level: æ˜¾ç¤ºæ—¥å¿—çº§åˆ«ï¼Œ-5è¡¨ç¤ºå·¦å¯¹é½ä¸”å®½åº¦ä¸º5ï¼Œ+5è¡¨ç¤ºå³å¯¹é½ä¸”å®½åº¦ä¸º5</span>
<span class="token comment" spellcheck="true">## %logger{50}: è®¾ç½®æ—¥å¿—ç±»é•¿åº¦ï¼Œ50è¡¨ç¤ºæœ€é•¿æ˜¾ç¤ºå­—ç¬¦æ•°ï¼Œè¶…å‡ºä¸æ˜¾ç¤º</span>
<span class="token comment" spellcheck="true">## %msg: æ—¥å¿—æ¶ˆæ¯</span>
<span class="token comment" spellcheck="true">## $n: å›è½¦</span>
</code></pre>
<h1 id="åä¸‰ã€Spring-Boot-å¤„ç†Webé™æ€èµ„æº"><a href="#åä¸‰ã€Spring-Boot-å¤„ç†Webé™æ€èµ„æº" class="headerlink" title="åä¸‰ã€Spring Boot å¤„ç†Webé™æ€èµ„æº"></a>åä¸‰ã€<code>Spring Boot</code> å¤„ç†Webé™æ€èµ„æº</h1><p><code>Spring Boot</code> æ˜¯ä¸€ä¸ªjarï¼Œç›¸æ¯”ä¼ ç»Ÿæ–¹å¼é™æ€èµ„æºä¸å†æ˜¯æœ‰å­˜æ”¾åˆ° <code>webapps</code> ä¸­äº†ã€‚</p>
<p><strong>1ã€é™æ€èµ„æºå­˜æ”¾è·¯å¾„ï¼š</strong><u><em><strong><code>Spring Boot</code> é€šè¿‡ <code>WebMvcAutoConfiguration.addResourceHandlers()</code> æŒ‡å®šåœ¨ <code>/webjars/</code></strong></em></u> ã€‚ </p>
<p><strong>2ã€å¦‚ä½•å¼•å…¥jarä¸­é™æ€èµ„æºï¼š</strong> <u><em><strong>ä»jaråŒ…ç›®å½•ç»“æ„çš„ <code>webjars</code> å¼€å§‹å†™ï¼Œå¦‚ï¼š<a href="http://localhost:8080/webjars/jquery/3.3.1-1/juqery.js">http://localhost:8080/webjars/jquery/3.3.1-1/juqery.js</a></strong></em></u> ã€‚</p>
<p><strong>3ã€å¦‚ä½•è‡ªå®šä¹‰é™æ€èµ„æºå¹¶æ”¾å…¥ <code>Spring Boot</code> ä¸­ï¼Ÿ</strong> (å£°æ˜ï¼šè‡ªå·±å†™çš„ï¼Œä¸æ¨è é™æ€èµ„æº-&gt;jar è¿™ç§æ–¹å¼ï¼)</p>
<blockquote>
<p>æ¨èæ–¹å¼ï¼šéµå¾ª <code>Spring Boot</code> çš„çº¦å®šã€‚<code>Spring Boot</code> å°†æŸäº›ç›®å½•ç»“æ„è®¾ç½®æˆé™æ€èµ„æºå­˜æ”¾ç›®å½•ï¼Œå¼€å‘è€…æŒ‰ç…§å…¶è§„å®šæ”¾å…¥è¯¥äº›ç›®å½•å³å¯ã€‚</p>
<ul>
<li><p>é™æ€èµ„æºç›®å½•ï¼š</p>
<blockquote>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//æºç ï¼šorg.springframework.boot.autoconfigure.web.ResourceProperties.class</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span> CLASSPATH_RESOURCE_LOCATIONS <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token string">"classpath:/META-INF/resources/"</span><span class="token punctuation">,</span> 
    <span class="token string">"classpath:/resources/"</span><span class="token punctuation">,</span> 
      <span class="token string">"classpath:/static/"</span><span class="token punctuation">,</span> 
      <span class="token string">"classpath:/public/"</span> 
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
</blockquote>
</li>
<li><p>é™æ€èµ„æºç›®å½• - ä¼˜å…ˆçº§ï¼š</p>
<table>
<thead>
<tr>
<th>é™æ€èµ„æºç›®å½•</th>
<th>ä¼˜å…ˆçº§ï¼ˆå€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼‰</th>
</tr>
</thead>
<tbody><tr>
<td><code>classpath:/META-INF/resources/</code></td>
<td>4ï¼ˆæœ€é«˜ï¼‰</td>
</tr>
<tr>
<td><code>classpath:/resources/</code></td>
<td>3ï¼ˆå…¶æ¬¡ï¼‰</td>
</tr>
<tr>
<td><code>classpath:/static/</code></td>
<td>2ï¼ˆå†å…¶æ¬¡ï¼‰</td>
</tr>
<tr>
<td><code>classpath:/public/</code></td>
<td>1ï¼ˆæœ€ä½ï¼‰</td>
</tr>
</tbody></table>
</li>
</ul>
</blockquote>
<h1 id="åå››ã€WebMvcAutoConfiguration-æºç è§£è¯»"><a href="#åå››ã€WebMvcAutoConfiguration-æºç è§£è¯»" class="headerlink" title="åå››ã€WebMvcAutoConfiguration æºç è§£è¯»"></a>åå››ã€<code>WebMvcAutoConfiguration</code> æºç è§£è¯»</h1><p><strong>1ã€è®¾ç½®æ¬¢è¿é¡µï¼š</strong></p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æºç è¯¦è¿°å¦‚ä½•ä¸€å±‚å±‚è®¾ç½®å¯¹æ¬¢è¿é¡µçš„ï¼Ÿ</span>
.org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration.class
    â””â”€ EnableWebMvcConfiguration <span class="token comment" spellcheck="true">#inner_class</span>
            â””â”€ welcomePageHandlerMapping<span class="token punctuation">(</span><span class="token punctuation">)</span> -<span class="token operator">></span> getWelcomePage<span class="token punctuation">(</span><span class="token punctuation">)</span> -<span class="token operator">></span> getIndexHtml<span class="token punctuation">(</span><span class="token punctuation">)</span>:location+index.html
<span class="token comment" spellcheck="true"># æ¬¢è¿é¡µå®šä¹‰ï¼šå³ä»»æ„ä¸€ä¸ªé™æ€èµ„æºç›®å½•ä¸­çš„ index.html å°±æ˜¯æ¬¢è¿é¡µã€‚</span>
private Resource getIndexHtml<span class="token punctuation">(</span>String location<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> this.resourceLoader.getResource<span class="token punctuation">(</span>location + <span class="token string">"index.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

è®¾ç½®æ¬¢è¿é¡µï¼šå°† spring boot çº¦å®šå â€œindex.htmlâ€ æ”¾å…¥ä»»æ„é™æ€èµ„æºç›®å½•ä¸‹å³å¯ã€‚
</code></pre>
<p><strong>2ã€è®¾ç½®<code>favicon.ico</code>ï¼š</strong></p>
<pre class=" language-text"><code class="language-text">1. æ‰©å±•ï¼šå¦‚ä½•ä¸‹è½½æŸç½‘ç«™ favicon.icoï¼Ÿç½‘ç«™/favicon.icoã€‚ä¾‹å¦‚ï¼šhttps://docs.spring.io/favicon.ico
2. è®¾ç½®faviconï¼šå°† spring boot çº¦å®šå â€œfavicon.icoâ€ æ”¾åˆ°ä»»æ„é™æ€èµ„æºç›®å½•ä¸‹å³å¯ã€‚
</code></pre>
<p><strong>3ã€æ›´æ”¹<code>spring boot</code>é»˜è®¤çš„é™æ€èµ„æºè·¯å¾„ï¼š</strong></p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">// æŸ¥çœ‹æºç ï¼šorg.springframework.boot.autoconfigure.web.ResourceProperties.class</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"spring.resources"</span><span class="token punctuation">,</span> ignoreUnknownFields <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResourceProperties</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span> CLASSPATH_RESOURCE_LOCATIONS <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">"classpath:/META-INF/resources/"</span><span class="token punctuation">,</span> <span class="token string">"classpath:/resources/"</span><span class="token punctuation">,</span> <span class="token string">"classpath:/static/"</span><span class="token punctuation">,</span> <span class="token string">"classpath:/public/"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * Locations of static resources. Defaults to classpath:[/META-INF/resources/, /resources/, /static/, /public/].
     */</span>
    <span class="token keyword">private</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span> staticLocations <span class="token operator">=</span> CLASSPATH_RESOURCE_LOCATIONS<span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre>
<p>â€‹	ç”±ä¸Šå¯çŸ¥ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå®šä¹‰é™æ€èµ„æºï¼Œä¾‹å¦‚ï¼š</p>
<pre class=" language-properties"><code class="language-properties"><span class="token comment" spellcheck="true"># application.properties</span>
<span class="token comment" spellcheck="true">## static-locationsä¸staticLocationsä¸€æ ·ï¼Œæ¾æ•£è¯­æ³•ã€‚</span>
<span class="token comment" spellcheck="true">## æ³¨ï¼šä¼šè¦†ç›–é»˜è®¤çš„4ä¸ªé™æ€èµ„æºç›®å½•ï¼</span>
<span class="token attr-name">spring.resources.static-locations</span><span class="token punctuation">=</span><span class="token attr-value">classpath:/res/	#è‡ªå®šä¹‰resèµ„æºç›®å½•</span>
<span class="token attr-name">spring.resources.static-locations</span><span class="token punctuation">=</span><span class="token attr-value">classpath:/res/, classpath:/img/,... #è‡ªå®šä¹‰resã€imgâ€¦â€¦èµ„æºç›®å½•</span>
</code></pre>
<h1 id="åäº”ã€å¼•å…¥æ¨¡æ¿å¼•æ“thymeleaf"><a href="#åäº”ã€å¼•å…¥æ¨¡æ¿å¼•æ“thymeleaf" class="headerlink" title="åäº”ã€å¼•å…¥æ¨¡æ¿å¼•æ“thymeleaf"></a>åäº”ã€å¼•å…¥æ¨¡æ¿å¼•æ“<code>thymeleaf</code></h1><p><code>Spring Boot</code> é»˜è®¤ä¸æ”¯æŒåŠ¨æ€èµ„æºï¼Œå¦‚ï¼šJSPç­‰ã€‚ä½†æ˜¯ï¼Œæ¡†æ¶æ¨èï¼šæ¨¡æ¿å¼•æ“ thymeleafã€‚</p>
<blockquote>
<p><strong>æ¨¡æ¿å¼•æ“æ¦‚å¿µ</strong>ï¼šæœ¬è´¨æ˜¯æŠŠâ€œæ¨¡æ¿â€å’Œâ€œæ•°æ®â€åˆ†ç¦»è®¾è®¡ï¼Œé€šè¿‡å®ƒä½œä¸ºä¸­é—´ä»¶æ¥èåˆäºŒè€…å½¢æˆå…·ä½“æœŸæœ›çš„é¡µé¢äº§ç‰©ã€‚å³ï¼šç½‘é¡µ &#x3D; æ¨¡æ¿ + æ•°æ®ã€‚</p>
<p><strong>Thymeleafå®˜ç½‘</strong>ï¼š<a href="https://www.thymeleaf.org/">https://www.thymeleaf.org/</a></p>
</blockquote>
<h2 id="Thymeleaft-åˆè¯†"><a href="#Thymeleaft-åˆè¯†" class="headerlink" title="Thymeleaft åˆè¯†"></a><code>Thymeleaft</code> åˆè¯†</h2><p><strong>ä¸€ã€å¦‚ä½•ä½¿ç”¨ <code>thymeleaf</code></strong> ï¼Ÿï¼ˆ*Tips:ä»è‡ªåŠ¨è£…é…åŸç†å‡ºå‘ï¼Œç ”ç©¶ è‡ªåŠ¨è£…é…çš„åŒ…<code>spring-boot-autoconfigure-2.3.0.RELEASE.jar</code> é‡Œæ˜¯å¦æœ‰<code>ThymeleafAutoConfiguration/ThymeleafProperties</code>?*ï¼‰</p>
<p>ç»æŸ¥çœ‹ï¼Œæ ¸å¿ƒæºç ä¸ºï¼š</p>
<pre class=" language-java"><code class="language-java"><span class="token comment" spellcheck="true">//org.springframework.boot.autoconfigure.thymeleaf.ThymeleafProperties.class</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"spring.thymeleaf"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThymeleafProperties</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> Charset DEFAULT_ENCODING <span class="token operator">=</span> StandardCharsets<span class="token punctuation">.</span>UTF_8<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String DEFAULT_PREFIX <span class="token operator">=</span> <span class="token string">"classpath:/templates/"</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> String DEFAULT_SUFFIX <span class="token operator">=</span> <span class="token string">".html"</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * Whether to check that the template exists before rendering it.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> checkTemplate <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * Whether to check that the templates location exists.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> checkTemplateLocation <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * Prefix that gets prepended to view names when building a URL.
     */</span>
    <span class="token keyword">private</span> String prefix <span class="token operator">=</span> DEFAULT_PREFIX<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * Suffix that gets appended to view names when building a URL.
     */</span>
    <span class="token keyword">private</span> String suffix <span class="token operator">=</span> DEFAULT_SUFFIX<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * Template mode to be applied to templates. See also Thymeleaf's TemplateMode enum.
     */</span>
    <span class="token keyword">private</span> String mode <span class="token operator">=</span> <span class="token string">"HTML"</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * Template files encoding.
     */</span>
    <span class="token keyword">private</span> Charset encoding <span class="token operator">=</span> DEFAULT_ENCODING<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * Whether to enable template caching.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> cache <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * Order of the template resolver in the chain. By default, the template resolver is
     * first in the chain. Order start at 1 and should only be set if you have defined
     * additional "TemplateResolver" beans.
     */</span>
    <span class="token keyword">private</span> Integer templateResolverOrder<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * Comma-separated list of view names (patterns allowed) that can be resolved.
     */</span>
    <span class="token keyword">private</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span> viewNames<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * Comma-separated list of view names (patterns allowed) that should be excluded from
     * resolution.
     */</span>
    <span class="token keyword">private</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span> excludedViewNames<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * Enable the SpringEL compiler in SpringEL expressions.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> enableSpringElCompiler<span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * Whether hidden form inputs acting as markers for checkboxes should be rendered
     * before the checkbox element itself.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> renderHiddenMarkersBeforeCheckboxes <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token comment" spellcheck="true">/**
     * Whether to enable Thymeleaf view resolution for Web frameworks.
     */</span>
    <span class="token keyword">private</span> <span class="token keyword">boolean</span> enabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>ä½¿ç”¨ <code>Thymeleaf</code> æ­¥éª¤ï¼š</strong></p>
<blockquote>
<ol>
<li><p>å¼•å…¥ dependencyã€‚</p>
<pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--{é¡¹ç›®æ ¹ç›®å½•/pom.xml}ï¼šæ·»åŠ å¦‚ä¸‹ï¼ˆä»¥2.3.0ä¸ºä¾‹ï¼‰æˆ–è€…é€šè¿‡IDEæ·»åŠ ï¼ˆEclipse:ï¼‰ "âŒ¥ + /" -> Edit Starts... è¿›å»æœç´¢ç„¶åå‹¾é€‰åº”ç”¨å³å¯è‡ªåŠ¨æ·»åŠ è¯¥dependencyã€‚ --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>

<span class="token comment" spellcheck="true">&lt;!--ç¼–è¯‘ä¸‹è½½æˆåŠŸåï¼Œä¼šæœ‰å¦‚ä¸‹jarï¼š--></span>
spring-boot-starter-thymeleaf-2.3.0.RELEASE.jar
thymeleaf-spring5-3.0.11.RELEASE.jar
thymeleaf-3.0.11.RELEASE.jar
</code></pre>
</li>
<li><p>åˆ›å»ºæ¨¡æ¿æ–‡ä»¶ã€‚</p>
<pre class=" language-java"><code class="language-java"><span class="token operator">-</span> é»˜è®¤åªéœ€å°†é»˜è®¤åç¼€æ ¼å¼ <span class="token punctuation">.</span>html  æ¨¡æ¿æ”¾å…¥ é»˜è®¤æ¨¡æ¿ç±»è·¯å¾„ä¸‹ classpath<span class="token operator">:</span><span class="token operator">/</span>templates<span class="token operator">/</span> å³å¯ã€‚
<span class="token operator">-</span> äº¦å¯è‡ªå®šä¹‰ä¿®æ”¹é»˜è®¤ï¼Œå…·ä½“å‚è€ƒ prefix <span class="token operator">=</span> <span class="token string">"spring.thymeleaf"</span>ã€‚
ä¾‹å¦‚ï¼š
<span class="token comment" spellcheck="true">// Controlleré…ç½®ç±»</span>
<span class="token annotation punctuation">@Controller</span> <span class="token comment" spellcheck="true">//æ³¨æ„ï¼šä½¿ç”¨@Controlleræ‰èƒ½ç”¨æ¨¡æ¿ï¼</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/test1"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test1Contoller</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/welcome"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> String <span class="token function">welcome</span><span class="token punctuation">(</span>Map<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token operator">></span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"data_1"</span><span class="token punctuation">,</span> <span class="token string">"data 1 ..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//ç»™requeståŸŸä¸­ä¼ å€¼</span>
      <span class="token keyword">return</span> <span class="token string">"tmpl"</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment" spellcheck="true">// classpath:/templates/tmpl.html</span>
<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">></span>
<span class="token operator">&lt;</span>html xmlns<span class="token operator">:</span>th<span class="token operator">=</span><span class="token string">"http://www.thymeleaf.org"</span><span class="token operator">></span>
  <span class="token operator">&lt;</span>head<span class="token operator">></span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>title<span class="token operator">></span>Insert title here<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>
  <span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>p th<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">"${data_1}"</span><span class="token operator">></span>Welcome to Thymeleaf<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span>
      
<span class="token comment" spellcheck="true">// è®¿é—®æµ‹è¯•ï¼šhttp://localhost:8080/test1/welcome</span>
</code></pre>
</li>
</ol>
</blockquote>
<p><a href="https://www.cnblogs.com/lannoy/p/5976402.html"><strong><code>@restcontroller</code>ä¸<code>@controller</code>çš„åŒºåˆ«ï¼š</strong></a></p>
<pre class=" language-bash"><code class="language-bash">@Controllerï¼šä¿®é¥°classï¼Œç”¨æ¥åˆ›å»ºå¤„ç†httpè¯·æ±‚çš„å¯¹è±¡
@RestControllerï¼šSpring4ä¹‹ååŠ å…¥çš„æ³¨è§£ï¼ŒåŸæ¥åœ¨@Controllerä¸­è¿”å›jsonéœ€è¦@ResponseBodyæ¥é…åˆï¼Œå¦‚æœç›´æ¥ç”¨@RestControlleræ›¿ä»£@Controllerå°±ä¸éœ€è¦å†é…ç½®@ResponseBodyï¼Œé»˜è®¤è¿”å›jsonæ ¼å¼ã€‚
------------------------------------------------------------------------------------------
1. å¦‚æœåªæ˜¯ä½¿ç”¨ @RestController æ³¨è§£ Controllerï¼Œåˆ™ Controller ä¸­çš„æ–¹æ³•æ— æ³•è¿”å›jspé¡µé¢ï¼Œé…ç½®çš„è§†å›¾è§£æå™¨InternalResourceViewResolver ä¸èµ·ä½œç”¨ï¼Œè¿”å›çš„å†…å®¹å°±æ˜¯Return é‡Œçš„å†…å®¹ã€‚
ä¾‹å¦‚ï¼šæœ¬æ¥åº”è¯¥åˆ°success.jspé¡µé¢çš„ï¼Œåˆ™å…¶æ˜¾ç¤ºsuccess.
2. å¦‚æœéœ€è¦è¿”å›åˆ°æŒ‡å®šé¡µé¢ï¼Œåˆ™éœ€è¦ç”¨ @Controller é…åˆè§†å›¾è§£æå™¨ InternalResourceViewResolver æ‰è¡Œã€‚
3. å¦‚æœéœ€è¦è¿”å›JSONï¼ŒXMLæˆ–è‡ªå®šä¹‰mediaTypeå†…å®¹åˆ°é¡µé¢ï¼Œåˆ™éœ€è¦åœ¨å¯¹åº”çš„æ–¹æ³•ä¸ŠåŠ ä¸Š @ResponseBody æ³¨è§£ã€‚
</code></pre>
<h2 id="Thymeleaf-å…¥é—¨ä½¿ç”¨"><a href="#Thymeleaf-å…¥é—¨ä½¿ç”¨" class="headerlink" title="Thymeleaf å…¥é—¨ä½¿ç”¨"></a><code>Thymeleaf</code> å…¥é—¨ä½¿ç”¨</h2><p><code>&lt;p th:text=&quot;$&#123;data_1&#125;&quot;&gt;Welcome to Thymeleaf!&lt;/p&gt;</code>è¡¨ç¤ºä» <code>$&#123;data_1&#125;</code> ä¸­å–å€¼ï¼Œå–åˆ°åˆ™æ›¿æ¢åŸæœ‰çš„htmlå€¼ã€‚</p>
<blockquote>
<p>æ ¼å¼ï¼š<code>th:htmlçš„å±æ€§å=å€¼</code> ã€‚ä¾‹å¦‚ï¼š<code>th:id=&quot;xx&quot; th:class=&quot;yyy&quot;</code></p>
<p>æ›´å¤šå±æ€§ï¼š<a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#attribute-precedence">https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#attribute-precedence</a></p>
</blockquote>
<p>ä¾‹å¦‚ï¼šth:text&#x2F;th:utext	è·å–æ–‡æœ¬ï¼ˆä¸è½¬ä¹‰ï¼Œå³æ ‡ç­¾åŸæ ·è¾“å‡ºä¸æ¸²æŸ“ï¼Œu:unescapedï¼‰</p>
<ul>
<li><p>æ›´å¤šå–å€¼è¡¨è¾¾å¼ï¼Œé™¤ <code>$&#123;&#125;</code> å¤–ç­‰ï¼š<a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#standard-expression-syntax">https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#standard-expression-syntax</a></p>
<pre class=" language-text"><code class="language-text">${...} : Variable expressions.						#ELè¡¨è¾¾å¼
*{...} : Selection expressions.						#é€‰æ‹©å½“å‰æ ‡ç­¾
#{...} : Message (i18n) expressions.			#å›½é™…åŒ–æ˜¾ç¤º
@{...} : Link (URL) expressions.					#è¶…é“¾æ¥
~{...} : Fragment expressions.						#fragment
</code></pre>
</li>
</ul>
<h1 id="åå…­ã€Spring-Boot-æ•´åˆå¤–ç½®-Tomcat-åŠä½¿ç”¨-JSP-å¼€å‘"><a href="#åå…­ã€Spring-Boot-æ•´åˆå¤–ç½®-Tomcat-åŠä½¿ç”¨-JSP-å¼€å‘" class="headerlink" title="åå…­ã€Spring Boot æ•´åˆå¤–ç½® Tomcat åŠä½¿ç”¨ JSP å¼€å‘"></a>åå…­ã€<code>Spring Boot</code> æ•´åˆå¤–ç½® Tomcat åŠä½¿ç”¨ JSP å¼€å‘</h1><p><code>Spring Boot</code> é»˜è®¤è‡ªå¸¦å†…ç½®çš„ Tomcatï¼Œä¸”ä¸éœ€è¦æ‰“æˆ war åŒ…ï¼Œç›´æ¥ä»¥ jar åŒ…å³å¯è¿è¡Œã€‚</p>
<p>ä½†æ˜¯ï¼Œå¦‚æœè¦æ•´åˆJSPå¼€å‘ï¼Œéœ€è¦å•ç‹¬é…ç½® <strong>å¤–ç½®çš„Tomcat</strong> æ‰è¡Œï¼Œä»¥ä¾¿æ‰“waråŒ…ã€‚</p>
<p><strong>1ã€<code>Spring Boot</code> æ•´åˆJSPå¼€å‘æ­¥éª¤ï¼š</strong></p>
<ul>
<li><p>æ–°å»ºbooté¡¹ç›®ï¼Œå‹¾é€‰waræ‰“åŒ…å½¢å¼ã€‚</p>
<pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--pom.xml--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-tomcat<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
æ³¨æ„ï¼šprovided è¡¨ç¤ºå°†é¡¹ç›®æ‰“åŒ…æ—¶ï¼Œä¸å°†å†…ç½®çš„tomcatä¸€èµ·æ‰“åŒ…ï¼
</code></pre>
</li>
<li><p>å»ºç«‹åŸºæœ¬çš„webé¡¹ç›®æ‰€éœ€é¡¹ç›®ç»“æ„ï¼š</p>
<pre class=" language-bash"><code class="language-bash">webapp/WEB-INF					<span class="token comment" spellcheck="true">#éœ€è¦</span>
webapp/WEB-INF/web.xml	<span class="token comment" spellcheck="true">#ä¸éœ€è¦æ‰‹å·¥ï¼ŒSpring Bootä¼šå¼„ï¼‰</span>
webapp/index.jsp
</code></pre>
</li>
<li><p>åˆ›å»ºtomcatå®ä¾‹ï¼Œéƒ¨ç½²é¡¹ç›®ã€‚</p>
<pre class=" language-bash"><code class="language-bash">å³é”®é¡¹ç›®New -<span class="token operator">></span> Servers -<span class="token operator">></span> Apache -<span class="token operator">></span> é€‰æ‹©ä¸€ä¸ªç‰ˆæœ¬tomcatï¼Œå¦‚ï¼šTomcat v8.5 server
</code></pre>
</li>
</ul>
<p><strong>2ã€åˆ†æ</strong>ï¼š</p>
<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># è®¿é—®ï¼šåŸŸå:port/é¡¹ç›®å/æ–‡ä»¶åï¼Œå¦‚ï¼šhttp://localhost:8080/JspTest/index.jspã€‚</span>
<span class="token comment" spellcheck="true"># ä¸jar-booté¡¹ç›®ä¸ä¸€æ ·ï¼Œé»˜è®¤ä¸éœ€è¦é¡¹ç›®åå’Œåç¼€ã€‚</span>

<span class="token comment" spellcheck="true"># 1. æ³¨ï¼šæ•´åˆ tomcat+JSP çš„ Spring Boot é¡¹ç›®ï¼Œå¯åŠ¨ä¸jar(éJSP)å½¢å¼ä¸åŒï¼Œä¸”é¡¹ç›®ç»“æ„ä¹Ÿæœ‰ä¸åŒã€‚</span>
XxxApplication.java				<span class="token comment" spellcheck="true">#SpringBootä¸»é…ç½®ç±»</span>
ServletInitializer.java		<span class="token comment" spellcheck="true">#å¤šäº†ä¸€ä¸ªJSPä½¿ç”¨çš„Servletåˆå§‹åŒ–å™¨</span>

<span class="token comment" spellcheck="true"># 2. jar-booté¡¹ç›®å¯åŠ¨æ—¶ï¼Œç›´æ¥å¯åŠ¨ä¸»é…ç½®ç±»ã€‚è€ŒJSP-warçš„booté¡¹ç›®å¯åŠ¨ï¼Œå…ˆå¯åŠ¨tomcat -> å†å¯åŠ¨Spring Bootã€‚</span>
public class ServletInitializer extends SpringBootServletInitializer <span class="token punctuation">{</span>
    @Override
    protected SpringApplicationBuilder configure<span class="token punctuation">(</span>SpringApplicationBuilder application<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> application.sources<span class="token punctuation">(</span>JspTestApplication.class<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">#è°ƒç”¨äº†bootä¸»é…ç½®ç±»</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h1 id="æ‰©å±•ä¸é—®é¢˜"><a href="#æ‰©å±•ä¸é—®é¢˜" class="headerlink" title="æ‰©å±•ä¸é—®é¢˜"></a>æ‰©å±•ä¸é—®é¢˜</h1><ol>
<li><p>æ‰©å±•ï¼š</p>
<ul>
<li><p><strong><code>@ConfigurationProperties</code> ä¸ <code>@Value</code> åŒºåˆ«</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>â€”</th>
<th><code>@ConfigurationProperties</code></th>
<th><code>@Value</code></th>
</tr>
</thead>
<tbody><tr>
<td>æ³¨å€¼</td>
<td>æ‰¹é‡æ³¨å…¥</td>
<td>å•ä¸ª</td>
</tr>
<tr>
<td>æ¾æ•£è¯­æ³•</td>
<td>æ”¯æŒ</td>
<td>ä¸æ”¯æŒ</td>
</tr>
<tr>
<td>SpEL(Springè¡¨è¾¾å¼)</td>
<td>ä¸æ”¯æŒ</td>
<td>æ”¯æŒ</td>
</tr>
<tr>
<td>JSR303æ•°æ®æ ¡éªŒ</td>
<td>æ”¯æŒ</td>
<td>ä¸æ”¯æŒ</td>
</tr>
<tr>
<td>æ³¨å…¥å¤æ‚ç±»å‹</td>
<td>æ”¯æŒ</td>
<td>ä¸æ”¯æŒ</td>
</tr>
</tbody></table>
<p><em>â˜æ¾æ•£è¯­æ³•ï¼šyml&#x2F;propertiesé…ç½®Javaä¸­çš„é©¼å³°å½¢å¼å¯æ”¹ä¸ºï¼Œå¦‚ï¼šuserName â€“&gt; user-name&#x2F;user-Name&#x2F;userNameå‡å¯ã€‚</em><br><em>â˜ç®€å•ç±»å‹ï¼š8ä¸ªåŸºæœ¬ç±»å‹&#x2F;String&#x2F;Date</em></p>
</li>
<li><p><code>@PropertySource/@PropertySources</code> ï¼šé»˜è®¤ä¼šåŠ è½½ <code>application.yml/properties</code> ä¸­çš„æ•°æ®ã€‚è‹¥ä¸åœ¨è¿™2ä¸ªé…ç½®ä¸­ï¼Œåˆ™éœ€è¦<code>@PropertySource</code> å•ç‹¬æŒ‡å®šï¼šä¾‹å¦‚ï¼Œè‹¥è‡ªå®šä¹‰é…ç½®ç±»å¼•å…¥çš„æ˜¯å…¶ä»–è‡ªå®šä¹‰é…ç½®ï¼ˆæ³¨æ„ï¼šåå­—éé»˜è®¤ <code>appliction.yml/properties</code> ï¼‰- ä¾‹å¦‚ <code>custom_user.properties</code> ï¼Œåˆ™ç±»æ³¨è§£ä½¿ç”¨ <code>@PropertySource(value = &#123;&quot;classpath:custom_user.properties&quot;&#125;)</code> ï¼ˆå…¶ä¸­ï¼šclasspathç±»è·¯å¾„ï¼Œå³å½“å‰é…ç½®æ‰€åœ¨çš„èµ„æºç›®å½• <code>src/main/resources/</code> ï¼‰</p>
<p><u><em>â˜ç‰¹åˆ«æ³¨æ„ï¼š<code>@PropertySource</code> åªèƒ½åŠ è½½.properties&#x2F;.xmlè€Œä¸èƒ½åŠ è½½.ymlé…ç½®ï¼</em></u></p>
</li>
<li><p>éšæœºå ä½ç¬¦ï¼š</p>
<table>
<thead>
<tr>
<th>éšæœºå ä½ç¬¦è¡¨è¾¾å¼</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody><tr>
<td>${random.uuid}</td>
<td>UUID</td>
</tr>
<tr>
<td>${random.value}</td>
<td>éšæœºå­—ç¬¦ä¸²</td>
</tr>
<tr>
<td>${random.int}</td>
<td>éšæœºæ•´å‹æ•°</td>
</tr>
<tr>
<td>${random.long}</td>
<td>éšæœºé•¿æ•´å‹æ•°</td>
</tr>
<tr>
<td>${random.int(10)}</td>
<td>10ä»¥å†…éšæœºæ•´å‹æ•°</td>
</tr>
<tr>
<td>${random.int(1,100)}</td>
<td>æŒ‡å®šèŒƒå›´å†…éšæœºæ•´å‹æ•°</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li><p>é—®é¢˜ï¼š</p>
</li>
</ol>
<pre class=" language-xml"><code class="language-xml"><span class="token comment" spellcheck="true">&lt;!--/{Your_SpringBoot_Project}/pom.xmlï¼šå³æ·»åŠ äº†æç¤ºçš„é…ç½®å…ƒæ•°æ®å¤„ç†å™¨--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>
  ...
  <span class="token comment" spellcheck="true">&lt;!--è‹¥åœ¨ @ConfigurationProperties(prefix = "xxx") æœ‰é»„è‰²è­¦å‘Šï¼Œåˆ™æŒ‰ç…§æç¤ºç‚¹å‡» "Adding spring-boot-configuration-processor to pom.xml"--></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-configuration-processor<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>

  <span class="token comment" spellcheck="true">&lt;!--ä½¿ç”¨JSR-303æ•°æ®æ ¡éªŒï¼Œéœ€è¦å¼•å…¥ä¾èµ–--></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-validation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span>
</code></pre>
<ol start="3">
<li><p>å¦‚ä½•ä½¿ç”¨IDEè‡ªåŠ¨å¼•å…¥<code>dependency</code>ï¼Ÿ</p>
<ul>
<li><p>Eclipse&#x2F;STSï¼š</p>
<pre class=" language-groovy"><code class="language-groovy"><span class="token number">1</span><span class="token operator">.</span> åå¥½è®¾ç½®Preferences <span class="token operator">-></span> Maven <span class="token operator">-></span> å‹¾é€‰ Download repository index updates onstartup
<span class="token number">2</span><span class="token operator">.</span> åœ¨ pom<span class="token operator">.</span>xml ä¸­ä½¿ç”¨å¿«æ·é”® <span class="token string">"âŒ¥ + /"</span> <span class="token operator">-></span> Edit Starts<span class="token punctuation">...</span> <span class="token operator">-></span> Edit Spring Starts ä¸­çš„ Avaiable æ è¾“å…¥è¦æ·»åŠ çš„ dependency å…³é”®å­— <span class="token operator">-></span> å‹¾é€‰åŒ¹é…é¡¹ï¼Œåº”ç”¨å³å¯ã€‚
</code></pre>
</li>
</ul>
</li>
<li><p>æ³¨æ„ï¼š</p>
<ul>
<li>ä¼ ç»Ÿçš„webé¡¹ç›®ä¸­ï¼Œé™æ€èµ„æºï¼ˆå¦‚ï¼šhtmlï¼‰ä¿®æ”¹åï¼Œä¸éœ€è¦é‡å¯ã€‚ä½†æ˜¯åœ¨ <code>Spring Boot</code> é¡¹ç›®ä¸­ï¼Œä¿®æ”¹åéœ€è¦é‡å¯ã€‚</li>
</ul>
</li>
</ol>
]]></content>
      <categories>
        <category>æŠ€æœ¯ç¯‡</category>
        <category>åç«¯</category>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>SpringBoot</tag>
      </tags>
  </entry>
</search>
